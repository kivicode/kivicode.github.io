var bpaUiEntryPoint=function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=82)}([function(e,t,n){"use strict";angular.module("bpa-ui.directives",["bpa-ui.factories","bpa-common.directives"])},function(e,t,n){"use strict";angular.module("bpa-ui.factories",["bpa-ui.constants","components.core.log","bpa-common.factories","bpa-common.interceptors"])},function(e,t,n){"use strict";n(1),n(4),n(3),angular.module("bpa-ui.factories").factory("bpaUrl",["$location","$document","$templateCache","bpaVars","ACCOUNTING_ENTITY_KEY","DISBURSEMENT_METHODS_URL_PART","DEPOSIT_METHODS_URL_PART","FINANCIAL_ACCOUNTS_URL_PART",function(e,t,n,a,r,i,o,s){return{urlSetAe:function(e){var t=u();return e.replace("/00000/",t?"/"+t+"/":"/")},formUrl:function(e){return d(e=c(e))?e:l(!0)+e},baseUrl:l,resourceUrl:function(e,t,n){if(angular.isArray(e)&&e.length>1){if(d(e[1]))return e[1];e=e[0]}return e=e.replace(/^\/+/,""),l(n)+e+function(e,t){var n=t?"?":"",a=[];for(var r in e=e||{})e.hasOwnProperty(r)&&a.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return a.length>0?n+a.join("&"):""}(t,!0)},absoluteUrl:function(t){if(t.length&&"/"!==t[0])return t;var n=e.protocol()+"://"+location.host;return t=t.replace(/^\/+/,"/"),n+t},isTemplateExists:d,getTemplateCacheName:c,getMainBillingMethodsPageUri:function(){return p("bpa_ui_billing_methods_uri")},getDisbursementMethodsPageUri:function(){return p("bpa_ui_disbursement_methods_uri")},disbursementMethodsActionUrl:function(e,t,n){return(n?"/":l(!1))+(e?e+"/":"")+i+(t?"/"+t:"")},depositMethodsBaseUrl:function(e,t){return(t?"/":l(!1))+(e||"")+"/"+o},financialAccountsBaseUrl:function(e){return l(!1)+s+(e?"/"+e:"")}};function c(e){return e+".html"}function l(e){var t=u(),n=p("bpa_ui_base_url")+"/";return e&&t&&(n+=t+"/"),n}function u(){return a.get(r)}function d(e){var a=t[0].getElementById(e);return a&&"text/ng-template"===a.getAttribute("type")&&"script"===a.nodeName.toLowerCase()||!!n.get(e)}function p(e){var t=Applet.getVar(e);if(!t)throw new Error("Please check app config, "+e+" not defined in js_vars");return t}}])},function(e,t,n){"use strict";var a=angular.module("bpa-ui.constants",["components.core.psmetrics"]),r=Applet.getVar("bpa_ui_psmetrics_traffic_rate");void 0!==r&&a.constant("PSMETRICS_TRAFFIC_RATE",parseFloat(r)),a.constant("DISBURSEMENT_METHODS_URL_PART","disbursement-methods").constant("TAX_INFO_URL_PART","tax-info").constant("DEPOSIT_METHODS_URL_PART","deposit-methods").constant("FINANCIAL_ACCOUNTS_URL_PART","financial-accounts").constant("ACCOUNTING_ENTITY_KEY","bpa_ui_accounting_entity_id")},function(e,t,n){"use strict";n(1),angular.module("bpa-ui.factories").factory("bpaVars",[function(){var e={};return{get:function(t){return e[t]||Applet.getVar(t)},set:function(t,n){e[t]=n}}}])},function(e,t,n){"use strict";n(1),angular.module("bpa-ui.factories").factory("bpaEventLog",["oLog","eoModelFactory",function(e,t){var n=void 0,a=angular.extend({setFlowName:function(e){n=e},logEvent:function(n,a,r,i){var o={event:n,location:a};i&&(o.sublocation=i),r&&(angular.isArray(r)?o.data=r:o.data=[r]),e.event(t.get("Event",o))},logErrors:function(e,t,n,r,i){var o=this,s=function(r){return o.logBpaEvent(a.EVENT_IMPRESSION,e,angular.extend({event_label:n,event_message:r||"Undefined error"},i||{}),t)};angular.isArray(r)?angular.forEach(r,s):angular.isString(r)?s(r):s()},logBpaEvent:function(e,t,a,r){!(a=a||{}).flow&&n?a.flow=n:a.flow||(a.flow="undefined"),this.logEvent(e,t,a,r)},logLoadingFailure:function(e,t,n){this.logErrors(e,t,a.LABEL_ERROR_3RD_PARTY,n)},getConstants:r},r());return a;function r(){return{get EVENT_CLICK(){return"click"},get EVENT_IMPRESSION(){return"impression"},get EVENT_PAGE(){return"page"},get LABEL_SUCCESS_UPM_ADDED(){return"success_event_upm_added"},get LABEL_ERROR_PROCESSING(){return"error_event_processing_errors"},get LABEL_ERROR_VALIDATION(){return"error_event_validation_errors"},get LABEL_ERROR_3RD_PARTY(){return"error_event_third_party_script"},get LABEL_CANCEL(){return"cancel"},get LABEL_SAVE(){return"save"},get LABEL_BACK(){return"back"},get LABEL_START_SCREEN(){return"start_screen"}}}}])},function(e,t,n){"use strict";n(1),angular.module("bpa-ui.factories").factory("bpaAlert",["$timeout",function(e){var t=[],n=null;return{addAlertMessages:function(n){e(function(){n&&n.length>0&&(t=t.concat(n.map(function(e){return angular.isString(e)?{aeRid:null,type:"danger",message:e}:e})))})},addFatalErrorMessage:function(e){t.push({aeRid:e,type:"danger",message:n})},getAlertMessages:function(e){return e?t.filter(function(t){return t.aeRid===e}):t},setFatalErrorMessage:function(e){n=e},closeAlertMessage:function(e){t.splice(e,1)},clearMessages:function(e){t=e?t.filter(function(t){return t.aeRid!==e}):[]}}}])},function(e,t,n){"use strict";angular.module("bpa-ui.financial-accounts.directives",[])},function(e,t,n){"use strict";function a(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),a(n(222)),a(n(225)),a(n(226)),a(n(227))},function(e,t,n){"use strict";n(1),n(2),n(4),angular.module("bpa-ui.factories").factory("bpa",["$q","bpaOauth2Http","bpaUrl","bpaVars","ACCOUNTING_ENTITY_KEY",function(e,t,n,a,r){var i={};return{setAccountingEntityRid:function(e){a.set(r,e)},getAccountingEntityRid:function(){return a.get(r)},checkMethodOfPayment:function(t,n){var a=e.defer();return o(n,function(e){var n=function(e,t){var n,a,r="";for(a in e)if(n=e[a],Array.isArray(n)&&n.length&&c(n,t)){r=a;break}return r}(t,e);n?a.resolve(n):a.reject("no_match")},function(e){a.reject(e)}),a.promise},getMethodOfPaymentInfo:o,setMethodOfPaymentInfo:function(e){i[e.id]=e},updateMethodOfPaymentInfo:function(e,t){i[e]=angular.extend(i[e],t)},NOT_EXISTS:function(e){return void 0===e.type},IS_CC:function(e){return"CC"===e.type},IS_ACH:function(e){return"ACH_DEPOSIT"===e.type},VERIFIED:function(e){return"verified"===e.verification_status&&e.is_active},WAIT_VERIFICATION:function(e){return"in_progress"===e.verification_status}};function o(e,a,r){if(i[e])s(i[e],a);else{var o=n.baseUrl(!0)+"mop-info";e&&(o+="/"+e),t.get(o).then(function(e){s(e.data,a)},function(e){r&&r(401===e.status||403===e.status?"access_denied":"network_error")})}}function s(e,t){e&&(e.verification_status=e.verification,e.billing_address=e.billing_address||{}),t(e)}function c(e,t){for(var n=0,a=e.length;n<a;n++){if("function"!=typeof e[n])return!1;if(!e[n](t))return!1}return!0}}])},function(e,t,n){"use strict";angular.module("bpa-ui.controllers",["bpa-ui.factories"])},function(e,t,n){"use strict";angular.module("bpa-ui.components",[])},function(e,t,n){"use strict";n(1),angular.module("bpa-ui.factories").factory("bpaScreenSize",["screenSize","$window","$timeout",function(e,t,n){return angular.element(t).on("resize",function(){return n(function(){return e.init()})}),{is:function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return-1!==n.indexOf(e.get())},isSmallScreen:function(){return this.is("xs","sm")}}}])},function(e,t,n){"use strict";n(1),angular.module("bpa-ui.factories").factory("bpaTaxInfo",["$q","bpaOauth2Http","bpaRouting",function(e,t,n){var a=!1;return{get:function(){return e(function(e,a){t.get(n.get("tax-info-status")).then(function(t){t.data&&t.data.taxInfo?e(t.data):a(t.data)},function(e){return a({code:e.status,message:e.statusText})})})},save:function(a){return e(function(e,r){t.post(n.get("submit-tax-info"),{tax_info:a}).then(function(t){t.data&&t.data.status?e(t.data):r(t.data)},function(){return r()})})},enableFlashMessages:function(){a=!0},saveVat:function(e){return r({vatId:e})},skipVat:function(){return r({vatSkipped:!0})},removeVat:function(){return e(function(e,a){t.post(n.get("remove-vat"),{}).then(function(t){t.data&&t.data.status?e(t.data):a(t.data)},function(){return a()})})}};function r(r){return a&&(r.flashMessagesEnabled=!0),e(function(e,a){t.post(n.get("submit-vat"),{vat_info:r}).then(function(t){t.data&&t.data.status?e(t.data):a(t.data)},function(){return a()})})}}])},function(e,t,n){"use strict";n(27),n(39),n(40),n(31),n(2),angular.module("bpa-ui.financial-accounts.factories").factory("aeManage",["bpaOauth2Http","lockSubmit","scroller","aeMessages","bpaUrl",function(e,t,n,a,r){var i=0,o=[],s={},c={},l={},u={},d={},p={},m=Applet.getVar("ae_count"),f=Applet.getVar("ae_limit");return{updateAe:function(n){var r=Applet.getVar("update_ae_url"),i=n.aeId,o=function(e){var t=_(e.aeId),n={};if(!t)return null;return n.name=t.name==e.name?null:e.name,n.hidden=t.hidden==e.hidden?null:e.hidden,n}(n);t.lock(),a.reset(),e.post(C(r,i),o).success(function(e){t.unlock(),function(e){if(!e)return!1;if(void 0===e.name||void 0===e.hidden)return!1;return!0}(e)?(a.setGeneralErrors(e.error),function(e,t){var n=_(e);if(!n)return;null!=t.name&&(n.name=t.name);null!=t.hidden&&(n.hidden=t.hidden)}(i,e)):a.setNetworkError()}).error(function(e){t.unlock(),e.errorMessage?a.setGeneralErrors(e.errorMessage):a.setNetworkError()})},registerExistingAe:function(e){var t=_(e.aeId);t?(t.aeId=e.aeId,t.name=e.name,t.hidden=e.hidden,t.suspended=e.suspended):s[e.aeId]=e},registerExistingTeam:function(e){c[e.teamId]=e},addNewAe:function(e){return m++,i++,o.push({id:i,name:e,hidden:!1}),i},getNewAeList:g,getAeById:_,setAeName:function(e,t){var n=_(e);n?n.name=t:s[e]={name:t}},getAeName:function(e){var t=_(e);return t?t.name:""},getAeHidden:function(e){if(!e)return!1;var t=_(e);return!!t&&t.hidden},removeUnusedNewAe:v,extractNewAeId:w,getNewAeCountForTeam:function(e){return u[e]},aeLimitRiched:function(){return f<m+1},getAddAeLimit:k,getAeCount:A,getTeamName:function(e){var t=c[e];return t?t.name:""},getRootAe:E,getAddAeHint:function(){var e=E();if(S())return(Applet.getVar("ae_suspended_hint")||"").replace("%name%",e.name).replace("%aeRid%",e.aeId);return(Applet.getVar("ae_limit_hint")||"").replace("%count%",A()).replace("%max%",k())},isRootAeSuspended:S,getFinData:b,assignCreate:function(){var n,r,i,o=Applet.getVar("assign_and_create_url"),l=g(),m=T(),f={},b={},h={assign:b,newAe:f};if(!m)return;for(var k in d)p[k]!=d[k]&&(b[k]=d[k]);for(var A=0,w=l.length;A<w;A++)(n=l[A]).aeId||(f[n.id]=n.name);return t.lock(),a.reset(),e.post(C(o,m),h).success(function(e){t.unlock(),function(e){return!!e&&!(!e.assigned||!e.added)}(e)?(r=function(e){var t,n,a={},r=[],i=[];for(var o in y(function(t){(n=e.added[t.id])?(function(e,t){e.aeId=t,s[t]=e}(t,n),delete u[t.id],a[n]=t,r.push(t)):i.push(t)}),e.assigned)n=e.assigned[o],(t=a[n])&&(t.teamId=o,d[o]=""+n);return{success:r,error:i}}(e),i=function(e){var t,n=[],a=[];for(var r in d)p[r]!=d[r]&&(t=c[r],e.assigned[r]?a.push(t):e.unexpectedTeamAssignError&&-1!==e.unexpectedTeamAssignError.indexOf(r)&&n.push(t));for(r in e.assigned)p[r]=e.assigned[r];return v(),{success:a,error:n}}(e),a.setAddAeData(r),a.setAssignAeData(i),a.setGeneralErrors(e.error)):a.setNetworkError()}).error(function(e){t.unlock(),e.errorMessage?a.setGeneralErrors(e.errorMessage):a.setNetworkError()})},countNewUsedAe:function(e){var t=d[e],n=w(l[e]),a=w(t);n&&u[n]&&(u[n]--,0==u[n]&&delete u[n]);a&&(u[a]=(u[a]||0)+1);l[e]=d[e]},isTeamHidden:h,isFinDataEmpty:function(){for(var e in d)if(d[e]!=p[e])return!1;return!0},setFinInitData:function(e,t){p[e]=t},canHideAe:function(e){var t;for(t in p)if(d[t]){if(d[t]==e&&!h(t))return!1}else if(p[t]==e&&!h(t))return!1;for(t in d)if(d[t]==e&&!h(t))return!1;return!0},aboutToCreateAe:function(){var e=!1;return y(function(){return e=!0,!1}),e},aboutToAssignForExistingAe:function(){for(var e in d)if(d[e]!=p[e]&&p[e])return!0;return!1},getAffectedTeamObjects:function(){var e=[];for(var t in d)d[t]!=p[t]&&e.push(c[t]);return e},getExistingAes:function(){return s},getTeamsInitiallyAssignedToAe:function(e){var t=[];for(var n in p)p[n]==e&&t.push(c[n]);return t},getAeInitiallyAssignedToTeam:function(e){var t=p[e];return s[t]},resetFinData:function(){for(var e in p)d[e]=p[e]},getNewAeById:function(e){for(var t in o)if(o[t].id==e)return o[t]},isRootAe:function(e){for(var t in p)if(p[t]==e&&c[t].isRoot)return!0;return!1},createTemporaryNewAeId:function(e){return"+"+e},canTeamSwitchAe:function(n,i,o){var s,c="";t.lock(),a.reset(),angular.isUndefined(i)&&(i=T(),c="-new");return s=r.financialAccountsBaseUrl(i)+"/can-switch-ae"+c+"/"+n,e.get(s).success(function(e){if(t.unlock(),angular.isUndefined(e))return a.setNetworkError(),void o(!0);angular.isUndefined(e.error)?o(!1):(a.setGeneralErrors(e.error),o(!0))}).error(function(e){t.unlock(),e.errorMessage?a.setGeneralErrors(e.errorMessage):a.setNetworkError(),o(!0)})}};function b(){return d}function g(){return o}function h(e){var t=c[e];return!!t&&t.hidden}function v(){var e,t,n={},a=o.length,r=b();for(var i in r)(e=w(r[i]))&&(n[e]=!0);for(;--a>=0;)(t=o[a]).aeId||(e=t.id,u[e]||n[e]||(m--,o.splice(a,1)))}function y(e){for(var t,n=0,a=o.length;n<a&&((t=o[n]).aeId||!1!==e(t));n++);}function k(){return f}function A(){return m}function w(e){return e&&e.length&&"+"==e[0]?e.substr(1):0}function _(e){return s[e]}function E(){for(var e in p)if(c[e].isRoot&&p[e])return _(p[e]);return null}function S(){var e=E();return e&&e.suspended}function C(e,t){return e.replace("00000",t)}function T(){for(var e in p)return p[e];return null}}])},function(e,t,n){"use strict";angular.module("bpa-ui.financial-accounts.controllers",[])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckedModule=void 0;var a=n(23);t.CheckedModule=a.CheckedModule,a.CheckedModule.get("bpa-common.factories",["bpa-common.constants"])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=Applet.getVar("pageId");if(!e||!e.substr)return!1;e=e.substr("Bpa-OdeskBpa-".length);for(var t=0,n=arguments.length;t<n;t++)if(new RegExp("^"+arguments[t]+"(-Explicit.*)?$").test(e))return!0;return!1}},function(e,t,n){"use strict";n(88),n(3),n(89),n(93),n(154),n(74),n(161)},function(e,t,n){"use strict";n(1),n(2),n(24),n(21),n(5),n(3),angular.module("bpa-ui.factories").factory("bpaAddBillingMethod",["eoModal","bpaUrl","bpaOauth2Http","CreditCards","$templateCache","$document","bpaIovation","bpaEventLog","bpaAssets","DEPOSIT_METHODS_URL_PART",function(e,t,n,a,r,i,o,s,c,l){var u=void 0,d=!1,p=void 0;return{show:function(n){return d=!1,function(n){return n=angular.extend({returnPaymentData:!1,hideCloseButton:!1,skipVerification:!1,forcePrimary:1,updateBillingAddress:!1,enableSubscription:!1,popupSubmitLabel:"",flowName:"BPA:undefined"},n),e.custom({size:"sm",locals:{config:n},keyboard:!1,backdrop:"static",controller:["$scope","$modalInstance","config",m],templateUrl:t.resourceUrl(l+"/partials/add-billing-method-modal.html")})}(n).result},preFetchData:function(){f(),a.preFetchAddForm(),n.get(b(),{cache:r}).then(function(e){var t=i[0].createElement("div");t.innerHTML=e.data;for(var n=t.querySelectorAll("img"),a=void 0,r=0,o=n.length;r<o;r++)a=n[r],(new Image).src=a.hasAttribute("relative-src")?c.getAssetUrl(a.getAttribute("relative-src")):a.getAttribute("src")})},getTemplateUrl:b,getAvailableDataPromise:f,isModalHidden:function(){return d},setModalHidden:function(e){d=e},setProductChargeAmount:function(e){p=e},removeAddCardFormFromCache:function(){a.removeAddFormFromCache()}};function m(e,t,n){function a(e){t.close({success:!0,mopData:e})}e.config=n,e.addBillingInterface={},e.addBillingCallback={success:a,error:function(e){t.dismiss(e)}},e.close=function(){s.logEvent(s.EVENT_CLICK,"add_upm",{event_label:"close_widget",flow:n.flowName},e.addBillingInterface&&e.addBillingInterface.getSublocation()),e.addBillingInterface.getPaymentData(function(e){e?a(e):t.dismiss()})}}function f(){if(!u){var e=p?"?productChargeAmount="+p:"";u=n.get(t.baseUrl(!0)+l+"/available"+e,{cache:!0})}return u}function b(){return t.resourceUrl(l+"/partials/add-billing-method.html")}}])},function(e,t,n){"use strict";n(1),angular.module("bpa-ui.factories").factory("ExternalScripts",["$document",function(e){var t=1,n=2,a=3,r={},i={},o={},s={},c={};return{download:function(o,s,c){s=s||{},i[o]?i[o].push(s):i[o]=[s];var u=r[o];if(void 0!==u)return void(a!==u&&l(o,r[o]));r[o]=a;var d=e[0].createElement("script");for(var p in d.onload=function(){l(o,t)},d.onerror=function(){l(o,n)},d.setAttribute("src",o),c)d.setAttribute(p,c[p]);e[0].head.appendChild(d)},setReady:function(e){u(e,t,c)},setError:function(e){u(e,n,s)},addReadyCallback:function(e,n){d(e,t,c,n)},addErrorCallback:function(e,t){d(e,n,s,t)},isGroupReady:function(e){return void 0!==o[e]}};function l(e,n){var a=t===n?"onload":"onerror",o=i[e];r[e]=n;for(var s=0,c=o.length;s<c;s++)o[s][a]&&o[s][a]();i[e]=[]}function u(e,t,n){o[e]=t;for(var a=n[e]||[],r=0,i=a.length;r<i;r++)a[r]()}function d(e,t,n,a){if(o[e]===t)a();else{var r=n[e]||[];r.push(a),n[e]=r}}}])},function(e,t,n){"use strict";n(1),n(20),n(2),angular.module("bpa-ui.factories").factory("bpaIovation",["$timeout","bpaOauth2Http","ExternalScripts","bpaUrl",function(e,t,n,a){return function(){if("undefined"!=typeof ioGetBlackbox)return;t.get(a.resourceUrl("iovation/config"),{cache:!0}).success(function(e){n.download(e.jsUrl)})}(),{getBlackBox:i,updateScope:function(e,t){r(e.bpaFormData,t)},setBlackBox:r};function r(e,t){i(function(n){e.iovationBlackBox=n,t()})}function i(t){var n=5;"undefined"==typeof ioGetBlackbox?t(""):function a(){var r=ioGetBlackbox();if(r&&r.finished&&r.blackbox)return void t(r.blackbox);--n?e(a,2e3):t("")}()}}])},function(e,t,n){"use strict";n(1),n(9),n(6),n(2),n(47),n(3),angular.module("bpa-ui.factories").factory("bpaDepositMethods",["bpa","bpaAlert","bpaUrl","bpaVerifyMop","eoModal","eoChannel","bpaOauth2Http","DEPOSIT_METHODS_URL_PART",function(e,t,n,a,r,i,o,s){var c=void 0,l=void 0;return{get CHANNEL_MOP_ADDED(){return"bpa.depositMethods.mopAdded"},get CHANNEL_MOP_REMOVED(){return"bpa.depositMethods.mopRemoved"},setScreenLoading:function(e){c=e},isScreenLoading:function(){return c},getDepositTemplateUrl:function(t,n){return t=t||e.getAccountingEntityRid(),l&&!n||(l=t+"/"+s+"/list.html"),l},depositMethodsReload:function(e){l=this.getDepositTemplateUrl(e,!0)+"?"+ +new Date},processResponse:function(e,n){n?(n.messages&&n.messages.length>0&&(t.clearMessages(e),t.addAlertMessages(n.messages)),void 0===n.status?this.processFatalErrorInResponse(e):n.status?this.depositMethodsReload():this.setScreenLoading(!1)):this.processFatalErrorInResponse(e)},processFatalErrorInResponse:function(n){n=n||e.getAccountingEntityRid(),t.clearMessages(n),t.addFatalErrorMessage(n),this.setScreenLoading(!1)},setUpModal:function(e,t){var n=this,a=r.custom(e);return a.opened.then(function(){return n.setScreenLoading(!1)}),a.result.then(t,function(){}),a},setPrimaryMop:function(e,t){return o.post(n.depositMethodsBaseUrl(e)+"/"+t+"/set-primary")},getInfo:function(e){return o.get(n.depositMethodsBaseUrl(e)+"/info").then(function(e){return e.data})},verifyMop:function(t){var n=this;return a.show(t,{allowPrimary:!0,enableSubscription:!0,flowName:"BPA:DepositMethods:VerifyUpm"}).then(function(){i.publish(n.CHANNEL_MOP_ADDED),n.setScreenLoading(!0),n.depositMethodsReload(e.getAccountingEntityRid())})}}}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.getModuleName=function(){return"bpa-ui"};t.CheckedModule=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._module=t}return a(e,[{key:"directive",value:function(e,t){return r(this._module,"directive",e,t),this}},{key:"constant",value:function(e,t){return r(this._module,"constant",e,t),this}},{key:"factory",value:function(e,t){return r(this._module,"factory",e,t),this}},{key:"provider",value:function(e,t){return r(this._module,"provider",e,t),this}},{key:"getModule",value:function(){return this._module}}],[{key:"get",value:function(t,n){var a=void 0;if(void 0===n)a=angular.module(t);else try{a=angular.module(t)}catch(e){a=angular.module(t,n)}return new e(a)}}]),e}();function r(e,t,n,a){return e._invokeQueue.filter(function(e){return angular.isArray(e)&&e.length>=3&&e[1]===t&&e[2].propertyIsEnumerable(0)&&e[2][0]===n}).length>0?e:e[t](n,a)}},function(e,t,n){"use strict";n(1),n(20),n(4),n(2),angular.module("bpa-ui.factories").factory("CreditCards",["ExternalScripts","bpaVars","bpaUrl","$templateCache","bpaOauth2Http","$document",function(e,t,n,a,r,i){var o=null,s=Date.now(),c=[{type:"visa",pattern:/^4/,length:[13,14,15,16],cvcLength:[3],currenciesAllowed:!0,validate:d},{type:"mastercard",pattern:/^5[1-5]/,binrange:[[2221,2720]],length:[16],cvcLength:[3],currenciesAllowed:!0,validate:d},{type:"amex",pattern:/^3[47]/,length:[15],cvcLength:[4],currenciesAllowed:!0,validate:d},{type:"discover",pattern:/^(6011|64|65)/,length:[16,17,18,19],cvcLength:[3],currenciesAllowed:!1,validate:d}],l={},u="add-credit-card";return{tokenize:function(e,n){!function(){if(!m())throw"Init must be called first"}();var a=e.expirationYear,r=new Date(t.get("formGenerationDate"));if(2===a.length){var i=r.getFullYear().toString();a=i.substr(0,2)+a}var o={number:e.ccNumber.replace(/\D/g,""),cvc:e.cvv2.replace(/\D/g,""),holderName:e.firstName+" "+e.lastName,expiryMonth:e.expirationMonth,expiryYear:a},c=angular.toJson(o);if(n||angular.isUndefined(l[c])){var u=new Date(Date.now()-s+r.getTime()),d=adyen.createEncryption({}),p=null,f={errors:[],lastFourDigits:o.number.substr(-4),firstSixDigits:o.number.substr(0,6),timestamps:{adyenEncryption:u.toISOString(),formRendering:r.toISOString()}};angular.extend(o,{generationtime:f.timestamps.adyenEncryption});try{var b=d.encrypt(o);if(b)f.adyen=b;else{p="Encryption failed";var g=angular.extend({},o);delete g.generationtime,f.validationResult=d.validate(g),f.validationResult.valid?p+=" due to unknown reason":p+=", invalid data: "+angular.toJson(f.validationResult)}}catch(e){p=e.toString()+(e.stack?"\nStack:\n"+e.stack:"")}p&&f.errors.push("Adyen tokenization failed: "+function(e,t){var n=t.ccNumber.replace(/\D/g,""),a=t.cvv2.replace(/\D/g,"");return e.replace(new RegExp(n,"g"),"<BIN "+n.substr(0,6)+">").replace(new RegExp(a,"g"),"<CVC>")}(p,e)),l[c]=f}return l[c]},getCvvLength:function(){var e=f();return e?e.cvcLength:null},isReady:m,updateNumber:function(e){var t=c.length,n=void 0,a=void 0;for(e=(e+"").replace(/\D/g,""),o=null,n=0;n<t;n++)if((a=c[n]).validate(e)){o=a;break}return o},getAddFormUrl:b,preFetchAddForm:function(){var t=n.getTemplateCacheName(u);n.isTemplateExists(t)||r.get(b()).then(function(n){a.put(t,n.data),function(t){var n=i[0].createElement("div");n.innerHTML=t;for(var a=n.querySelector("bpa-external-scripts-group"),r=a.querySelectorAll("bpa-external-script"),o=a.getAttribute("name"),s=r.length,c=0,l=s;c<l;c++)e.download(r[c].getAttribute("src"),{onload:function(){0===--s&&e.setReady(o)},onerror:function(){e.setError(o)}})}(n.data)})},removeAddFormFromCache:function(){a.remove(n.getTemplateCacheName(u))},getServicesState:function(){return{adyen:p()}},getAvailableCreditCards:function(){return c.map(function(e){return e.type})},getCurrentCard:f};function d(e){if(this.pattern.test(e))return!0;if(this.binrange)for(var t=0,n=this.binrange.length;t<n;t++){var a=this.binrange[t][0],r=this.binrange[t][1],i=Math.max(a.toString().length,r.toString().length),o=1*e.substr(0,i);if(a<=o&&r>=o)return!0}return!1}function p(){var e={present:"undefined"!=typeof adyen};return e.present&&(e.cse_available=void 0!==adyen.cse&&adyen.cse.available,e.has_function="function"==typeof adyen.createEncryption),e.initialized=e.present&&e.cse_available&&e.has_function,e}function m(){return p().initialized}function f(){return o}function b(){return n.formUrl(u)}}])},function(e,t,n){"use strict";n(1),n(64);var a=function(e){return e&&e.__esModule?e:{default:e}}(n(92));angular.module("bpa-ui.factories").service("bpaGcModal",a.default)},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n(1),angular.module("bpa-ui.factories").factory("bpaFormValidation",[function(){return{revalidateAllFields:function(e){angular.forEach(e,function(e){"object"===(void 0===e?"undefined":a(e))&&("function"==typeof e.$setDirty&&e.$setDirty(),"function"==typeof e.$validate&&e.$validate())})}}}])},function(e,t,n){"use strict";angular.module("bpa-ui.financial-accounts.factories",[])},function(e,t,n){"use strict";function a(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=n(80),o=n(57);t.eventLogger=new o.DocumentCustomEventLogger,t.tracker=new r.Tracker(new r.EventBus,t.eventLogger),t.binder=new r.Binder(t.eventLogger,t.tracker),t.bind=function(e){return t.binder.register.bind(t.binder,e)},t.tracker.addPublisher(new i.GtmPublisher).addPublisher(new i.GtmLegacyPublisher).addSubscriber(new i.GtmTracker,[i.EVENT_GTM]).addPublisher(new i.OlogPublisher).addPublisher(new i.OlogLegacyPublisher).addPublisher(new i.SnowplowPublisher).addPublisher(new i.SnowplowLegacyPublisher).addSubscriber(new i.SnowplowTracker,[i.EVENT_SNOWPLOW]),a(n(8)),a(n(80)),a(n(231))},function(e,t,n){"use strict";n(1),n(5),angular.module("bpa-ui.factories").factory("bpaPlaidEventLogger",["bpaEventLog",function(e){var t=void 0,n=angular.extend({},e.getConstants(),{get LOCATION(){return"add_upm"},get SUBLOCATION_ADD_INSTANT(){return"add_bank_instant"},get SUBLOCATION_ADD_MANUAL(){return"add_bank_manual"},get SUBLOCATION_LOADING(){return"add_bank_instant_loading"},get SUBLOCATION_DEPOSITORIES(){return"add_bank_instant_depositories"},setFlowName:function(t){e.setFlowName(t)},setMakePrimary:function(e){t=angular.isUndefined(e)?"not_present":e?"on":"off"},loadingFailure:function(t){e.logLoadingFailure(n.LOCATION,n.SUBLOCATION_ADD_INSTANT,t)},submitClick:function(){r(n.EVENT_CLICK,n.SUBLOCATION_DEPOSITORIES,{event_label:n.LABEL_SAVE,state_make_primary:t})},submitSuccess:function(){r(n.EVENT_CLICK,n.SUBLOCATION_DEPOSITORIES,{event_label:n.LABEL_SUCCESS_UPM_ADDED})},submitProcessingFailure:function(e){a(n.SUBLOCATION_DEPOSITORIES,n.LABEL_ERROR_PROCESSING,e)},submitValidationFailure:function(e){a(n.SUBLOCATION_DEPOSITORIES,n.LABEL_ERROR_VALIDATION,e)},receivePlaidDepositoriesSuccess:function(e,t,a){r(n.EVENT_IMPRESSION,n.SUBLOCATION_DEPOSITORIES,{event_label:"success_event_plaid_accounts",status:"success with ("+e+", "+t+", "+a+") of accounts"})},receivePlaidDepositoriesFailure:function(e){a(n.SUBLOCATION_DEPOSITORIES,"error_event_plaid_accounts",e)},logPlaidLoading:function(){r(n.EVENT_IMPRESSION,n.SUBLOCATION_LOADING)},logClickPlaid:function(){r(n.EVENT_CLICK,n.SUBLOCATION_ADD_INSTANT,{event_label:"link_account"})},logClickManual:function(){r(n.EVENT_CLICK,n.SUBLOCATION_ADD_INSTANT,{event_label:"enter_manually"})},logStartScreenManual:function(){r(n.EVENT_IMPRESSION,n.SUBLOCATION_ADD_MANUAL,{event_label:n.LABEL_START_SCREEN})},logClickCancel:function(){r(n.EVENT_CLICK,n.SUBLOCATION_DEPOSITORIES,{event_label:n.LABEL_CANCEL})}});return n;function a(t,a,r){e.logErrors(n.LOCATION,t,a,r)}function r(t,a,r){e.logBpaEvent(t,n.LOCATION,r,a)}}])},function(e,t,n){"use strict";n(10),angular.module("bpa-ui.controllers").controller("yesNoModalController",["$scope","$modalInstance","_injectedProperties",function(e,t,n){e.injectedProperties=n,e.ok=function(){t.close({success:!0})},e.cancel=function(e){t.dismiss(e)}}])},function(e,t,n){"use strict";n(27),n(40),angular.module("bpa-ui.financial-accounts.factories").factory("aeMessages",["scroller",function(e){var t=[],n=[],a=[],r=[],i=[],o=!1;return{setGeneralErrors:function(e){t=e instanceof Array?e:e?[e]:[];t.length&&c()},getGeneralErrors:function(){return t},setAddAeData:function(e){n=e.success||[],a=e.error||[],(n.length||a.length)&&c()},setAssignAeData:function(e){r=e.success||[],i=e.error||[],(r.length||i.length)&&c()},isAeErrorMessage:function(){return!!a.length},isAeSuccessMessage:function(){return!!n.length},getAeErrorMessageData:function(){return s(a)},getAeSuccessMessageData:function(){return n},isAssignErrorMessage:function(){return!!i.length},isAssignSuccessMessage:function(){return!!r.length},getAssignErrorMessageData:function(){return s(i)},getAssignSuccessMessageData:function(){return s(r)},setNetworkError:function(){c(),o=!0},isNetworkError:function(){return o},formatObjectNameList:s,reset:function(){t=[],n=[],a=[],r=[],i=[],o=!1}};function s(e){for(var t="",n=e.length;0<=--n;)t+='"'+e[n].name+(n?'", ':'"');return t}function c(){e.setPosition(0,0)}}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckedModule=void 0;var a=n(23);t.CheckedModule=a.CheckedModule,a.CheckedModule.get("bpa-common.directives",["bpa-common.factories"])},function(e,t,n){"use strict";n(16).CheckedModule.get("bpa-common.factories").factory("bpaAssets",["$document",function(e){return{getAssetUrl:function(e,n){return function(e){var n=t(e),a=n.src.search(/(\/[^\/]+){2}$/);return n.src.substr(0,a)}(n)+"/"+e},isCdnUsed:function(){return!t().hasAttribute("data-cdn-is-not-in-use")}};function t(t){for(var n=e[0].getElementsByTagName("script"),a=new RegExp("/"+(t||"js/bpa-ui-combined.js")+"(\\?.*)?$"),r=0,i=n.length;r<i;r++)if(a.test(n[r].src))return n[r];throw new Error("Bpa script is not found")}}])},function(e,t,n){"use strict";function a(e){return{get ACTION_ADD_PAYMENT_METHOD(){return"add-payment-method"},get ACTION_VERIFY_PAYMENT_METHOD(){return"verify-payment-method"},getAction:function(t){if((t=angular.isUndefined(t)?e.hash():t)===this.ACTION_ADD_PAYMENT_METHOD)return{action:this.ACTION_ADD_PAYMENT_METHOD};var n=new RegExp("^"+this.ACTION_VERIFY_PAYMENT_METHOD+"/(\\d+)$").exec(t);return null!==n?{action:this.ACTION_VERIFY_PAYMENT_METHOD,mopRid:parseInt(n[1])}:{}}}}n(1),angular.module("bpa-ui.factories").factory("bpaHashAction",a),a.$inject=["$location"]},function(e,t,n){"use strict";function a(e){var t=e.defer();return{isRelevant:function(e){return this.CODE_EMAIL_NOT_VERIFIED===e},handle:function(n,a){return t.resolve(n),e.reject(a)},get promise(){return t.promise},get CODE_EMAIL_NOT_VERIFIED(){return"EMAIL_NOT_VERIFIED"}}}n(1),angular.module("bpa-ui.factories").config(["bpaRequirementsNotMetProvider",function(e){e.handlers.push("bpaRequirementsNotMetHandler")}]).factory("bpaRequirementsNotMetHandler",a),a.$inject=["$q","$injector"]},function(e,t,n){"use strict";n(1),angular.module("bpa-ui.factories").factory("bpaValidationErrors",[function(){return{extract:function(e,t){var n=[];t||(t="[ng-messages]:not(.ng-hide) .form-message.form-error,[data-ng-messages]:not(.ng-hide) .form-message.form-error");for(var a=e.querySelectorAll(t),r=0;r<a.length;r++)n.push(a[r].innerText.trim());return n}}}])},function(e,t,n){"use strict";n(1),angular.module("bpa-ui.factories").factory("cookieManager",["$cookies",function(e){return{put:function(t,n,a){a=a||{};var r={};r.path=a.path?a.path:"/",r.domain=a.domain?a.domain:Applet.getVar("cookie_domain"),r.secure=a.secure?a.secure:Applet.getVar("cookie_secure"),a.expires&&(r.expires=a.expires);e.put((Applet.getVar("cookie_prefix")||"")+t,n,r)}}}])},function(e,t,n){"use strict";n(1),n(2),n(19),n(29),n(12),n(20),n(3),angular.module("bpa-ui.factories").factory("plaid",["bpaUrl","bpaAddBillingMethod","eoModal","eoAuthHelper","bpaOauth2Http","$filter","$timeout","$document","bpaPlaidEventLogger","ExternalScripts","bpaScreenSize","DEPOSIT_METHODS_URL_PART",function(e,t,n,a,r,i,o,s,c,l,u,d){var p=void 0,m=void 0,f=void 0,b=void 0,g=void 0,h=void 0,v=void 0,y=void 0,k=void 0,A=void 0,w=void 0,_=!1,E=!1;return{receivePlaidDepositories:S,hasNetworkError:function(){return b},getAccessTokenEncrypted:function(){return m},getAccounts:function(){return p},getBankAccounts:function(){return f},getModal:function(t,a){return p=[],m=null,f="",b=!1,g=null,h=!1,v=!1,y=null,k=!1,A=!1,g=function(t){return n.custom({size:"sm",locals:{config:t||{}},keyboard:!1,backdrop:"static",controller:["$scope","config",I],templateUrl:e.resourceUrl(d+"/partials/add-billing-method-plaid-modal.html")})}(t),y=a,g},closeModal:T,setPlaidModalHidden:O,setAddPlaidFormActive:P,setFormBlocked:M,isPlaidAccountsEmpty:function(){return A},isPlaidLoaded:function(){return _},getPlaidHandler:function(){return w},initPlaid:function(t){E||r.get(e.resourceUrl("plaid/config"),{cache:!0}).then(function(e){if(e.data&&e.data.key){var n=e.data;l.download(n.script_url,{onload:function(){angular.isDefined(Plaid)&&"function"==typeof Plaid.create?(E=!0,function(e){w=Plaid.create(angular.merge(e,{onLoad:function(){_=!0},onSuccess:function(e){S(e),M(!0),P(!0),O(!1)},onExit:function(e){c.submitProcessingFailure(),T(),e&&e.code&&(b=!0)}}))}({clientName:n.client_name,env:n.env,key:n.key,product:["auth"],selectAccount:!1})):x("Plaid API failed to load",t)},onerror:function(){x("External scripts loading error",t)}})}else x("Plaid configuration response is invalid",t)},function(){return x("Plaid configuration loading error",t)})}};function S(t){var n=a.addAuthHelpHeader({});r.post(e.baseUrl(!0)+"plaid-depositories",{publicToken:t},{headers:n}).then(function(e){e.data&&e.data.accounts&&0!==e.data.accounts.length?(M(!1),function(e){f=e.map(function(e){return e.name}).join(", ")}(p=function(e){return i("orderBy")(e,"1 * balances.available",!0)}(e.data.accounts)),m=e.data.accessTokenEncrypted,function(){var e=p.filter(function(e){return e.balances.available>0}).length,t=p.filter(function(e){return 0===e.balances.available}).length,n=p.length-e-t;c.receivePlaidDepositoriesSuccess(e,t,n)}()):(T(),A=!0,C())},function(){T(),b=!0,C()})}function C(){o(function(){for(var e=[],t=s[0].querySelectorAll(".add-plaid-bank-account-errors:not(.ng-hide)"),n=0;n<t.length;n++)e.push(t[n].innerText);c.receivePlaidDepositoriesFailure(e)},100)}function T(){g&&g.close(),t.setModalHidden(!1)}function I(e,t){e.config=t,e.isPlaidModalHidden=function(){return h},e.isAddPlaidFormActive=function(){return v},e.isSmallScreen=function(){return u.isSmallScreen()},e.close=function(){c.logClickCancel(),T()},e.isBlocked=function(){return k},e.accountTypes=y.accountTypes,e.bpaCommObject=y.bpaCommObject,e.callbackObject=y.callbackObject}function O(e){h=e}function P(e){v=e}function M(e){k=e}function x(e,t){t&&t(e),c.loadingFailure(e)}}])},function(e,t,n){"use strict";n(27),angular.module("bpa-ui.financial-accounts.factories").factory("lockSubmit",[function(){var e=!1;return{isLocked:function(){return e},lock:function(){e=!0},unlock:function(){e=!1}}}])},function(e,t,n){"use strict";n(27),angular.module("bpa-ui.financial-accounts.factories").factory("scroller",[function(){var e=function(e){for(var t,n=[],a=0,r=e.length;a<r;a++)(t=e[a])&&n.push(t);return n}([document.body,document.documentElement,document.body.parentNode]);return{setPosition:function(n,a){for(var r=0,i=e.length;r<i;r++)t(e[r],n,a)},getPosition:function(){for(var t,a,r=0,i=e.length;r<i;r++)if((t=e[r]).scrollLeft||t.scrollTop){a=n(t.scrollLeft,t.scrollTop);break}return a||n(0,0)}};function t(e,t,n){null!=t&&(e.scrollLeft=t),null!=n&&(e.scrollTop=n)}function n(e,t){return{left:e,top:t}}}])},function(e,t,n){"use strict";angular.module("bpa-ui.vat-info.directives",[])},function(e,t,n){"use strict";angular.module("bpa-ui.vat-info.controllers",[])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckedModule=void 0;var a=n(23);t.CheckedModule=a.CheckedModule,a.CheckedModule.get("bpa-common.constants",[])},function(e,t,n){"use strict";function a(e,t){return{getBalance:function(){return e.get(t.baseUrl(!0)+"balance").then(function(e){return e.data})},payBalanceDue:function(n,a){return e.post(t.baseUrl(!0)+"balance",{mopRid:n,amount:a}).then(function(e){return e.data})}}}n(1),n(2),angular.module("bpa-ui.factories").factory("bpaBalance",a),a.$inject=["bpaOauth2Http","bpaUrl"]},function(e,t,n){"use strict";n(1),n(5),angular.module("bpa-ui.factories").factory("bpaBankAccountEventLogger",["bpaEventLog",function(e){var t=angular.extend({},e.getConstants(),{get LOCATION(){return"add_upm"},get SUBLOCATION_ADD_MANUAL(){return"add_bank_manual"},get SUBLOCATION_ADD_INSTANT(){return"add_bank_instant"},setFlowName:function(t){e.setFlowName(t)},submitClick:function(){a(t.EVENT_CLICK,t.SUBLOCATION_ADD_MANUAL,{event_label:t.LABEL_SAVE})},submitSuccess:function(){a(t.EVENT_CLICK,t.SUBLOCATION_ADD_MANUAL,{event_label:t.LABEL_SUCCESS_UPM_ADDED})},submitProcessingFailure:function(e){n(t.SUBLOCATION_ADD_MANUAL,t.LABEL_ERROR_PROCESSING,e)},submitValidationFailure:function(e){n(t.SUBLOCATION_ADD_MANUAL,t.LABEL_ERROR_VALIDATION,e)},backToPlaid:function(){a(t.EVENT_CLICK,t.SUBLOCATION_ADD_MANUAL,{event_label:t.LABEL_BACK}),a(t.EVENT_IMPRESSION,t.SUBLOCATION_ADD_INSTANT,{event_label:t.LABEL_START_SCREEN})},logAbaValidationError:function(e){a(t.EVENT_IMPRESSION,t.SUBLOCATION_ADD_MANUAL,{event_label:"error_event_invalid_routing",routing_number:e})}});return t;function n(n,a,r){e.logErrors(t.LOCATION,n,a,r)}function a(n,a,r){e.logBpaEvent(n,t.LOCATION,r,a)}}])},function(e,t,n){"use strict";n(1),angular.module("bpa-ui.factories").factory("bpaBlockMode",[function(){return{lockSubmit:1,lockScreen:2,preventLeave:4,lockAll:7}}])},function(e,t,n){"use strict";function a(e,t){return{show:function(n,a){return function(n,a){if(angular.isUndefined(n))throw new Error("bpaVerifyModal.show(): mopRid is empty");return a=angular.extend({enableSubscription:!1,allowPrimary:!1},a||{}),t(function(t,r){e.open("bpa-verify-mop-modal",{mopRid:n,config:a,onSuccess:function(e){return t(e)},onCancel:function(){return r("cancel")},onClose:function(){return r("close")}})})}(n,a)}}}n(1),n(65),n(25),angular.module("bpa-ui.factories").factory("bpaVerifyMop",a),a.$inject=["bpaGcModal","$q"]},function(e,t,n){"use strict";n(1),angular.module("bpa-ui.factories").factory("bpaStateMachine",[function(){return function(e){return new function(e){var t=angular.extend({transitions:[],initial:"",current:"",context:{}},e);function n(e){return t.transitions.filter(function(n){return function(e,t){return angular.isArray(e)&&-1!==e.indexOf(t)||e===t}(n.from,t.current)&&("function"==typeof n.can?n.can(t.context,e):n.can)})}t.current=t.initial,this.getState=function(){return t.current},this.getContext=function(){return t.context},this.isState=function(e){return this.getState()===e},this.traverse=function(e){var a=n(e);if(a.length){var r=t.current;t.current=a[0].to,"function"==typeof a[0].on&&a[0].on(r,t.context,e)}}}(e)}}])},function(e,t,n){"use strict";n(1),angular.module("bpa-ui.factories").factory("bpaNetworkErrors",[function(){var e={};return{setErrorForUrl:function(t,n,a){e[t]={code:n,data:a}},getErrorForUrl:function(t){return e[t]}}}])},function(e,t,n){"use strict";n(1),n(5),angular.module("bpa-ui.factories").factory("bpaSubscriptionEventLogger",["bpaEventLog",function(e){var t=void 0,n=angular.extend({get LOCATION(){return"add_upm"},get SUBLOCATION(){return"subscription_step"},setFlowName:function(t){e.setFlowName(t)},setMopType:function(e){t=e},logFormShown:function(){r(e.EVENT_IMPRESSION)},submitClick:function(){r(n.EVENT_CLICK,{event_label:"switch"})},submitSuccess:function(){r(n.EVENT_CLICK,{event_label:"success_event_subscribed"})},submitProcessingFailure:function(t){!function(t,r){e.logErrors(n.LOCATION,n.SUBLOCATION,t,r,a())}(n.LABEL_ERROR_PROCESSING,t)},logClickEvent:function(e){r(n.EVENT_CLICK,{event_label:e})}},e.getConstants());return n;function a(){return{mop_type:t}}function r(t,r){e.logBpaEvent(t,n.LOCATION,angular.extend(a(),r||{}),n.SUBLOCATION)}}])},function(e,t,n){"use strict";angular.module("bpa-ui.interceptors",[])},function(e,t,n){"use strict";function a(e){var t=this;this.result=!1,this.cancel=function(){t.result=!1,t.close()},this.ok=function(){t.result=!0,t.close()},this.isSmallScreen=function(){return e.isSmallScreen()}}n(10),n(12),angular.module("bpa-ui.controllers").controller("simpleModalController",a),a.$inject=["bpaScreenSize"]},function(e,t,n){"use strict";angular.module("bpa-ui.vat-info.factories",[])},function(e,t,n){"use strict";n(53),angular.module("bpa-ui.vat-info.factories").factory("vatCtrlUtils",[function(){var e={setDefaults:function(t,n,a,r){t.locked=!1,t.hasError=!1,t.scrollToTop=function(){return n.scroll(0,0)},t.deferEntry=function(t,n){var a=new Date;a.setDate(a.getDate()+1),n.put("skipGst",1,{expires:a}),e.redirectToReturnUrl(t)},r.enableFlashMessages()},redirectToReturnUrl:function(e){e.location=Applet.getVar("return_url")}};return e}])},function(e,t,n){"use strict";angular.module("bpa-ui.vat-info.factories").factory("vatForm",[function(){var e,t,n={},a={};return{setSubmitUrl:function(t){e=t},getSubmitUrl:function(){return e},setFormName:function(e){t=e},validate:function(){var e,t;for(e in a)(t=a[e]).$setDirty(),t.$validate()},addInput:function(e,t,r){n[e]=t,a[t]=r},getSubmitData:function(e){var a={},r={};for(var i in n)r[i]=e[n[i]]||null;return a[t]=r,a}}}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OlogTracker=t.EVENT_OLOG=void 0;var a=n(43),r=n(28);t.EVENT_OLOG=r.EVENT_OLOG,t.OlogTracker=r.OlogTracker,a.CheckedModule.get("bpa-common.constants").constant("bpaEventTracker",r.tracker).constant("bpaEventBinder",r.binder).constant("BPA_EVENT_TRACKING_CONFIG",{pageLoadTracking:!1,initialized:!1})},function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.EVENT_TRACKED="eventTracked",e.EVENT_REGISTERED="eventRegistered"}(t.LogType||(t.LogType={}));var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"log",value:function(e,t){var n=new CustomEvent(e.toString(),{detail:{data:t}});document.dispatchEvent(n)}}]),e}();t.DocumentCustomEventLogger=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckedModule=void 0;var a=n(23);t.CheckedModule=a.CheckedModule,a.CheckedModule.get("bpa-common.interceptors",[])},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n(1),angular.module("bpa-ui.factories").factory("bpaCachedPostRequest",["bpaOauth2Http","$q",function(e,t){var n={};return{post:function(a){var i=r(a);return t(function(t,r){if(void 0===n[i])return e.post(a).then(function(e){n[i]=e,t(e)},function(e){r(e)});t(n[i])})},invalidate:function(e){var t=r(e);void 0!==n[t]&&delete n[t]}};function r(e){if("string"==typeof e)return e;if("object"==(void 0===e?"undefined":a(e))&&e.hasOwnProperty("url")){var t=e.url;return e.hasOwnProperty("data")&&(t+=JSON.stringify(e.data)),t}return null}}])},function(e,t,n){"use strict";n(1),n(5),angular.module("bpa-ui.factories").factory("bpaCcEventLogger",["bpaEventLog",function(e){var t=void 0,n=angular.extend({},e.getConstants(),{get LOCATION(){return"add_upm"},get SUBLOCATION_ADD_CARD(){return"add_card"},get SUBLOCATION_ADD_ADDRESS(){return"add_address"},get LABEL_ERROR_TOKENIZATION(){return"error_event_tokenization_failure"},setBin:function(e){t=e},setFlowName:function(t){e.setFlowName(t)},loadingFailure:function(t){e.logLoadingFailure(n.LOCATION,n.SUBLOCATION_ADD_CARD,t)},submitClick:function(){i(n.EVENT_CLICK,n.SUBLOCATION_ADD_ADDRESS,{event_label:n.LABEL_SAVE})},submitSuccess:function(){i(n.EVENT_CLICK,n.SUBLOCATION_ADD_ADDRESS,{event_label:n.LABEL_SUCCESS_UPM_ADDED})},submitProcessingFailure:function(e){r(n.SUBLOCATION_ADD_ADDRESS,n.LABEL_ERROR_PROCESSING,e)},submitValidationFailure:function(e){r(n.SUBLOCATION_ADD_ADDRESS,n.LABEL_ERROR_VALIDATION,e)},nextPageClick:function(){i(n.EVENT_CLICK,n.SUBLOCATION_ADD_CARD,{event_label:"continue"})},nextPageSuccess:function(){i(n.EVENT_IMPRESSION,n.SUBLOCATION_ADD_ADDRESS)},nextPageFailure:function(e){r(n.SUBLOCATION_ADD_CARD,n.LABEL_ERROR_VALIDATION,e)},previousPage:function(){i(n.EVENT_CLICK,n.SUBLOCATION_ADD_ADDRESS,{event_label:n.LABEL_BACK})},logTokenizationErrors:function(e){r(n.SUBLOCATION_ADD_CARD,n.LABEL_ERROR_TOKENIZATION,e)}});return n;function a(e,a){return a=a||{},t&&(a.cc_bin=t),e===n.SUBLOCATION_ADD_ADDRESS&&(a.mop_type="CC"),a}function r(t,r,i){e.logErrors(n.LOCATION,t,r,i,a(t))}function i(t,r,i){e.logBpaEvent(t,n.LOCATION,a(r,i),r)}}])},function(e,t,n){"use strict";n(1),angular.module("bpa-ui.factories").factory("bpaClientSubscription",["bpaOauth2Http",function(e){var t;return{subscribe:function(n){var a=(new Date).toISOString();return e.post(t,{planId:n,isInterstitialFlow:0,interstitialType:0,currentUri:null,referrerUri:null,pageDate:a,ajaxDate:a})},setUrl:function(e){t=e}}}])},function(e,t,n){"use strict";n(1),n(63),n(25),angular.module("bpa-ui.factories").factory("bpaConfirmation",["bpaGcModal","$q",function(e,t){var n={};return{open:function(a,r,i){if(n[a])return null;var o=t(function(t,n){e.open("bpa-confirmation-modal",{templateId:a,properties:r,onAccept:function(){return t()},onCancel:function(){return n("cancel")},onClose:function(){return n("close")},size:i||"sm"})});return o.finally(function(){return delete n[a]}),n[a]=o,o}}}])},function(e,t,n){"use strict";n(11),angular.module("bpa-ui.components").component("bpaConfirmationModal",{bindings:{properties:"<",templateId:"<",onAccept:"<",onCancel:"<",onClose:"<",size:"<"},template:'\n            <up-c-modal bpa-custom-element\n                        id="{{vm.identifier}}"\n                        ng-on-close="vm.handleClose($event)"\n                        ng-method-close="vm.close"\n                        size="{{vm.size}}"\n                        modal-footer-inverse>\n                <div ng-include="vm.getTemplateUrl()" class="ng-animate-disabled" bpa-include-replace onload="vm.templateDidLoad()"></div>\n            </up-c-modal>',controller:r,controllerAs:"vm"}),r.$inject=["bpaRouting","bpaScreenSize","$timeout","$element","$document"];var a=0;function r(e,t,n,r,i){var o=this;this.identifier=this.templateId+"-"+a++,this.isSmallScreen=function(){return t.isSmallScreen()},this.getTemplateUrl=function(){return e.get(o.templateId)},this.templateDidLoad=function(){var e=function(){return i[0].getElementById(o.identifier)};e().componentOnReady().then(function(){o.modalElement=e();var t=o.modalElement.querySelector("[slot='header-title']");o.modalElement.setAttribute("page-title",t&&t.innerText),o.modalElement.open()})},this.result=null,this.ok=function(){o.result=!0,o.close()},this.cancel=function(){o.result=!1,o.close()},this.handleClose=function(e){"UP-C-MODAL"===e.target.tagName&&(o.result&&angular.isFunction(o.onAccept)?o.onAccept():!1===o.result&&angular.isFunction(o.onCancel)?o.onCancel():angular.isFunction(o.onClose)&&o.onClose(),n(function(){r[0].remove(),o.modalElement&&o.modalElement.remove()}))}}},function(e,t,n){"use strict";n(0);var a=function(e){return e&&e.__esModule?e:{default:e}}(n(91));angular.module("bpa-ui.directives").directive("bpaCustomElement",a.default)},function(e,t,n){"use strict";function a(e,t,n,a,r){var i=this,o="verification",s="subscription",c="CC",l="ACH",u="ACH_DEPOSIT",d=null,p=!1,m=!1,f=this,b=t({initial:"loading",transitions:[{from:"loading",to:o,can:function(e,t){return angular.isDefined(t.mop_data)&&-1!==[c,l,u].indexOf(t.mop_data.type)&&"in_progress"===t.mop_data.verification},on:function(e,t,n){g(t,n),f.mopData=n.mop_data,n.mop_data.primary&&(f.config.allowPrimary=!1),y()}},{from:[o,"loading"],to:s,can:function(e,t){return f.config.enableSubscription&&angular.isDefined(t.mop_data)&&-1!==[c,u].indexOf(t.mop_data.type)&&"verified"===t.mop_data.verification&&t.primary&&t.subscription_plan},on:function(t,n,a){o===t&&e.setMethodOfPaymentInfo(a.mop_data),g(n,a),n.subscribed=!1,f.subscriptionInfo={id:a.mop_data.id,primary:a.primary,plan:a.subscription_plan,type:a.mop_data.type},"loading"===t&&y()}},{from:["loading",o,s],to:"success",can:!0,on:function(e,t,n){g(t,n),t.subscribed=n.subscribed,h(t)}}]});function g(e,t){angular.isDefined(t.mop_data)&&(e.mopRid=t.mop_data.id,e.mopType=t.mop_data.type,e.verified="verified"===t.mop_data.verification),angular.isDefined(t.primary)&&(e.primary=t.primary),angular.isArray(t.messages)&&n.addAlertMessages(t.messages)}function h(e){d=v(e),m?f.close():f.handleClose()}function v(e){return{success:!0,mopData:{id:e.mopRid,verified:e.verified,primary:e.primary,type:e.mopType,subscribed:e.subscribed}}}function y(){r(function(){f.onReady().then(function(){f.open(),m=!0})})}e.getMethodOfPaymentInfo(this.mopRid,function(e){b.traverse({mop_data:e})},function(){p=!0;var t=e.getAccountingEntityRid();n.clearMessages(t),n.addFatalErrorMessage(t),i.handleClose()}),this.pageTitles={},this.verifyCallbackObject={success:function(e){b.traverse(e)}},this.subscriptionCallbackObject={success:function(){var e=b.getContext();b.traverse({mop_data:{id:e.mopRid,verification:"verified",type:e.mopType},primary:!0,subscribed:!0})}},this.getPageTitle=function(){var e="";return i.isVerification()?e=i.isDisbursementMethod()?"disbursement":"billing":i.isSubscription()&&(e="subscription"),e?i.pageTitles[e]:""},this.isLoading=function(){return b.isState("loading")},this.isSubscription=function(){return b.isState(s)},this.isVerification=function(){return b.isState(o)},this.cancelVerification=function(){i.verifyInterface&&i.verifyInterface.cancel(),d=!1,i.close()},this.cancelSubscription=function(){i.subscriptionInterface&&i.subscriptionInterface.cancel(),h(b.getContext())},this.isBlocked=function(){return!(!i.isLoading()||p)||[{state:o,iface:i.verifyInterface},{state:s,iface:i.subscriptionInterface}].filter(function(e){return b.isState(e.state)&&e.iface&&e.iface.isBlocked()}).length>0},this.isDisbursementMethod=function(){return b.getContext().mopType===l},this.handleClose=function(){null===d&&i.isSubscription()&&(d=v(b.getContext())),d?i.onSuccess(d):!1===d?i.onCancel():i.onClose()},this.isSmallScreen=function(){return a.isSmallScreen()}}n(11),n(9),n(48),n(6),angular.module("bpa-ui.components").component("bpaVerifyMopModal",{bindings:{config:"<",mopRid:"<",onSuccess:"<",onCancel:"<",onClose:"<"},templateUrl:["bpaRouting",function(e){return e.get("template-verify-mop-modal")}],controller:a,controllerAs:"vm"}),a.$inject=["bpa","bpaStateMachine","bpaAlert","bpaScreenSize","$timeout"]},function(e,t,n){"use strict";n(1),n(2),angular.module("bpa-ui.factories").factory("bpaDisbursementSchedule",["$q","bpaOauth2Http","bpaUrl",function(e,t,n){return{save:function(a,r){return e(function(e,i){t.post(n.disbursementMethodsActionUrl(a,"save-schedule"),{disbursement_schedule_form:r}).then(function(t){t.data&&t.data.schedule?e(t.data):i(t.data)},function(){return i()})})}}}])},function(e,t,n){"use strict";n(1),angular.module("bpa-ui.factories").factory("bpaFlashMessage",["bpaOauth2Http","bpaUrl",function(e,t){var n=[],a=[];return{getMessages:function(e){return e?n.filter(function(t){return!t.aeRid||parseInt(t.aeRid)===parseInt(e)}):n},fetchMessages:function(r){e.post(t.baseUrl(!1)+(r?r+"/":"")+"get-messages",{specialMessages:a}).success(function(e){n=e&&e.length>0?e:[]})},setSpecialMessages:function(e){a=e}}}])},function(e,t,n){"use strict";n(1),angular.module("bpa-ui.factories").factory("bpaFormMode",[function(){var e=document.querySelectorAll(".js-bpa-mode-switcher.js-mode-stub");return{isStub:e=!(!e||!e.length),isNormal:!e}}])},function(e,t,n){"use strict";n(1),n(2),angular.module("bpa-ui.factories").factory("bpaGetBankInfo",["bpaOauth2Http","$q","bpaUrl",function(e,t,n){var a={};return{get:function(r){return t(function(t,i){if(void 0===a[r])return e.get(n.baseUrl()+"bank-details/USA/"+r).then(function(e){e.data&&e.data.bank&&e.data.bank.name?(a[r]=e.data.bank,t(e.data.bank)):i({code:500,message:"Unexpected response"})},function(e){i({code:e.status,message:e.statusText})});t(a[r])})}}}])},function(e,t,n){"use strict";n(1),angular.module("bpa-ui.factories").factory("bpaGtmEvents",["$window",function(e){var t=angular.isDefined(e.dataLayer)?e.dataLayer:null,n={event:"billingEvents",eventCategory:"Billing"};return{postSuccessEvent:function(e){a(angular.extend({},{eventLabel:"Success"},e))},postFailureEvent:function(e){a(angular.extend({},{eventLabel:"Fail"},e))},postCancelEvent:function(e){a(angular.extend({},{eventLabel:"Cancel"},e))},postClickEvent:function(e,t){e&&a({eventAction:t&&1==t?"Click":"click",eventLabel:e})}};function a(e){t&&t.push(angular.extend({},n,e))}}])},function(e,t,n){"use strict";n(1),n(5),angular.module("bpa-ui.factories").factory("bpaVerifyMopEventLogger",["bpaEventLog",function(e){var t=void 0,n=void 0,a=angular.extend({get LOCATION(){return"add_upm"},get SUBLOCATION(){return"verify_upm"},setFlowName:function(t){e.setFlowName(t)},setMopType:function(e){t=e},setMakePrimary:function(e){n=angular.isUndefined(e)?"not_present":e?"on":"off"},logFormShown:function(){o(e.EVENT_IMPRESSION)},submitClick:function(){o(a.EVENT_CLICK,{event_label:"verify"},!0)},submitSuccess:function(){o(a.EVENT_CLICK,{event_label:"success_event_mop_verified"},!0)},submitProcessingFailure:function(e){i(a.LABEL_ERROR_PROCESSING,e)},submitValidationFailure:function(e){i(a.LABEL_ERROR_VALIDATION,e)},logClickEvent:function(e){o(a.EVENT_CLICK,{event_label:e})}},e.getConstants());return a;function r(e){var a={mop_type:t};return e&&(a.state_make_primary=n),a}function i(t,n){e.logErrors(a.LOCATION,a.SUBLOCATION,t,n,r(!0))}function o(t,n,i){e.logBpaEvent(t,a.LOCATION,angular.extend(r(i),n||{}),a.SUBLOCATION)}}])},function(e,t,n){"use strict";n(10),angular.module("bpa-ui.controllers").controller("closablePopupController",["$scope","$modalInstance","_injectedProperties",function(e,t,n){e.injectedProperties=n,e.close=function(e){t.dismiss(e)}}])},function(e,t,n){"use strict";function a(e,t,n,a,r,i,o,s,c,l){var u="pay_now",d="form",p=this,m=!1,f=void 0,b={balance:0,isChargeable:!1};function g(){return!angular.isUndefined(b.balance)&&b.balance<0?Math.abs(b.balance):0}function h(e){var t=e[0];angular.isArray(t.depositMethods)&&(p.mops=t.depositMethods.filter(function(e){return e.canBeManuallyCharged}),p.mops.length>0?p.selectedMop=p.mops[0]:E("noMops")),_(e[1]),0===g()?E("noDue"):g()<p.minChargeAmount?E("dueIsLess"):t.isManualChargeAllowed||E("manualChargeIsNotAllowed"),P("form")?S(o.EVENT_IMPRESSION):I()}function v(){E("network"),I()}function y(){return"custom"===p.depositType}function k(){return y()?1*p.customAmount:p.getBalanceDue()}function A(e){!function(e){return-1!==["SUCCESS","INITIATED","REQUESTED","PENDING"].indexOf(e)}(e.paymentStatus)?p.mops.length>1?(p.error=e.message,C(p.error)):(p.page="failure",p.paymentMessage=e.message,C(p.paymentMessage)):(p.page="success",p.paymentMessage=e.message,S(o.EVENT_CLICK,O("success_event_paid"))),_(e)}function w(e){var t=e.data;t.message?p.error=t.message:p.error=p.defaultErrorMessage,C(p.error),angular.isUndefined(t.balance)||_(t)}function _(e){b.balance=e.balance,b.isChargeable=e.isChargeable}function E(e){p.initErrors[e]=!0,p.page="init"}function S(e,t){(t=t||{}).flow=l.flowName,o.logBpaEvent(e,u,t,d)}function C(e){S(o.EVENT_IMPRESSION,O(o.LABEL_ERROR_PROCESSING,e))}function T(){f||(f=document.getElementById("pay-balance-due-modal")),angular.forEach(s.extract(f),function(e){return S(o.EVENT_IMPRESSION,O(o.LABEL_ERROR_VALIDATION,e))})}function I(){c(function(){return o.logErrors(u,d,o.LABEL_ERROR_PROCESSING,function(){var e=document.querySelector(".bpa-init-error [data-ng-messages]:not(.ng-hide)");if(e)return e.innerText.trim()}())},100)}function O(e,t){var n={event_label:e,amount:function(){var e=k();if(e>=500)return">=500";if(e>=100)return">=100";if(e<100)return"<100"}(),whole_balance:!y(),mop_type:p.selectedMop.type};return t&&(n.event_message=t),n}function P(e){return p.page===e}p.minChargeAmount=l.minChargeAmount,p.defaultErrorMessage=l.defaultErrorMessage,p.mops=[],p.depositType="full",p.selectedMop=null,p.customAmount="",p.paymentMessage="",p.initErrors={},p.error="",p.page=d,p.submit=function(){if(S(o.EVENT_CLICK,O(u)),y()&&(p.payDueForm.customAmount.$setDirty(),p.payDueForm.customAmount.$validate()),!p.payDueForm.$valid)return void c(T,100);m=!0,(p.error="",t.payBalanceDue(p.selectedMop.rid,k().toFixed(2)).then(A,w)).finally(function(){m=!1})},p.getBalanceDue=g,p.isBlocked=function(){return m},p.isSubmitDisabled=function(){return m||!p.selectedMop||!b.isChargeable},p.isCustomAmount=y,p.depositTypeChanged=function(){y()||(p.customAmount="",p.payDueForm.customAmount.$setPristine())},p.customAmountFocused=function(){p.depositType="custom"},p.isPayPal=function(){return p.selectedMop&&"PAYPAL_DEPOSIT"===p.selectedMop.type},p.addMop=function(){e.close({addMop:!0})},p.isPage=P,m=!0,a.all([n.getInfo(l.currentAe),t.getBalance()]).then(h,v).finally(function(){m=!1})}n(10),n(44),n(22),n(4),n(2),n(5),n(36),angular.module("bpa-ui.controllers").controller("payDueModalController",a),a.$inject=["$modalInstance","bpaBalance","bpaDepositMethods","$q","bpaVars","bpaUrl","bpaEventLog","bpaValidationErrors","$timeout","injected"]},function(e,t,n){"use strict";n(10);var a=n(157);a.keys().forEach(a)},function(e,t,n){"use strict";n(26),n(66);var a=n(76);angular.module("bpa-ui.directives").directive("disbursementScheduleForm",["$filter","bpaFormValidation","bpaValidationErrors","bpaDisbursementSchedule","bpaEventTrackerFactory","bpaRouting",function(e,t,n,r,i,o){return{restrict:"E",templateUrl:o.get("template-disbursement-schedule-form"),scope:{interfaceObject:"=?",callbackObject:"=?",disbursementSchedule:"<",accountingEntity:"<",paymentMethods:"<",preselectedMop:"<"},link:function(n){var o=!1,s=i.create(a.SUBLOCATION_DISBURSEMENT_SCHEDULE);function c(){return{target_upm:n.selectedPayment.code,target_schedule:n.form.schedule,target_threshold:parseInt(n.form.threshold)}}function l(e){if(angular.isObject(n.callbackObject)&&angular.isFunction(n.callbackObject[e])){for(var t,a=arguments.length,r=Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];(t=n.callbackObject)[e].apply(t,r)}}s.impression(i.LABEL_WIDGET_LOAD),function(t){if(t.thresholdsList=[],t.disbursementSchedule.minThreshold<t.disbursementSchedule.hardThreshold)for(var n=t.disbursementSchedule.minThreshold;n<=t.disbursementSchedule.hardThreshold;n+=t.disbursementSchedule.thresholdStep)t.thresholdsList[t.thresholdsList.length]=n;else t.disbursementSchedule.threshold!==t.disbursementSchedule.hardThreshold&&(t.thresholdsList[t.thresholdsList.length]=t.disbursementSchedule.hardThreshold,t.thresholdsList[t.thresholdsList.length]=t.disbursementSchedule.threshold);t.thresholdsList=t.thresholdsList.map(function(t){return{name:"$"+e("number")(t,2)+" or more",value:String(t)}})}(n),function(e){for(var t in e.paymentMethodsCount=0,e.paymentMethodsCollection=[],e.paymentMethods)e.paymentMethodsCount++,e.paymentMethodsCollection.push(e.paymentMethods[t])}(n),function(e){var t=e.disbursementSchedule.schedulesList.filter(function(t){return t.key===e.disbursementSchedule.schedule}),n="";angular.isDefined(e.preselectedMop)?n=e.preselectedMop.toString():e.disbursementSchedule.preferredMop?n=e.disbursementSchedule.preferredMop.toString():1===e.paymentMethodsCount&&(n=e.paymentMethodsCollection[0].id.toString()),e.form={schedule:t.length>0?t[0].key:void 0,threshold:e.disbursementSchedule.threshold.toString(),mopRid:n},e.form.mopRid&&(e.selectedPayment=e.paymentMethods[e.form.mopRid])}(n),n.interfaceObject=n.interfaceObject||{},angular.extend(n.interfaceObject,{isBlocked:function(){return o},submit:function(){l("submit"),t.revalidateAllFields(n.scheduleForm),n.scheduleForm.$valid?(o=!0,s.click("update",c()),r.save(n.accountingEntity,n.form).then(function(e){s.click("success_event_updated",c()),l("success",e)},function(e){var t=e&&e.errors||[];n.networkError=0===t.length,n.formErrors=t,s.messages(i.LABEL_ERROR_PROCESSING,t.length?t:[void 0],c()),l("error",e)}).finally(function(){return o=!1})):l("validationError")}}),angular.extend(n,{hasPreselectedMop:function(){return angular.isDefined(n.preselectedMop)},getNextDate:function(){if(n.form.schedule)for(var e in n.disbursementSchedule.schedulesList)if(n.disbursementSchedule.schedulesList.hasOwnProperty(e)&&n.disbursementSchedule.schedulesList[e].key===n.form.schedule)return n.disbursementSchedule.schedulesList[e].nextDate||"";return n.disbursementSchedule.nextDate},isManualScheduleSelected:function(e){return e===n.disbursementSchedule.manualSchedule},eventLogClick:function(e){s.click(e)}})}}}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SUBLOCATION_DISBURSEMENT_SCHEDULE="disbursement_schedule"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SUBLOCATION_CONFIRMATION="get_paid_now_confirmation"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(212);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var r=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=r.default},function(e,t,n){"use strict";(function(a,r){var i,o,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.5+7f2b526d
 */
!function(a,r){"object"===s(t)&&void 0!==e?e.exports=r():void 0===(o="function"==typeof(i=r)?i.call(t,n,t,e):i)||(e.exports=o)}(0,function(){function e(e){return"function"==typeof e}var t=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,i=void 0,o=void 0,c=function(e,t){b[n]=e,b[n+1]=t,2===(n+=2)&&(o?o(g):h())};var l="undefined"!=typeof window?window:void 0,u=l||{},d=u.MutationObserver||u.WebKitMutationObserver,p="undefined"==typeof self&&void 0!==a&&"[object process]"==={}.toString.call(a),m="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var e=setTimeout;return function(){return e(g,1)}}var b=new Array(1e3);function g(){for(var e=0;e<n;e+=2){(0,b[e])(b[e+1]),b[e]=void 0,b[e+1]=void 0}n=0}var h=void 0;function v(e,t){var n=this,a=new this.constructor(A);void 0===a[k]&&R(a);var r=n._state;if(r){var i=arguments[r-1];c(function(){return L(r,a,i,n._result)})}else x(n,a,e,t);return a}function y(e){if(e&&"object"===(void 0===e?"undefined":s(e))&&e.constructor===this)return e;var t=new this(A);return I(t,e),t}h=p?function(){return a.nextTick(g)}:d?function(){var e=0,t=new d(g),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():m?function(){var e=new MessageChannel;return e.port1.onmessage=g,function(){return e.port2.postMessage(0)}}():void 0===l?function(){try{var e=Function("return this")().require("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(g)}:f()}catch(e){return f()}}():f();var k=Math.random().toString(36).substring(2);function A(){}var w=void 0,_=1,E=2,S={error:null};function C(e){try{return e.then}catch(e){return S.error=e,S}}function T(t,n,a){n.constructor===t.constructor&&a===v&&n.constructor.resolve===y?function(e,t){t._state===_?P(e,t._result):t._state===E?M(e,t._result):x(t,void 0,function(t){return I(e,t)},function(t){return M(e,t)})}(t,n):a===S?(M(t,S.error),S.error=null):void 0===a?P(t,n):e(a)?function(e,t,n){c(function(e){var a=!1,r=function(e,t,n,a){try{e.call(t,n,a)}catch(e){return e}}(n,t,function(n){a||(a=!0,t!==n?I(e,n):P(e,n))},function(t){a||(a=!0,M(e,t))},e._label);!a&&r&&(a=!0,M(e,r))},e)}(t,n,a):P(t,n)}function I(e,t){e===t?M(e,new TypeError("You cannot resolve a promise with itself")):!function(e){var t=void 0===e?"undefined":s(e);return null!==e&&("object"===t||"function"===t)}(t)?P(e,t):T(e,t,C(t))}function O(e){e._onerror&&e._onerror(e._result),N(e)}function P(e,t){e._state===w&&(e._result=t,e._state=_,0!==e._subscribers.length&&c(N,e))}function M(e,t){e._state===w&&(e._state=E,e._result=t,c(O,e))}function x(e,t,n,a){var r=e._subscribers,i=r.length;e._onerror=null,r[i]=t,r[i+_]=n,r[i+E]=a,0===i&&e._state&&c(N,e)}function N(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var a=void 0,r=void 0,i=e._result,o=0;o<t.length;o+=3)a=t[o],r=t[o+n],a?L(n,a,r,i):r(i);e._subscribers.length=0}}function L(t,n,a,r){var i=e(a),o=void 0,s=void 0,c=void 0,l=void 0;if(i){if((o=function(e,t){try{return e(t)}catch(e){return S.error=e,S}}(a,r))===S?(l=!0,s=o.error,o.error=null):c=!0,n===o)return void M(n,new TypeError("A promises callback cannot return that same promise."))}else o=r,c=!0;n._state!==w||(i&&c?I(n,o):l?M(n,s):t===_?P(n,o):t===E&&M(n,o))}var D=0;function R(e){e[k]=D++,e._state=void 0,e._result=void 0,e._subscribers=[]}var j=function(){function e(e,n){this._instanceConstructor=e,this.promise=new e(A),this.promise[k]||R(this.promise),t(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?P(this.promise,this._result):(this.length=this.length||0,this._enumerate(n),0===this._remaining&&P(this.promise,this._result))):M(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===w&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,a=n.resolve;if(a===y){var r=C(e);if(r===v&&e._state!==w)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===F){var i=new n(A);T(i,e,r),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(a(e),t)},e.prototype._settledAt=function(e,t,n){var a=this.promise;a._state===w&&(this._remaining--,e===E?M(a,n):this._result[t]=n),0===this._remaining&&P(a,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;x(e,void 0,function(e){return n._settledAt(_,t,e)},function(e){return n._settledAt(E,t,e)})},e}();var F=function(){function t(e){this[k]=D++,this._result=this._state=void 0,this._subscribers=[],A!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t(function(t){I(e,t)},function(t){M(e,t)})}catch(t){M(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var n=this.constructor;return e(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();return F.prototype.then=v,F.all=function(e){return new j(this,e).promise},F.race=function(e){var n=this;return t(e)?new n(function(t,a){for(var r=e.length,i=0;i<r;i++)n.resolve(e[i]).then(t,a)}):new n(function(e,t){return t(new TypeError("You must pass an array to race."))})},F.resolve=y,F.reject=function(e){var t=new this(A);return M(t,e),t},F._setScheduler=function(e){o=e},F._setAsap=function(e){c=e},F._asap=c,F.polyfill=function(){var e=void 0;if(void 0!==r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=F},F.Promise=F,F})}).call(t,n(223),n(224))},function(e,t,n){"use strict";function a(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),a(n(228)),a(n(229)),a(n(230))},function(e,t,n){"use strict";var a=n(16),r=n(56);function i(e,t,n,a,i,o){o.initialized||(a.addSubscriber(new r.OlogTracker(t,n),[r.EVENT_OLOG]),o.pageLoadTracking&&i.listen({event:"page-impression",element:e,data:{event:"impression",sublocation:"page",label:"page_load"}}),o.initialized=!0)}n(243),a.CheckedModule.get("bpa-common.factories").getModule().run(i),i.$inject=["$window","oLog","eoModelFactory","bpaEventTracker","bpaEventBinder","BPA_EVENT_TRACKING_CONFIG"]},function(e,t,n){n(83),n(84),n(85),n(86),n(218),e.exports=n(256)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n(87),n(168),n(171),n(173),n(194),n(196),n(207),n(211)},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(17));if(n(18),n(167),(0,a.default)("DepositMethods")){var r=angular.module("bpa-ui");r.requires.push("bpa-ui.deposit-methods.controllers"),r.config(i)}function i(e,t,n){e.html5Mode({enabled:!0}),t.group="payments",t.page="deposit-methods",n.pageLoadTracking=!0}i.$inject=["$locationProvider","SMF_CONFIG","BPA_EVENT_TRACKING_CONFIG"]},function(e,t,n){"use strict";var a=angular.module("bpa-ui",["components.core.time","components.core.validation","components.core.block","components.core.modal","components.core.fields.intlPhoneNumber","components.core.fields.input","components.core.popover","components.core.alert","components.core.authorization.oauth2","components.core.analytics","components.core.editable","components.core.templates","components.core.smf","components.core.select","components.core.countries.services","components.core.channels","components.core","ngAnimate","ngRoute","ngResource","ngMessages","ngCookies","bpa-ui.constants","bpa-ui.directives","bpa-ui.factories","bpa-ui.controllers","bpa-ui.interceptors","bpa-ui.components","fe.components.upAddressAutocomplete"]);a.config(["$animateProvider",function(e){e.classNameFilter(/^((?!(ng-animate-disabled)).)*$/)}]),a.config(["$httpProvider",function(e){e.interceptors.push("bpaTemplateLoadingError"),e.interceptors.push("bpaRequirementsNotMet")}])},function(e,t,n){"use strict";n(1);var a=n(90);a.keys().forEach(a)},function(e,t,n){var a={"./base.js":1,"./bpa-add-billing-method.js":19,"./bpa-alert.js":6,"./bpa-balance.js":44,"./bpa-bank-account-event-logger.js":45,"./bpa-block-mode.js":46,"./bpa-cached-post-request.js":59,"./bpa-cc-event-logger.js":60,"./bpa-client-subscription.js":61,"./bpa-confirmation.js":62,"./bpa-deposit-methods.js":22,"./bpa-disbursement-schedule.js":66,"./bpa-event-log.js":5,"./bpa-flash-message.js":67,"./bpa-form-mode.js":68,"./bpa-form-validation.js":26,"./bpa-gc-modal.js":25,"./bpa-get-bank-info.js":69,"./bpa-gtm-events.js":70,"./bpa-hash-action.js":34,"./bpa-iovation.js":21,"./bpa-network-errors.js":49,"./bpa-plaid-event-logger.js":29,"./bpa-requirements-not-met-handler.js":35,"./bpa-screen-size.js":12,"./bpa-state-machine.js":48,"./bpa-subscription-event-logger.js":50,"./bpa-tax-info.js":13,"./bpa-url.js":2,"./bpa-validation-errors.js":36,"./bpa-vars.js":4,"./bpa-verify-mop-event-logger.js":71,"./bpa-verify-mop.js":47,"./bpa.js":9,"./cookie-manager.js":37,"./credit-cards.js":24,"./external-scripts.js":20,"./plaid.js":38};function r(e){return n(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=90},function(e,t,n){"use strict";function a(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}function r(e){"ngInject";return{restrict:"A",compile:function(){return{pre:function(t,n,r){Object.keys(r.$attr).forEach(function(i){var o=i.startsWith("ngProp"),s=i.startsWith("ngMethod"),c=i.startsWith("ngOn"),l=r.$attr[i],u=void 0;switch((o||s||c)&&(u=e(r[i])),!0){case o:t.$watch(e(r[i],function(e){return e}),function(){n.prop(a(l.replace("ng-prop-","")),u(t))});break;case c:var d=a(l.replace("ng-on-","")),p=u;n.on(d,function(e){t.$evalAsync(function(){p(t,{$event:e})})});break;case s:var m=a(l.replace("ng-method-",""));u.assign(t,function(){var e;return(e=n[0])[m].apply(e,arguments)})}})}}}}}r.$inject=["$parse"],Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";r.$inject=["$rootScope","$compile"],Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function r(e,t){"ngInject";var n=document.createElement("div");return document.body.appendChild(n),{open:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.$new();a(o,i);var s=document.createElement(r);Object.keys(i).forEach(function(e){return s.setAttribute(function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}(e),e)}),t(s)(o),n.appendChild(s);var c=void 0;s.addEventListener("close",function e(t){c===t.target&&(s.removeEventListener("close",e),setTimeout(function(){s.remove(),o.$destroy()},5e3))});var l=function e(t){c=t.target,s.removeEventListener("open",e)};s.addEventListener("open",l)}}}t.default=r},function(e,t,n){"use strict";n(0);var a=n(94);a.keys().forEach(a)},function(e,t,n){var a={"./add-billing-method.js":95,"./add-primary-payment-button.js":96,"./bank-account-form.js":97,"./bank-account-plaid-form.js":98,"./bank-account-plaid-modal-form.js":99,"./bank-account-temporary-deposits.js":100,"./base.js":0,"./billing-address-form.js":101,"./billing-address.js":102,"./bpa-aba-validate.js":103,"./bpa-alert-messages.js":104,"./bpa-amount-input.js":105,"./bpa-async-indicator.js":106,"./bpa-base-form.js":107,"./bpa-bind-compile.js":108,"./bpa-card-number-format.js":109,"./bpa-card-number.js":110,"./bpa-card-phone.js":111,"./bpa-check-vat-format.js":112,"./bpa-custom-element.js":64,"./bpa-cvc.js":113,"./bpa-deposit-methods-action.js":114,"./bpa-ext-validator.js":115,"./bpa-external-scripts.js":116,"./bpa-flash-messages.js":117,"./bpa-form-action-url.js":118,"./bpa-form-controls.js":119,"./bpa-form-page.js":120,"./bpa-have-letter.js":121,"./bpa-help-popover.js":122,"./bpa-include-replace.js":123,"./bpa-input-group.js":124,"./bpa-location.js":125,"./bpa-maxlength-link.js":126,"./bpa-methods-page-link.js":127,"./bpa-model.js":128,"./bpa-paypal-button.js":129,"./bpa-phone.js":130,"./bpa-prevent-leave.js":131,"./bpa-routing-number.js":132,"./bpa-select.js":133,"./bpa-set-location.js":134,"./bpa-show-bank-info.js":135,"./bpa-show-tax-info.js":136,"./bpa-show-vat-info.js":137,"./bpa-validate-tin.js":138,"./bpa-var.js":139,"./bpa-vat-group.js":140,"./bpa-zip.js":141,"./choice-model-init.js":142,"./client-plan-subscription.js":143,"./credit-card-form.js":144,"./deposit-methods.js":145,"./financial-account-selector.js":146,"./mpesa-form.js":147,"./pay-due-form.js":148,"./payment-method-selector.js":149,"./tax-info-form.js":150,"./temporary-charges.js":151,"./vat-info-form.js":152,"./verify-payment-method.js":153};function r(e){return n(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=94},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n(0),n(19),n(6),n(2),n(4),n(9),n(38),n(5),n(29),n(50),n(45),n(48),n(12),n(35),n(3),angular.module("bpa-ui.directives").directive("addBillingMethod",["bpaAddBillingMethod","bpaAlert","bpaUrl","bpaVars","bpa","plaid","bpaEventLog","bpaPlaidEventLogger","bpaSubscriptionEventLogger","bpaBankAccountEventLogger","bpaStateMachine","bpaScreenSize","$timeout","$templateCache","$document","ACCOUNTING_ENTITY_KEY","bpaRequirementsNotMetHandler",function(e,t,n,r,i,o,s,c,l,u,d,p,m,f,b,g,h){var v="CC",y="ACH_DEPOSIT",k="PAYPAL_DEPOSIT",A="BALANCE",w="create_upm",_="billing_address",E="verification",S="subscription";return{restrict:"E",scope:{callbackObject:"=?",interfaceObject:"=?",skipVerification:"<",forcePrimary:"<",returnPaymentData:"<",formLockSelector:"@",ccFormLockSelector:"@",productChargeAmount:"@",flowName:"@",enableSubscription:"<",updateBillingAddress:"<",submitLabel:"@"},templateUrl:e.getTemplateUrl(),controller:["$scope",function(n){var f=!0,C=!1,T=!1,I=void 0,O=void 0,P=!1,M={},x={},N=[],L=[],D=!1,R=d({initial:w,transitions:[{from:w,to:_,can:function(e,t){return n.updateBillingAddress&&!angular.isUndefined(t.mop_data)&&t.mop_data.type===k&&"proposed"===t.mop_data.address_update},on:function(e,t,a){j(t,a),t.verified=!0,a.mop_data.billing_address instanceof Object&&(n.billingAddress=a.mop_data.billing_address)}},{from:w,to:E,can:function(e,t){return!n.skipVerification&&!angular.isUndefined(t.mop_data)&&t.mop_data.type===v&&"in_progress"===t.mop_data.verification},on:function(e,t,a){j(t,a),t.verified=!1,n.verificationMopRid=a.id}},{from:[w,E],to:S,can:function(e,t){return n.enableSubscription&&!angular.isUndefined(t.mop_data)&&-1!==[v,y].indexOf(t.mop_data.type)&&("verified"===t.mop_data.verification||1===t.verified)&&t.subscription_plan},on:function(e,t,a){j(t,a),t.verified=!0,l.setMopType(a.mop_data.type),n.subscriptionInfo={id:a.mop_data.id,primary:a.primary,plan:a.subscription_plan,type:a.mop_data.type}}},{from:[w,_,E,S],to:"success",can:!0,on:function(e,t,a){-1!==[w,E].indexOf(e)?(j(t,a),t.verified=!angular.isUndefined(a.verify)&&"1"!==a.verify||!angular.isUndefined(a.verified)&&1===a.verified):_===e&&i.updateMethodOfPaymentInfo(t.mopRid,{billing_address:a.billing_address,address_update:a.address_update}),z(t.mopRid,t.verified,angular.isUndefined(a.mop_data)?n.mode:a.mop_data.type)}}]});function j(e,n){n&&(n.messages&&function(e){e&&e.length>0&&t.addAlertMessages(e)}(n.messages),n.mop_data?(i.setMethodOfPaymentInfo(n.mop_data),e.mopRid=n.mop_data.id):n.id&&(e.mopRid=n.id))}function F(e){x[e]=!0,$()}function $(){if(!T&&C&&n.availableMethods){for(var e in n.availableMethods)if(n.availableMethods.hasOwnProperty(e)&&!x[e])return;f=!1,n.mode=(L=[],N.forEach(function(e){n.hasMethod(e)&&L.push(e)}),L.length?L[0]:""),m(function(){for(var e=b[0].querySelectorAll(".bpa-add-primary-payment .bpa-hide-loading"),t=0,a=e.length;t<a;t++)e[t].classList.remove("bpa-hide-loading");q(n.mode)},300),m(function(){K(s.EVENT_IMPRESSION,{selected_upm:n.mode,available_upms:Object.keys(n.availableMethods)}),J()}),T=!0}}function U(e,t){n.hasPaypalError=e,O=t}function B(){return R.isState(w)&&n.isActive(v)&&n.creditCardInterface&&n.creditCardInterface.isLastPage()}function V(){switch(R.getState()){case w:switch(n.mode){case y:return n.isManualBankAccountShown()?"add_bank_manual":"add_bank_instant";case v:return B()?"add_address":"add_card";case k:return"add_paypal";case A:return"use_balance"}break;case _:return"add_address";case E:return"verify_upm";case S:return"subscription_step"}}function q(e){H(e),clearInterval(I),I=setInterval(function(){H(e)},300)}function H(e){if(C){var t=G(e);if(t&&0!==t.content.clientHeight){var n=t.content.clientHeight+"px";n!==t.container.style.height&&(t.container.style.height=n)}}}function G(e){if(!M[e]){var t=b[0].querySelector("#bpa-method-"+e+" .bpa-collapsed"),n=void 0;t&&(n=t.querySelector(".bpa-content"),M[e]={container:t,content:n})}return M[e]}function z(e,t,a){n.callbackObject&&n.callbackObject.success&&W(e,t,a,n.callbackObject.success)}function W(e,t,r,o){n.returnPaymentData?i.getMethodOfPaymentInfo(e,function(e){"object"===(void 0===e?"undefined":a(e))&&e&&e.type?o(e):Y()},function(){Y()}):o({mopRid:e,verified:t,type:r})}function Y(e){n.callbackObject&&n.callbackObject.error&&n.callbackObject.error(e)}function K(e,t,a){(t=t||{}).flow=n.flowName,s.logBpaEvent(e,"add_upm",t,a)}function J(){K(s.EVENT_IMPRESSION,{event_label:s.LABEL_START_SCREEN},V())}e.setProductChargeAmount(n.productChargeAmount),n.hasPaypalError=!1,n.paypalLoadingFailure=!1,n.mode=null,n.verificationMopRid=null,n.billingAddress={},n.config={},n.requirementsError=null,void 0===n.forcePrimary&&(n.forcePrimary=1),n.flowName||(n.flowName="BPA:undefined"),c.setFlowName(n.flowName),l.setFlowName(n.flowName),u.setFlowName(n.flowName),n.formLockSelector||(n.formLockSelector="#bpa-add-primary-payment"),n.ccFormLockSelector||(n.ccFormLockSelector="#bpa-cc-form-lock"),function(){n.interfaceObject||(n.interfaceObject={});n.interfaceObject.getSublocation=V,n.interfaceObject.isSubscriptionFormActive=function(){return R.isState(S)},n.interfaceObject.isAddPaymentFormActive=function(){return R.isState(w)},n.interfaceObject.isVerificationFormActive=function(){return R.isState(E)},n.interfaceObject.isBillingAddressFormActive=function(){return R.isState(_)},n.interfaceObject.isCcBillingAddressFormActive=B,n.interfaceObject.isModalHidden=function(){return e.isModalHidden()},n.interfaceObject.getPaymentData=function(e){var t=R.getContext();t.mopRid?W(t.mopRid,t.verified,n.mode,e):e(null)}}(),n.$on("$destroy",function(){return clearInterval(I)}),e.getAvailableDataPromise().then(function(e){n.availableMethods=angular.extend({},e.data),"object"===a(n.availableMethods.config)&&(angular.extend(n.config,n.availableMethods.config),delete n.availableMethods.config),$()},function(){f=!1,t.addFatalErrorMessage(r.get(g)),Y()}),h.promise.then(function(e){n.requirementsError=e,Y(n.requirementsError.code)}),n.templateLoaded=function(){C=!0,$()},n.cancelVerification=function(){n.verifyInterface&&n.verifyInterface.cancel(),z(n.verificationMopRid,!1,n.mode)},n.cancelBillingAddress=function(){n.addressInterface&&n.addressInterface.cancel(),z(R.getContext().mopRid,R.getContext().verified,n.mode)},n.cancelSubscription=function(){n.subscriptionInterface&&n.subscriptionInterface.cancel(),z(n.subscriptionInfo.id,!0,n.mode)},n.isSmallScreen=function(){return p.isSmallScreen()},n.isActive=function(e){return n.mode===e},n.isBlocked=function(){return!!f||[{state:_,iface:n.addressInterface},{state:E,iface:n.verifyInterface},{state:S,iface:n.subscriptionInterface},{state:w,iface:n.bankAccountInterface}].filter(function(e){return R.isState(e.state)&&e.iface&&e.iface.isBlocked&&e.iface.isBlocked()}).length>0},n.isManualBankAccountShown=function(){return D||P},n.hasPlaid=function(){return!P},n.addMethod=function(e){N.push(e),v!==e&&y!==e&&F(e)},n.hasMethod=function(e){return n.availableMethods&&void 0!==n.availableMethods[e]},n.useBalance=function(){z(null,!0,A)},n.ccCallbackObject={success:function(e){e?R.traverse(e):Y()},pageChanged:function(){n.isActive(v)&&m(function(){return q(v)},400),F(v)},error:function(e){e&&e.anotherBillingMethodSuggestion&&n.creditCardInterface.previousPage()}},n.getSubmitLabel=function(){return n.submitLabel?n.submitLabel:r.get("addUpmDefaultSubmitLabel")},n.plaidCallbackObject={blockForm:function(){f=!0},unblockForm:function(){f=!1},success:function(e){f=!1,e?(o.closeModal(),R.traverse(e)):Y()},error:function(){o.setFormBlocked(!1)},showManual:function(){D=!0},loadingFailure:function(){P=!0}},n.ppCallbackObject={init:function(){U(!1)},success:function(e,t){f=!1,R.traverse({id:t.id,verified:1,messages:e,mop_data:t})},authorize:function(){f=!0},error:function(e){f=!1,U(!0,e)},loadingFailure:function(){f=!1,n.paypalLoadingFailure=!0},cancel:function(){f=!1}},n.verifyCallbackObject={success:function(e){R.traverse(e)}},n.baCallbackObject={success:function(e){e?R.traverse(e):Y()},pageChanged:function(){n.isActive(y)&&m(function(){q(y)},400),F(y)},showPlaid:function(){D=!1}},n.subscriptionCallbackObject={success:function(){R.traverse({id:n.subscriptionInfo.id,primary:!0,verified:1})}},n.addressCallbackObject={success:function(e){R.traverse(e)}},n.$watch("mode",function(e,t){t&&e!==t&&(K(s.EVENT_CLICK,{event_label:"changeupm",from_upm:t,to_upm:e}),J(),G(t).container.style.height="0",q(e))}),n.paypalGetError=function(e){return O||e}}]}}])},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n(0),n(2),n(9),n(19),n(35),angular.module("bpa-ui.directives").directive("addPrimaryPaymentButton",["bpaUrl","bpa","bpaAddBillingMethod","bpaRequirementsNotMetHandler",function(e,t,n,r){return{scope:{callbacks:"=?",buttonClass:"@",buttonLabel:"@",productChargeAmount:"@",flowName:"@",updateBillingAddress:"<",popupSubmitLabel:"@"},templateUrl:e.baseUrl()+"add-primary-method/add-button",link:function(e){function i(e){s("close"),o()}function o(){e.isLoading=!0,t.getMethodOfPaymentInfo(null,function(t){"object"===(void 0===t?"undefined":a(t))&&t?t.type?(e.paymentData=t,s("success",t)):n.preFetchData():s("error"),e.isLoading=!1},function(t){e.isLoading=!1,e.isError=!0,s("error",t)})}function s(t,n){e.callbacks&&e.callbacks[t]&&e.callbacks[t](n)}n.setProductChargeAmount(e.productChargeAmount),e.isError=!1,e.requirementsError=null,r.promise.then(function(t){e.requirementsError=t,s("error",e.requirementsError.code)}),o(),e.click=function(){s("click"),n.show({flowName:e.flowName,forcePrimary:1,updateBillingAddress:e.updateBillingAddress,popupSubmitLabel:e.popupSubmitLabel}).then(i,i)},e.isVerificationInProgress=function(){return e.paymentData&&"in_progress"===e.paymentData.verification},e.isPrimaryPayment=function(){return!!e.paymentData},e.getAddButtonLabel=function(t){return e.buttonLabel||t},e.getAddButtonClass=function(t){return e.buttonClass||t},e.getPaymentIconClass=function(){if(e.paymentData)switch(e.paymentData.type){case"CC":return"bpa-cards-icon-img bpa-cards-icon bpa-primary-payment-icon bpa-cards-icon-"+function(e){switch(e){case"Visa":return"visa";case"MasterCard":return"mastercard";case"American Express":return"amex";case"Discover":return"discover"}return""}(e.paymentData.card_type);case"PAYPAL_DEPOSIT":return"bpa-primary-payment-icon bpa-payment-icon-paypal"}return""}}}}])},function(e,t,n){"use strict";n(0),n(2),n(21),n(45),n(30),angular.module("bpa-ui.directives").directive("bankAccountForm",["bpaUrl","eoModal","$timeout","$document","bpaIovation","bpaBankAccountEventLogger",function(e,t,n,a,r,i){return{restrict:"E",scope:{cancelUrl:"@",removeMopUrl:"@",recordId:"@",mopType:"@",isModern:"@",forcePrimary:"@",aeType:"@",modeUsUs:"@",enableBackButton:"<",pagedSubmitLabel:"@",callbackObject:"<"},require:"bpaBaseForm",templateUrl:function(t,n){var a=n.mopType&&"deposit"===n.mopType?"bank-account-form":"direct-deposit-form",r="1"===n.isModern?"modern-":"",i=n.recordId?e.formUrl("edit-"+a):e.formUrl(r+"add-"+a);return i&&"/"===i[0]&&(n.recordId&&(i+="/"+n.recordId),i+="?"+Date.now()),i},link:function(e,a,o,s){s.init(e,a,"ach").setSubmit(function(t){e.ach_form.$valid&&(e.bpaFormData.forcePrimary=e.forcePrimary,r.updateScope(e,function(){return s.sendFormData(e.bpaFormData,t)}))}),s.setEventLogger(i),"1"!==e.isModern&&i.setFlowName("BPA:"+e.aeType+":"+(e.modeUsUs?"us_us":"deposit"===e.mopType?"deposit_methods":"disbursement_methods")),e.commObject=s.getInterfaceObject(),e.commObject.isBlocked=function(){return s.isScreenLocked("form")},"deposit"!==e.mopType&&s.setRemoveAction(function(){t.custom({locals:{_injectedProperties:{}},keyboard:!1,controller:"yesNoModalController",templateUrl:"removalWarning.html"}).result.then(function(){e.removeMopUrl&&(document.location=e.removeMopUrl)},function(){})}),a[0].querySelector(".bpa-flash-messages")&&s.setNeedAttention(),e.revalidateRoutingNumber=function(){s.revalidateField("routingNumber")},e.backToPlaid=function(){!function(t,a,r){e.callbackObject[t]&&n(function(){return e.callbackObject[t](a,r)})}("showPlaid"),i.backToPlaid()};var c=e.callbackObject.error;e.callbackObject.error=function(){s.waitOnPendingValidators(1e4).finally(function(){var e=s.getCtrlByModelName("routingNumber");e&&e.$invalid&&e.$viewValue&&i.logAbaValidationError(e.$viewValue)}),c&&c()}},controller:["$scope",function(e){e.accountHint={class:"hint-check",text:"&nbsp;<br />&nbsp;",update:function(t){if("blur"===t.type)e.accountHint.class="hint-check",e.accountHint.text="&nbsp;<br />&nbsp;";else if("focus"===t.type){var n=angular.element(t.target);e.accountHint.text=n.attr("data-account-hint-text"),e.accountHint.class=n.attr("data-account-hint-class")}}},e.bankInfo={}}]}}])},function(e,t,n){"use strict";n(0),n(2),n(38),n(19),n(4),n(29),n(3),angular.module("bpa-ui.directives").directive("bankAccountPlaidForm",["bpaUrl","plaid","bpaAddBillingMethod","$timeout","bpaVars","bpaPlaidEventLogger","DEPOSIT_METHODS_URL_PART",function(e,t,n,a,r,i,o){return{restrict:"E",scope:{accountTypes:"<",forcePrimary:"@",processingFee:"<",bpaCommObject:"=?",callbackObject:"<"},templateUrl:e.resourceUrl(o+"/partials/bank-account-plaid.html"),link:function(e){var r=20,o=0,s=!1;function c(){t.isPlaidLoaded()?(t.setPlaidModalHidden(!0),t.getPlaidHandler().open()):(o===r?(o=0,s=!0):a(c,1e3),o++)}function l(t,n,r){e.callbackObject[t]&&a(function(){return e.callbackObject[t](n,r)})}e.initPlaid=function(){l("blockForm"),t.getModal({},{accountTypes:e.accountTypes,bpaCommObject:e.bpaCommObject,callbackObject:e.callbackObject,forcePrimary:e.forcePrimary}).opened.then(function(){i.logPlaidLoading(),a(function(){l("unblockForm"),n.setModalHidden(!0),a(function(){return c()},2e3),s&&t.closeModal()})}),i.logClickPlaid()},e.showManual=function(){l("showManual"),i.logClickManual(),i.logStartScreenManual()},e.isNetworkError=function(){return t.hasNetworkError()||s},e.isPlaidAccountsEmpty=function(){return t.isPlaidAccountsEmpty()},t.initPlaid(function(){e.loadingFailure=!0,i.logStartScreenManual(),l("loadingFailure")})}}}])},function(e,t,n){"use strict";n(0),n(2),n(21),n(38),n(29),n(12),angular.module("bpa-ui.directives").directive("bankAccountPlaidModalForm",["bpaUrl","bpaIovation","plaid","bpaPlaidEventLogger","bpaScreenSize",function(e,t,n,a,r){return{restrict:"E",scope:{accountTypes:"<",forcePrimary:"@"},require:"bpaBaseForm",templateUrl:function(){return e.baseUrl(!0)+"add-plaid-bank-account-form.html"},link:function(e,i,o,s){s.init(e,i,"plaidForm").setSubmit(d),s.setEventLogger(a);var c=!1,l=s.getInterfaceObject(),u=l.submit;function d(a){n.setFormBlocked(!0),e.setSubmitAttempt(!1);var r=n.getAccounts()[e.bpaFormData.bankAccount],i={routingNumberEncrypted:r.routingEncrypted,accountNumberEncrypted:r.accountEncrypted,accountType:r.subtype,ownerType:e.bpaFormData.combinedAccount[e.bpaFormData.bankAccount],beneficiaryName:e.bpaFormData.beneficiaryName,plaidAccountId:r.accountId,plaidAccessTokenEncrypted:n.getAccessTokenEncrypted(),primaryStatus:e.forcePrimary?"1":e.bpaFormData.primaryStatus?"1":"0"};t.setBlackBox(i,function(){s.sendFormData(i,a)})}l.submit=function(){a.setMakePrimary(e.forcePrimary?void 0:e.primaryStatusCheck),e.setSubmitAttempt(!0),u()},e.bpaFormData={combinedAccount:[],bankAccount:null},void 0!==e.primaryStatusCheck&&(e.bpaFormData.primaryStatus=e.primaryStatusCheck),e.$watch("bpaFormData.bankAccount",function(t,n){n!==t&&(e.setSubmitAttempt(!1),e.plaidForm.radioGroup.$setPristine())}),e.getBankAccountString=function(){return n.getBankAccounts()},e.isSmallScreen=function(){return r.isSmallScreen()},e.getAccounts=function(){return n.getAccounts()},e.isAccountsLoaded=function(){return n.getAccounts().length>0},e.isSubmitAttempt=function(){return c},e.setSubmitAttempt=function(e){return c=e}}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bankAccountTemporaryDeposits",[function(){return{restrict:"E",scope:{gotItUrl:"@"},templateUrl:"bpaBankAccountTemporaryDeposits.html"}}])},function(e,t,n){"use strict";n(0),n(2),n(5),angular.module("bpa-ui.directives").directive("billingAddressForm",["bpaUrl","eoCountriesService","bpaEventLog",function(e,t,n){return{restrict:"E",require:"bpaBaseForm",scope:{addressData:"=?",callbackObject:"=?",enableAddressLookup:"<",mopType:"<",flowName:"<"},templateUrl:e.resourceUrl("/resources/html/billing-address-form.partial.html"),link:function(a,r,i,o){var s=!1,c="add_upm",l="add_address";function u(e){return angular.extend({mop_type:a.mopType},e||{})}function d(e,t){n.logBpaEvent(e,c,u(t),l)}function p(){return s||o.isScreenLocked("form")}function m(e){if(o.isValid()){var t=angular.extend({},a.billingAddress);-1===["USA","CAN"].indexOf(t.country)&&delete t.state,o.sendFormData(t,e)}}!function(){o.init(a,r,"billingAddress"),o.setActionUrl(e.baseUrl(!1)+"billing-address"),o.setSubmit(m),o.setCheckSuccessResponse(function(e){return Boolean(e.status)}),o.setEventLogger((n.setFlowName(a.flowName),{submitClick:function(){d(n.EVENT_CLICK,{event_label:n.LABEL_SAVE})},submitSuccess:function(){d(n.EVENT_CLICK,{event_label:"success_billing_address_saved"})},submitProcessingFailure:function(e){n.logErrors(c,l,n.LABEL_ERROR_PROCESSING,e,u())},submitValidationFailure:function(e){n.logErrors(c,l,n.LABEL_ERROR_VALIDATION,e,u())}})),a.billingAddress={};var t=o.getInterfaceObject();t.isBlocked=p,t.cancel=function(){return d(n.EVENT_CLICK,{event_label:n.LABEL_CANCEL})}}(),a.$watch("addressData",function(e){if(!e||angular.equals({},e))return;a.billingAddress&&!angular.equals({},a.billingAddress)||(s=!0,t.get().then(function(t){var n=angular.extend({},e),r=t.filter(function(e){return e.Country===n.country||e.Code3===n.country});r.length&&(n.country=r[0].Code3,n.state="USA"===n.country?{stateUsa:n.state}:"CAN"===n.country?{stateCanada:n.state}:{},a.billingAddress=n)}).finally(function(){s=!1,d(n.EVENT_IMPRESSION)}))})}}}])},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n(0),n(2),angular.module("bpa-ui.directives").directive("billingAddress",["bpaUrl",function(e){return{restrict:"E",scope:{model:"=ngModel",onCountryChange:"&",showPhone:"@",enableAddressLookup:"<"},require:{ngModel:"ngModel",bpaBaseForm:"?^^bpaBaseForm",bpaFormPage:"?^^bpaFormPage"},templateUrl:e.resourceUrl(["/resources/html/billing-address.partial.html","billing-address.partial.html"]),link:function(e,t,n,r){var i="billing_address",o={street:"",street2:"",city:"",state:{stateUsa:"",stateCanada:""},zip:""};function s(t){void 0===t?angular.merge(e.model,o):angular.merge(e.model,o,{street:t.street,zip:t.zip,city:t.city,state:{stateUsa:t.state}});var n=e[i][i+"[street2]"];n.element&&n.element.val(e.model.street2)}function c(t){angular.forEach(e[i],function(e,n){"$"!==n[0]&&"object"===(void 0===e?"undefined":a(e))&&e.$name&&t(e)})}e.model?e.model.state instanceof Array&&(e.model.state={}):e.model=angular.extend({},o,{country:"",phone:""}),e.gmapi={noStreetNumberError:!1,notFoundError:!1,isActive:function(){return e.enableAddressLookup&&e.isCountry("USA")},errorNoStreetNumber:function(){this.noStreetNumberError=!0},errorNotFound:function(){this.notFoundError=!0},fillAddress:function(e){s(e),this.clearGmapiErrors()},clearGmapiErrors:function(){angular.extend(this,{noStreetNumberError:!1,notFoundError:!1})}},e.$watch("gmapi.fullAddress",function(t){t||e.gmapi.clearGmapiErrors()}),e.isEditingDisabled=function(){return e.gmapi.isActive()&&!e.gmapi.fullAddress},!r.ngModel.$options.updateOnDefault&&r.ngModel.$options.updateOn&&(r.ngModel.element=t,c(function(e){e.element=angular.element(t[0].querySelector('[name="'+e.$name+'"]'))}),t.on(r.ngModel.$options.updateOn,function(e){c(function(t){t.element.triggerHandler(e.type),r.bpaBaseForm&&r.bpaBaseForm.setViewValueToElement(t),t.$setDirty(),t.$validate()})})),r.bpaBaseForm&&r.bpaBaseForm.addController(n.ngModel,n,r.ngModel),r.bpaFormPage&&r.bpaFormPage.addController(r.ngModel),e.isCountryWithStates=function(){return!!e.model.country&&-1<["USA","CAN"].indexOf(e.model.country)},e.isCountry=function(t){return!!e.model.country&&e.model.country===t},e.getNgModel=function(t){return e[i][t]},e.isPhoneShown=function(){return"1"===e.showPhone||"true"===e.showPhone},e.countryChange=function(){s(),e.gmapi.fullAddress="";var t=e[i][i+"[zip]"];t.$invalid&&(t.$setDirty(),t.$validate()),"function"==typeof e.onCountryChange&&e.onCountryChange()}}}}])},function(e,t,n){"use strict";n(0),n(69),angular.module("bpa-ui.directives").directive("bpaAbaValidate",["$q","bpaGetBankInfo","$parse",function(e,t,n){return{restrict:"A",require:"ngModel",link:function(a,r,i,o){var s=n(i.bankInfoModel),c=void 0;function l(){c&&0===c.promise.$$state.status||(c=e.defer())}o.$asyncValidators.bpaAbaValidate=function(n){return e(function(e,r){l(),t.get(n).then(function(t){s.assign(a,t),e(),c.resolve()},function(t){404===t.code?(r(),c.resolve(),s.assign(a,{})):(e(),c.reject(),s.assign(a,null))})})},o.$asyncValidators.bpaAbaValidationError=function(){return l(),c.promise}}}}])},function(e,t,n){"use strict";n(0),n(6),n(2),n(12),angular.module("bpa-ui.directives").directive("bpaAlertMessages",["bpaAlert","bpaUrl","bpaScreenSize",function(e,t,n){return{scope:{messagesFromJson:"=",currentAe:"<",fatalErrorMessage:"@",resetMargins:"<"},templateUrl:t.resourceUrl("/resource/alert-messages.html"),link:function(t){e.setFatalErrorMessage(t.fatalErrorMessage),e.addAlertMessages(t.messagesFromJson),t.getAlertMessages=function(){return e.getAlertMessages(t.currentAe)},t.isSmallScreen=function(){return n.isSmallScreen()},t.closeAlert=function(t){return e.closeAlertMessage(t)}}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaAmountInput",["$parse",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,a,r){var i=/^[0-9]+[.,][0-9]{2}$/,o=.01,s=void 0,c=void 0;function l(e){return e||0===e?parseFloat(e):NaN}function u(e){return angular.isUndefined(e)||""===e}r.$validators.bpaMin=function(e){if(u(r.$viewValue))return!0;e=l(e);var n=function(){if(!angular.isUndefined(s))return l(s(t));return o}();return!isNaN(e)&&!isNaN(n)&&e>=n},r.$parsers.push(function(e){return e&&e.replace?e.replace(",","."):e}),r.$parsers.push(function(e){return r.$setValidity("bpaPattern",u(r.$viewValue)||i.test(r.$viewValue)),e}),angular.isUndefined(a.bpaAmountMin)||(s=e(a.bpaAmountMin)),angular.isUndefined(a.bpaAmountMax)||(c=e(a.bpaAmountMax),r.$validators.bpaMax=function(e){if(u(r.$viewValue))return!0;e=l(e);var n=l(c(t));return!isNaN(e)&&!isNaN(n)&&e<=n})}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaAsyncIndicator",["$compile",function(e){var t=0;return{restrict:"A",link:function(n,a,r){if(!a.hasClass("bpa-has-async-indicator")){var i="isBpaAsyncPerformed"+ ++t;n[i]=!1;var o=angular.element('<div data-ng-show="'+i+'" class="bpa-indicator-anchor no-hide-animation"><span class="glyphicon air-icon-loading bpa-indicator-icon" aria-hidden="true"></span></div>');a.after(o),a.addClass("bpa-has-async-indicator"),e(o)(n),n.$watch(r.bpaAsyncIndicator,function(e){n[i]=!!e})}}}}])},function(e,t,n){"use strict";n(0),n(2),n(68),n(46),n(49),n(36),n(70),angular.module("bpa-ui.directives").directive("bpaBaseForm",["bpaUrl","bpaFormMode","bpaBlockMode","bpaNetworkErrors","bpaValidationErrors","bpaGtmEvents","bpaOauth2Http","$parse","$document","$window","$timeout","$interval","$q",function(e,t,n,a,r,i,o,s,c,l,u,d,p){return{require:["bpaBaseForm","?^^bpaBaseForm"],restrict:"A",link:function(e,t,n,a){var r=a[0],i=a[1];n.bpaCommObject&&(0,s(n.bpaCommObject).assign)(e,r.getInterfaceObject());if(n.callbackObject){var o=s(n.callbackObject);r.setCallbackObject(o(e))}if(n.isActive){var c=s(n.isActive);r.setIsActiveGetter(c)}if(n.pagedMode&&r.setPagedMode(!0),n.hideControls){var l=s(n.hideControls);r.setControlsHidden(l(e))}if(n.validateOnSubmit){var u=s(n.validateOnSubmit);r.setValidateOnSubmitGetter(u)}if(n.standardErrorMessage&&r.setStandardErrorMessage(n.standardErrorMessage),n.showErrorNotification){var d=s(n.showErrorNotification);r.setShowErrorNotification(d(e))}if(n.lockOnSubmit){var p=s(n.lockOnSubmit);r.setLockOnSubmit(p(e)||n.lockOnSubmit)}if(n.preventLeaveOnSubmit){var m=s(n.preventLeaveOnSubmit);r.setPreventLeaveOnSubmit(m(e))}n.enableFlashMessages&&(s(n.enableFlashMessages)(e)&&r.enableFlashMessages());i&&(r.setParentForm(i),i.addChildForm(r)),r.triggerFormLinked()},controller:["$scope",function(e){var s={},m={},f={},b={},g=[],h={},v=[],y=!0,k=!0,A=!0,w=!1,_=!1,E=void 0,S=void 0,C=void 0,T="",I="",O="",P=void 0,M=void 0,x=void 0,N=void 0,L=void 0,D=0,R=0,j=!1,F=void 0,$=!1,U=this,B={},V=[],q=!1,H=0,G={},z=!1,W="Client-side validation error";function Y(e,t){t.isControlsHidden=e}function K(e){var t=!0;if(null!==e)for(var n=0,a=e.controls.length;n<a;n++)z&&U.setViewValueToElement(e.controls[n]),U.validateCtrl(e.controls[n]),e.controls[n].$invalid&&(t=!1);return t}function J(e){return e.isActiveGetter&&e.isActiveGetter(P)}function Z(e){return function(t){return!!P&&P[e](t)}}function X(){var e=function e(t){return t?t.offsetTop+e(t.offsetParent):0}(S[0]);l.scroll(0,e)}function Q(e,t){if(B[e]){var n=n||{},a=B[e];angular.isString(a)&&(a={eventAction:a});var r=angular.extend({},a,n);switch(e){case"success":i.postSuccessEvent(r);break;case"failure":i.postFailureEvent(r);break;case"cancel":i.postCancelEvent(r)}}}function ee(e){Q("failure")}function te(e,t,n){ee(),ie(t||n!==W?"submitProcessingFailure":"submitValidationFailure",!0),e&&e.error&&e.error(t)}function ne(e,t){ee(),e&&e.networkError&&e.networkError(t.code,t.data)}function ae(e,t){Q("success"),ie("submitSuccess"),e&&e.success&&e.success(t)}function re(e){for(var t in e.$error)e.$setValidity(t,!0)}function ie(e,t){G&&G[e]&&(t?u(function(){return U.waitOnPendingValidators(1e4).finally(function(){return G[e](function(){var e=[];for(var t in P.bpaFormErrors)e.push(P.bpaFormErrors[t]);return e.concat(r.extract(C))}())})},100):G[e]())}this.setGtmEvents=function(e){return B=e,U},this.templateIsOk=function(e){var t=a.getErrorForUrl(e);return!t||(x?ne(x,t):F=t,!1)},this.init=function(e,t,n){return e.getCtrlByModelName=U.getCtrlByModelName,e.getCtrlByInputName=U.getCtrlByInputName,e.isErrorNotification=U.isErrorNotification,e.getFormName=U.getFormName,e.hasError=U.hasError,S=t,(C=function(e){for(var t=["div.ng-form","div[ng-form]","form"],n=void 0,a=0,r=t.length;a<r;a++)if(n=e[0].querySelector(t[a]))return n;return null}(t))&&(T=C.getAttribute("data-name"),M=e[T]),I=n,P=e,function(e){e.bpaFormErrors={},e.bpaFormData={},e.isScreenLocked=U.isScreenLocked,e.isLeavePrevented=U.isLeavePrevented,e.isPagedMode=U.isPagedMode,e.bpaFormCtrl=M,void 0!==U.isControlsHidden&&Y(U.isControlsHidden,e)}(e),U},this.getFormName=function(){return I},this.triggerFormLinked=function(){x&&x.formLinked&&x.formLinked(this)},this.setParentForm=function(e){return E=e,U},this.setStandardErrorMessage=function(e){return L=e,U},this.setCallbackObject=function(e){return x=e,F&&ne(x,F),U},this.setStubMode=function(e){return $=e,U},this.setForceValueToModelAllFields=function(e){return z=e,U},this.setSubmit=function(t){if(!P)throw"init must be called first";return P.submitForm=function(n){if(n=n||x,U.isStubMode())ae(n);else{if(function(){if(!U.validateOnSubmitGetter)return void U.validateAllFields();U.validateOnSubmitGetter(e)&&U.validateAllFields()}(),!U.isValid())return te(n,null,W),void U.showErrorNotification();n&&n.beforeSubmit?n.beforeSubmit(function(){t(n)}):t(n)}},U},this.setRemoveAction=function(e){if(!P)throw"init must be called first";return P.removeAction=function(t){e(t=t||x)},U},this.setViewValueToElement=function(e){var t=e.element&&e.element.length>0?e.element[0]:null;t&&null!==t.offsetParent&&void 0!==t.value&&(e.$setViewValue(t.value),angular.element(t).triggerHandler("updateEvent"))},this.showErrorNotification=function(){U.isErrorNotificationAllowed&&X(),w=!0},this.setIsValid=function(e){return U.customIsValidFunction=e,U},this.setCheckSuccessResponse=function(e){return U.customCheckSuccessResponse=e,U},this.setIsAboutToRedirect=function(e){return U.customIsAboutToRedirect=e,U},this.setValidateOnSubmitGetter=function(e){U.validateOnSubmitGetter=e},this.setControlsHidden=function(e){U.isControlsHidden=e,P&&Y(e,P)},this.setShowErrorNotification=function(e){U.isErrorNotificationAllowed=e},this.setLockOnSubmit=function(e){U.lockOnSubmit=e},this.setPreventLeaveOnSubmit=function(e){U.preventLeaveOnSubmit=e},this.addController=function(e,t,n){s[e]=n,m[t.name]=n,function(e,t,n){if(!t.validationGroup)return;var a=h[t.validationGroup]||[];a[e]=n,h[t.validationGroup]=a,n.$parsers.push(function(n){return a=h[t.validationGroup],u(function(){for(var t in a)if(e!==t){var n=a[t];n.validationLock||n.$viewValue&&(n.validationLock=!0,U.validateCtrl(n),n.validationLock=!1)}}),n})}(e,t,n)},this.setPagedMode=function(e){(q=!!e)&&V.length&&V[0]&&(H=0,this.setPageVisible(V[0].id))},this.isFirstPage=function(){return 0===H},this.isLastPage=function(){return H===V.length-1},this.isPagedMode=function(){return q},this.addFormPage=function(e,t){V.push({id:e,controller:t,controls:[],visible:!0})},this.getPageById=function(e){for(var t=0,n=V.length;t<n;t++)if(V[t].id===e)return V[t];return null},this.isPageVisible=function(e){var t=this.getPageById(e);return null!==t&&t.visible},this.getFormPages=function(){return V.map(function(e){return e.id})},this.setPageVisible=function(e){for(var t=null,n=0,a=V.length;n<a;n++)V[n].visible="all"===e||V[n].id===e,null===t&&V[n].visible&&(t=n);null!==t&&V[t].controls.length&&V[t].controls[0].element&&u(function(){V[t].controls[0].element[0].focus()}),x&&x.pageChanged&&x.pageChanged("all"===e?V.length:t)},this.nextPage=function(){U.isLastPage()||(ie("nextPageClick"),K(V[H])&&("function"!=typeof V[H].pageValidator||V[H].pageValidator())?(U.setPageVisible(V[++H].id),ie("nextPageSuccess")):ie("nextPageFailure",!0))},this.previousPage=function(){U.isFirstPage()||(U.setPageVisible(V[--H].id),ie("previousPage"))},this.addControllerToPage=function(e,t){var n=this.getPageById(e);null!==n&&n.controls.push(t)},this.setPageValidator=function(e,t){var n=this.getPageById(e);return n&&(n.pageValidator=t),U},this.validateFormPageById=function(e){var t=this.getPage(e);return null!==t&&K(t)},this.getCtrlByModelName=function(e){return s[e]},this.getCtrlByInputName=function(e){return m[e]},this.setPostNameMap=function(e,t){f[e]=t},this.addSensitiveField=function(e,t){g.push({model:e,element:t})},this.addChildForm=function(e){v.push(e),this.addActiveFormCallback&&J(e)&&this.addActiveFormCallback(e)},this.getActiveChildForm=function(){for(var e=void 0,t=0,n=v.length;t<n;t++)if(J(e=v[t]))return e},this.setIsActiveGetter=function(e){U.isActiveGetter=e},this.getInterfaceObject=function(){return N||(N={submit:Z("submitForm"),remove:Z("removeAction"),isSubmitAllowed:U.isCanSubmit,isValid:U.isValid,isAboutToRedirect:U.isAboutToRedirect,validate:U.validateAllFields,formIsCancelled:U.postCancelFormEvent,isPagedMode:U.isPagedMode,nextPage:U.nextPage,previousPage:U.previousPage,isFirstPage:U.isFirstPage,isLastPage:U.isLastPage})},this.isCanSubmit=function(e){return(!e||U.isValid())&&y},this.isErrorNotification=function(){return U.isErrorNotificationAllowed&&w},this.isValid=function(){return!!U.isStubMode()||(U.customIsValidFunction?U.customIsValidFunction():M.$valid&&!M.$pristine)},this.isStubMode=function(){var e=P.isSubmited&&!P.allowDoubleSubmit;return $||e||t.isStub},this.isAboutToRedirect=function(){return!!U.customIsAboutToRedirect&&U.customIsAboutToRedirect()},this.setNeedAttention=function(e){e=e||I,U.formNeedAttention=e,U.needAttentionCallback&&U.needAttentionCallback(e),E&&E.setNeedAttention(e)},this.setNeedAttentionCallback=function(e){return U.formNeedAttention&&e(U.formNeedAttention),U.needAttentionCallback=e,U},this.isScreenLocked=function(e){return!("page"===e&&!R)&&(("form"!==e||!R)&&!k)},this.isLeavePrevented=function(){return!1!==U.preventLeaveOnSubmit&&!A},this.setSubmitLock=function(e,t,a){t&n.lockScreen&&"none"===a&&(t&=~n.lockScreen);var r={mode:t=t||n.lockSubmit};t&n.lockScreen&&(k=!1,r.param=function(e){e=R?"page":e||"page";if("page"===e){var t=c.find("body");t.hasClass("eo-block-all")||R||(j=!0,t.addClass("eo-block-all")),R++}return e}(a)),t&n.preventLeave&&(A=!1),y=!1,b[e]=r},this.releaseSubmitLock=function(e){var t=0,a=b[e];if(a){for(var r in a.mode&n.lockScreen&&"page"===a.param&&R--,j&&0===R&&c.find("body").removeClass("eo-block-all"),delete b[e],b)t|=b[r].mode;y=0===t,k=!(t&n.lockScreen),A=!(t&n.preventLeave)}},this.areErrorsVisible=function(){for(var e in s){var t=s[e];if(t.$dirty&&t.$invalid)return!0}return!1},this.validateAllFields=function(){for(var e in s)z&&U.setViewValueToElement(s[e]),U.validateCtrl(s[e])},this.revalidateField=function(e){var t=U.getCtrlByModelName(e);t&&U.validateCtrl(t)},this.validateCtrl=function(e){if(e.element&&e.element.triggerHandler("updateEvent"),!e.$valid||!Object.keys(e.$asyncValidators).length||void 0===e.$modelValue){e.$setDirty(),e.$validate();var t=e.bpaInputGroup;t&&(e.$invalid?t.setStatus(!1,!0):t.hasParent()||t.setStatus(!0,!1))}},this.setActionUrl=function(e){O=e},this.enableFlashMessages=function(){_=!0},this.sendFormData=function(e,t){if(!O)throw"actionUrl must be set first";ie("submitClick"),e=e||P.bpaFormData,t=t||x;var a=function(e){var t={},n={},a=void 0,r=void 0;for(var i in e)if(e.hasOwnProperty(i)&&null!==(a=f[i])&&(r=e[i]))if(-1!==(a=a||i).indexOf(":")){var o=a.split(":");void 0===t[o[0]]&&(t[o[0]]={}),t[o[0]][o[1]]=r}else t[a]=r;return n[T]=t,n}(e);U.clearFormErrors(),U.setSubmitLock("sendFormData",n.preventLeave|n.lockScreen,U.getSubmitLockMode()),_&&(a.flashMessagesEnabled=!0),o.post(O,a,{doNotRetry:!0}).success(function(e){if(U.releaseSubmitLock("sendFormData"),e)return e.redirect?(te(null,e,"Server-side redirection"),void(l.location=e.redirect)):void(!function(e){var t=e.errors&&e.errors.length?e.errors:!e.status&&e.messages&&e.messages.length?e.messages:null;if(!t)return!1;for(var n=0,a=t.length;n<a;n++)U.addFormError(t[n]);return X(),!0}(e)?U.checkSuccessResponse(e)?(P.isSubmited=!0,U.setSubmitLock("success"),function(){for(var e=void 0,t=0,n=g.length;t<n;t++)(e=g[t]).model.$setViewValue(""),re(e.model)}(),ae(t,e)):U.addStandardError(t,e):te(t,e,"Server-side validation or saving error"));U.addStandardError(t,e)}).error(function(e){U.releaseSubmitLock("sendFormData"),U.addStandardError(t,e)})},this.postCancelFormEvent=function(){return Q("cancel"),!0},this.addStandardError=function(e,t){U.clearFormErrors(),U.addFormError(L||"We are sorry! We are experiencing a technical problem and cannot process your request right now. Please try again in a minute."),X(),te(e,t,"Request error or response is invalid")},this.hasError=function(){return Object.keys(P.bpaFormErrors).length>0||U.isErrorNotification()},this.getSubmitLockMode=function(){return U.lockOnSubmit||"page"},this.getFormNode=function(){return C},this.checkSuccessResponse=function(e){return U.customCheckSuccessResponse?U.customCheckSuccessResponse(e):!!e.id},this.addFormError=function(e,t){t=t||++D,P.bpaFormErrors[t]=e},this.clearFormErrors=function(){w=!1,P.bpaFormErrors={}},this.setEventLogger=function(e){G=e,P.flowName&&G.setFlowName&&G.setFlowName(P.flowName)},this.waitOnPendingValidators=function(e){var t=p.defer(),n=function(){return M.$pending?Object.keys(M.$pending).length:0};if(0===n())t.resolve();else{var a=d(function(){var e=n();t.notify(e),0===e&&(d.cancel(a),t.resolve())},100);e&&e>0&&u(function(){d.cancel(a),t.reject()},e)}return t.promise}}]}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaBindCompile",["$compile","$parse","$sanitize",function(e,t,n){return{restrict:"A",link:function(a,r,i){var o=t(i.bpaBindCompile);a.$watch(function(){return o(a)},function(t){r.html(t&&n(t.toString())),e(r.contents())(a)})}}}])},function(e,t,n){"use strict";n(0),n(24),angular.module("bpa-ui.directives").directive("bpaCardNumberFormat",["CreditCards","$document","$timeout",function(e,t,n){return{restrict:"A",require:"ngModel",link:function(a,r,i,o){var s="data-bpa-card-format-id",c="";function l(){for(var t=e.getAvailableCreditCards(),n=0,a=t.length;n<a;n++)m("bpa-cards-icon bpa-cards-icon-"+t[n]+" bpa-card-icon-list");m("bpa-card-lock-icon")}function u(e,t){this.getStart=function(){return e},this.getEnd=function(){return t}}function d(e,t,n){return p(t,n)-p(e,n)}function p(e,t){var n=0,a=-1;do{a=e.indexOf(" ",a+1)}while(-1!==a&&a<t&&++n);return n}function m(e,t){var n=r[0],a=document.createElement("span"),i=n.parentNode;return f(a,e),i.insertBefore(a,t?n:n.nextSibling),a}function f(e,t){e.setAttribute("class","bpa-cards-icon-img "+t)}r.attr(s)||(!function(e){var a=e.attr(s);if(void 0===a){n(l),a=function(){for(var e=t[0].querySelectorAll("input["+s+"]"),n=0,a=0,r=e.length;a<r;a++)n=Math.max(1*e[a].getAttribute(s),n);return e.length?n+1:n}();var r={maxlength:"23",type:"tel",inputmode:"numeric",autocomplete:"cc-number",autocompletetype:"cc-number","x-autocompletetype":"cc-number"};r[s]=a,e.attr(r),e.addClass("bpa-card-icon")}e.cardIconNode=function(e){var n="bpa-cards-icon-"+e,a=t[0].getElementById(n);a||(a=m("bpa-cards-icon",!0)).setAttribute("id",n);return a}(a)}(r),o.$parsers.push(function(t){var n=function(e){return e.replace(/\D*/g,"")}(t);return function(t){var n=e.updateNumber(t),a=n?"bpa-cards-icon-"+n.type:"";f(r.cardIconNode,"bpa-cards-icon  "+a)}(n),function(e,t,n){var a=new u(r[0].selectionStart,r[0].selectionEnd),i=function(e){for(var t,n=e.substr(0,4),a=4;a<e.length;a+=4)(t=e.substr(a,4)).length&&(n+=" "+t);return n}(t);n.length<t.length&&(a=function(e,t,n){return new u(n.getEnd()+d(e,t,n.getEnd()),n.getStart()+d(e,t,n.getStart()))}(e,i,a));r.val(i),r[0].setSelectionRange(a.getStart(),a.getEnd())}(t,n,c),c=n,n}))}}}])},function(e,t,n){"use strict";n(0),n(24),angular.module("bpa-ui.directives").directive("bpaCardNumber",["CreditCards",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,a,r){var i=null;n.on("updateEvent",function(){var t=(r.$viewValue||"").replace(/\D/g,""),n=e.updateNumber(t);i=function(e,t){if(!e)return"required";if(e=(e+"").replace(/\D/g,""),!/^\d+$/.test(e))return"bpaCcType";if(!t)return"bpaCcType";if(-1===t.length.indexOf(e.length))return"bpaCcNumber";if(!1!==t.luhn&&!function(e){var t,n,a,r=!0,i=0,o=(e+"").split("").reverse();for(n=0,a=o.length;n<a;n++)t=o[n],t=parseInt(t,10),(r=!r)&&(t*=2),t>9&&(t-=9),i+=t;return i%10==0}(e))return"bpaCcFormat";return null}(t,n),r.$setDirty(),r.$validate()}),r.$validators.required=function(){return"required"!==i},r.$validators.bpaCcType=function(){return"bpaCcType"!==i},r.$validators.bpaCcNumber=function(){return"bpaCcNumber"!==i},r.$validators.bpaCcFormat=function(){return"bpaCcFormat"!==i}}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaCardPhone",[function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,a){a.$validators.phoneFormat=function(e){return!e||!!/^[0-9()\-.\s]+$/.test(e)&&10===e.replace(/\D/g,"").length}}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaCheckVatFormat",[function(){return{restrict:"A",require:["ngModel","^^bpaVatGroup"],link:function(e,t,n,a){var r=a[0],i=a[1],o=new RegExp(n.vatPattern.replace(/^\/(.*)\/$/,"$1")),s=/[^0-9]/g,c=parseInt(n.minDigitsCount),l=!1;e.inputController=r,isNaN(c)||(r.$validators.vatDigits=function(){return!r.$viewValue||c<=r.$viewValue.replace(s,"").length}),r.$validators.vatFormat=function(){return l=r.$viewValue&&o.test(r.$viewValue),!i.isStrict()||l},e.$watch(n.ngModel,function(){i.setCorrectness(r.$valid&&l)})}}}])},function(e,t,n){"use strict";n(0),n(24),angular.module("bpa-ui.directives").directive("bpaCvc",["CreditCards",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,a,r){var i={bpaCvc34:[3,4],bpaCvc4:[4],bpaCvc3:[3],bpaCvc:[]};function o(t){var n=e.getCvvLength(),a=i[t];if(!n||a.length!==n.length)return!1;for(var r=0,o=a.length;r<o;r++)if(-1===n.indexOf(a[r]))return!1;return!0}angular.forEach(i,function(t,n){r.$validators[n]=function(t){return function(t,n){if(!t)return!0;var a=!/\D/.test(t),r=e.getCvvLength(),s=r&&-1!==r.indexOf(t.length);if(o(n))return a&&s;if(!function(){for(var e in i)if(o(e))return!0;return!1}())return a&&(s||t.length>=3);return!0}(t,n)}})}}}])},function(e,t,n){"use strict";n(0),n(22),n(34),angular.module("bpa-ui.directives").directive("bpaDepositMethodsAction",["bpaDepositMethods","bpaHashAction",function(e,t){return{restrict:"C",scope:{href:"@"},link:function(n,a){var r=decodeURI(n.href).split("#",2);if(2===r.length){var i=t.getAction(r[1]);i.action===t.ACTION_VERIFY_PAYMENT_METHOD&&a.on("click",function(t){t.preventDefault(),t.stopPropagation(),e.verifyMop(i.mopRid)})}}}}])},function(e,t,n){"use strict";n(0);angular.module("bpa-ui.directives").directive("bpaExtValidator",["$parse",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,a,r){var i=e(a.bpaExtValidator);r.hasBpaExtValidator||(t.$watch(function(){return i(t)},function(e){angular.isUndefined(e)||r.$setValidity("bpaExtValidator",e)}),r.$parsers.push(function(e){return r.$setValidity("bpaExtValidator",!0),i.assign(t,!0),e}),r.hasBpaExtValidator=!0)}}}])},function(e,t,n){"use strict";n(0),n(20),angular.module("bpa-ui.directives").directive("bpaExternalScriptsGroup",["ExternalScripts","$timeout",function(e,t){return{restrict:"E",require:"bpaExternalScriptsGroup",link:function(e,t,n,a){a.setName(n.name)},controller:["$scope",function(n){var a,r=0,i=!1,o=this,s=null;function c(){s&&t.cancel(s)}this.setName=function(e){a=e},this.registerScript=function(){r++,c(),s=t(o.setError,3e4)},this.setScriptReady=function(){--r||(c(),e.setReady(a))},this.setError=function(){!i&&r&&(i=!0,e.setError(a))}}]}}]).directive("bpaExternalScript",["ExternalScripts",function(e){return{restrict:"E",require:"?^^bpaExternalScriptsGroup",link:function(t,n,a,r){if(!a.src)throw'"src" is mandatory attribute for bpaExternalScript';r&&r.registerScript(),e.download(a.src,{onload:function(){r&&r.setScriptReady()},onerror:function(){r&&r.setError()}})}}}])},function(e,t,n){"use strict";n(0),n(67),angular.module("bpa-ui.directives").directive("bpaFlashMessages",["bpaFlashMessage","bpaUrl",function(e,t){return{scope:{currentAe:"<",specificClass:"@",specialMessages:"<"},templateUrl:t.resourceUrl("/resource/flash-messages.html"),link:function(t){t.getSpecificClass=function(){return t.specificClass||""},e.setSpecialMessages(t.specialMessages),e.fetchMessages(t.currentAe),t.getMessages=function(){return e.getMessages(t.currentAe)}}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaFormActionUrl",[function(){return{restrict:"A",require:"^bpaBaseForm",link:function(e,t,n,a){a.setActionUrl(n.bpaFormActionUrl)}}}])},function(e,t,n){"use strict";n(0),n(2),angular.module("bpa-ui.directives").directive("bpaFormControls",["bpaUrl",function(e){return{restrict:"E",templateUrl:e.resourceUrl(["/resources/html/form-controls.partial.html","form-controls.partial.html"]),require:"^^bpaBaseForm",scope:{submitLabel:"@",cancelUrl:"@",showRemoveButton:"@"},link:function(e,t,n,a){e.commObject=a.getInterfaceObject()}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaFormPage",[function(){return{restrict:"E",transclude:!0,scope:{pageId:"=",validator:"&?"},require:["^^bpaBaseForm","bpaFormPage"],compile:function(){return{pre:function(e,t,n,a){var r=a[0],i=a[1];if(!r)throw new Error("bpa-form-page should be used only inside bpa-base-form");i.init(e.pageId,r),r.addFormPage(e.pageId,i),"function"==typeof e.validator&&r.setPageValidator(e.pageId,e.validator),e.isPageVisible=function(){return i.isVisible()}}}},controller:[function(){var e,t;this.init=function(n,a){e=n,t=a},this.getPageId=function(){return e},this.isVisible=function(){return t.isPageVisible(e)},this.isValid=function(){return t.validateFormPageById(e)},this.addController=function(n){t.addControllerToPage(e,n)}}],template:'<div data-ng-transclude data-ng-show="isPageVisible()" ng-class="isPageVisible() ? \'bpa-growable\' : \'\'" class="bpa-form-page"></div>'}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaHaveLetter",[function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,a){a.$validators.bpaHaveLetter=function(e){if(!e)return!0;return/[^0-9 -.,]/.test(e)}}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaHelpPopover",["bpaRouting",function(e){return{restrict:"E",scope:{contents:"@"},template:function(e,t){return t.contents?'<a class="bpa-help-popover" eo-popover="{{ getContentsUrl() }}"\n                        eo-popover-trigger="mouseenter" eo-popover-size="lg" eo-popover-placement="bottom"\n                        eo-popover-append-to-body="true">'+e.html()+"</a>":e.html()},link:function(t){t.getContentsUrl=function(){return e.get(t.contents)}}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaIncludeReplace",["$timeout",function(e){return{restrict:"A",require:"ngInclude",link:function(t,n){var a=n[0];t.$on("$includeContentLoaded",function(t){t.stopPropagation(),e(function(){a.childNodes.forEach(function(e){a.parentNode&&a.parentNode.appendChild(e)}),e(function(){return a.remove()})})})}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaInputGroup",[function(){return{restrict:"A",require:["bpaInputGroup","?^^bpaInputGroup"],controller:[function(){var e,t,n,a=[],r=this;this.addController=function(t){t.bpaInputGroup=r,a.push(t),e&&e()},this.setAddControllersCallback=function(t){e=t,a.length&&e()},this.getControllers=function(){return a},this.setElementAndParent=function(e,a){t=e,n=a},this.hasParent=function(){return!!n},this.setStatus=function(e,a){n?n.setStatus(e,a):(t.toggleClass("has-success",e),t.toggleClass("has-error",a))}}],link:function(e,t,n,a){var r,i,o,s,c,l=a[0],u=[],d=0;function p(){var e=r[d];return e.$dirty&&(o=!0),s=s&&e.$valid&&!!e.$modelValue,c=c||e.$invalid,d++,e.$modelValue||e.$viewValue+"_"}l.setElementAndParent(t,a[1]),l.setAddControllersCallback(function(){var t=(r=l.getControllers()).length,n=u.length;for(t&&!n&&(u.push(function(){return d=0,o=!1,s=!0,c=!1,p()}),n++);n<t;n++)u.push(p);i&&i(),i=e.$watchGroup(u,function(){o&&l.setStatus(s,c)})})}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaLocation",["eoUtils",function(e){return{restrict:"E",template:"<div ng-bind-html='formatLocation()'></div>",scope:{location:"=?"},link:function(t){t.formatLocation=function(){if(!angular.isObject(t.location))return"";var n=[];return["street","street2","city","zip","country"].forEach(function(a){t.location[a]&&n.push(e.escapeText("city"===a?t.location.city+(t.location.state?", "+t.location.state:""):t.location[a]))}),n.join("<br />")}}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaMaxlengthLink",[function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,a){if(a){var r,i=+n.maxlength,o=!1,s=a.$$parentForm.$name+"["+n.bpaMaxlengthLink+"]";a.$validators.maxlengthLink=function(e){return((e||"")+(c()||"")).length<=i},e.$watch(c,function(e){var t=a.$viewValue;o?(a.$setViewValue(t?"":" "),a.$setViewValue(t)):e&&t&&(o=!0)})}function c(){return r||(r=angular.isDefined(a.$$parentForm[s])?a.$$parentForm[s]:void 0),r&&r.$viewValue}}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaMethodsPageLink",["$window","$injector",function(e,t){return{restrict:"C",scope:{href:"@"},link:function(n,a){if(e.location.pathname===n.href&&null!==function(e,t){for(;e;e=e.parentNode)if(e.classList.contains(t))return e;return null}(a[0],"modal-dialog")&&t.has("$modalStack")){var r=t.get("$modalStack");a.on("click",function(t){t.preventDefault(),t.stopPropagation(),r.dismissAll(),e.scrollTo&&e.scrollTo(0,0)})}}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaModel",["$compile","$parse","$timeout",function(e,t,n){return{restrict:"A",require:["?^bpaInputGroup","?^^bpaBaseForm","?ngModel","?^^bpaFormPage"],scope:{bpaModel:"@",ngModel:"@",bpaPostName:"@",bpaPostSkip:"@",bpaSensitive:"@",bpaAddInputGroup:"@"},compile:function(a,r){return a.attr("ng-model","bpaFormData."+r.bpaModel),{pre:function(a,r,i,o){var s=o[0],c=o[1],l=o[2],u=o[3];if(l){if(l.bpaPostName=a.bpaPostName,l.element=r,i.value&&"radio"!==i.type&&n(function(){t(i.ngModel).assign(a.$parent,i.value)}),s&&"false"!==a.bpaAddInputGroup&&s.addController(l),c){var d,p=a.bpaModel||a.ngModel;c.addController(p,i,l),u&&u.addController(l),d=a.bpaPostSkip?null:a.bpaPostName?a.bpaPostName:p,c.setPostNameMap(p,d),a.bpaSensitive&&c.addSensitiveField(l,r)}}else e(r)(a.$parent)}}}}}])},function(e,t,n){"use strict";n(0),n(20),n(21),n(2),n(5),angular.module("bpa-ui.directives").directive("bpaPaypalButton",["ExternalScripts","bpaIovation","bpaUrl","$compile","bpaOauth2Http","$timeout","bpaEventLog",function(e,t,n,a,r,i,o){return{restrict:"E",scope:{size:"@",color:"@",shape:"@",label:"@",callbacks:"=?",forcePrimary:"@",flowName:"@",updateBillingAddress:"<"},link:function(a,s){var c="add_upm",l="add_paypal",u=void 0;function d(e,t){h(o.EVENT_CLICK,{event_label:"pay_with_paypal"}),v("init");var i={};a.forcePrimary&&(i.forcePrimary=a.forcePrimary),r.post(n.urlSetAe(u),i).success(function(n){if(!n)return f(),t(new Error("no data"));if(!n.agreement_key||!n.status){var a=n.messages&&n.messages.length?n.messages[0].message:void 0;return f(a),t(new Error(a))}e(n.agreement_key)}).error(function(e){f(),t(new Error(e))})}function p(e){g("success_event_accepted_ba"),v("authorize"),t.getBlackBox(function(t){return function(e,t){r.post(e,t).success(function(e){if(!e)return f();if(!e.status){var t=e.messages&&e.messages.length?e.messages[0].message:void 0;return f(t)}g("success_event_upm_added"),v("success",e.messages,e.mop_data)}).error(function(e){f()})}(e.returnUrl,{iovationBlackBox:t,updateBillingAddress:Boolean(a.updateBillingAddress)})})}function m(){g("success_event_cancel"),v("cancel")}function f(e){o.logErrors(c,l,o.LABEL_ERROR_PROCESSING,e),v("error",e)}function b(e){o.logLoadingFailure(c,l,e),v("loadingFailure")}function g(e,t){var n={event_label:e};t&&(n.event_message=t),h(o.EVENT_IMPRESSION,n)}function h(e,t){o.logBpaEvent(e,c,t||{},l)}function v(e,t,n){a.callbacks[e]&&i(function(){return a.callbacks[e](t,n)})}a.callbacks=a.callbacks||{},s[0].setAttribute("id","_bpaPayPalElement"),o.setFlowName(a.flowName),r.get(n.resourceUrl("paypal/config"),{cache:!0}).success(function(t){t&&t.key||b("Paypal configuration response is invalid"),u=t.createUrl;var n={};n["data-version-"+t.version]="",e.download(t.url,{onload:function(){angular.isDefined(paypal)&&angular.isDefined(paypal.Button)?function(e,t,n){paypal.Button.props&&paypal.Button.props.payment&&(paypal.Button.props.payment.timeout=1e5);paypal.Button.render({env:t,client:{production:n,sandbox:n},locale:"en_US",payment:d,commit:!0,onAuthorize:p,onCancel:m,logLevel:"error",style:{size:a.size||"responsive",color:a.color||"blue",shape:a.shape||"rect",label:a.label||"pay"}},"#"+e)}("_bpaPayPalElement",t.env,t.key):b("Paypal API failed to load")},onerror:function(){b("External scripts loading error")}},n)}).error(function(){b("Paypal configuration loading error")})}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaPhone",function(){return{restrict:"A",require:["^^bpaBaseForm","ngModel"],link:function(e,t,n,a){var r=a[0],i=a[1];r.addController(n.ngModel,n,i),e.$watch(n.ngModel,function(){var t=i.$modelValue,a=e.bpaFormData;if(t){var r=""+(t.country?t.country["Phone Code"]:"")+(t.number?t.number:"");a[n.name]=r.replace(/\D/g,"")}})}}})},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaPreventLeave",["$window",function(e){return{restrict:"A",scope:{active:"&",message:"@"},link:function(t,n,a,r){e.addEventListener("beforeunload",function(e){if(t.active())return(e||window.event).returnValue=t.message,t.message})}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaRoutingNumber",[function(){return{restrict:"A",link:function(e,t){t.on("input",function(){t.val().length>8&&t.triggerHandler("updateEvent")})}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaSelect",["bpaRouting",function(e){return{restrict:"A",require:"ngModel",scope:{model:"=ngModel",placeholder:"@",choices:"<",idMap:"&?",valueMap:"&?",labelMap:"&?",dropdownClass:"@"},templateUrl:e.get("template-bpa-select"),link:function(e,t,n,a){var r=null,i=t[0].querySelector("up-c-dropdown span[slot='label']");function o(){function t(t,n,a){return angular.isFunction(e[t])?e[t]({item:n,key:a}):n}var n=[],a=e.model&&t("idMap",e.model);return angular.forEach(e.choices,function(e,i){var o=t("idMap",e,i).toString();a&&a.toString()===o&&(r=o),n.push({id:o,label:t("labelMap",e,i),data:t("valueMap",e,i)})}),n}angular.extend(e,{options:o(),isSelected:function(e){return r===e},getSelectionLabel:function(){if(null!==r)for(var t=0,n=e.options.length;t<n;t++)if(e.options[t].id===r)return e.options[t].label;return e.placeholder},getSelectionLabelText:function(){return i&&i.innerText.replace(/\n/g,"").replace(/\s{2,}/g," ")},selectionChanged:function(t){if(r!==t)for(var n=0,i=e.options.length;n<i;n++)if(e.options[n].id===t){e.model=e.options[n].data,a.$setViewValue(e.options[n].data),r=t;break}}}),e.$watchCollection("choices",function(){e.options=o()})}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaSetLocation",["$window","$location",function(e,t){return{restrict:"E",scope:{location:"@",reload:"@"},link:function(n){n.reload?e.location=n.location:t.path(n.location)}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaShowBankInfo",[function(){return{restrict:"E",templateUrl:"bpaShowBankInfo.html",scope:{bankInfo:"="},link:function(e,t,n){e.getAddress=function(){return function(e){return[e.city,e.district&&"-"!=e.district?e.district:"",e.state!=e.city?e.state:"","-"!=e.zip?e.zip:"",e.country||("US"==e.country_code2?"UNITED STATES":"")].filter(function(e){return e||null}).join(", ")}(e.bankInfo.info)}}}}])},function(e,t,n){"use strict";n(0),n(13),angular.module("bpa-ui.directives").directive("bpaShowTaxInfo",["bpaRouting","bpaTaxInfo",function(e,t){return{restrict:"E",templateUrl:e.get("template-tax-show"),scope:{taxInfo:"=?"},link:function(e,n,a){a.taxInfo||t.get().then(function(t){return e.taxInfo=t.taxInfo}),e.isW8=function(){return e.taxInfo&&"w8"===e.taxInfo.type},e.isW9=function(){return e.taxInfo&&"w9"===e.taxInfo.type}}}}])},function(e,t,n){"use strict";n(0),n(13),angular.module("bpa-ui.directives").directive("bpaShowVatInfo",["bpaRouting","bpaTaxInfo",function(e,t){return{restrict:"E",templateUrl:e.get("template-vat-show"),scope:{vatInfo:"=?"},link:function(e,n,a){a.vatInfo||t.get().then(function(t){return e.vatInfo=t.vatInfo})}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaValidateTin",["$parse",function(e){var t={SSN:/^\d{3}-\d{2}-\d{4}$/,EIN:/^\d{2}-\d{7}$/};return{restrict:"A",require:"ngModel",link:function(n,a,r,i){var o=e(r.watchModel);i.$validators.invalidSSN=function(e){var a=o(n);return a&&("SSN"!==a||t.SSN.test(e))},i.$validators.invalidEIN=function(e){var a=o(n);return a&&("EIN"!==a||t.EIN.test(e))},n.$watch(r.watchModel,function(){i.$validate()})}}}])},function(e,t,n){"use strict";n(0),n(4),angular.module("bpa-ui.directives").directive("bpaVar",["bpaVars",function(e){return{restrict:"E",scope:{key:"@",value:"@"},link:function(t){e.set(t.key,t.value)}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaVatGroup",[function(){return{scope:{bpaVatGroup:"@",formatCorrectnessFlag:"="},restrict:"A",controller:["$scope",function(e){this.isStrict=function(){return"strict"===e.bpaVatGroup},this.setCorrectness=function(t){e.formatCorrectnessFlag=t}}]}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("bpaZip",["$parse",function(e){var t={USA:/^\d{5}$/,CAN:/^[a-z]\d[a-z](?:\s?\d[a-z]\d)?$/i};return{restrict:"A",require:"ngModel",link:function(n,a,r,i){var o=e(r.zipIsOptional),s=e(r.zipCountryModel);function c(e){if(!s(n))return!0;if(!e)return!0;e=e.trim();var a=t[l()];return!a||a.test(e)}function l(){return s(n)?s(n):""}function u(){return"CAN"===l()}function d(){return"USA"===l()}i.$validators.bpaZip=function(e){if(!d())return!0;return c(e)},i.$validators.bpaZipRequired=function(e){if(!d())return!0;return!!e},i.$validators.bpaPostal=function(e){if(!u())return!0;return c(e)},i.$validators.bpaPostalRequired=function(e){if(!u())return!0;return!!e},i.$validators.bpaPostalIncorrect=function(e){if(!e)return!0;return(e=e.trim())&&/^[a-z0-9\/,.:;+()# -]{1,10}$/i.test(e)},o.assign(n,!0),n.$watch(l,function(e){o.assign(n,!t[e])})}}}])},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("choiceModelInit",["$parse",function(e){return{restrict:"A",link:function(t,n,a){a.ngModel&&e(a.ngModel).assign(t,n[0].value)}}}])},function(e,t,n){"use strict";n(0),n(9),n(2),n(4),n(61),n(22),n(50),n(3),angular.module("bpa-ui.directives").directive("clientPlanSubscription",["bpa","bpaUrl","bpaVars","bpaClientSubscription","$filter","bpaDepositMethods","bpaSubscriptionEventLogger","DEPOSIT_METHODS_URL_PART","ACCOUNTING_ENTITY_KEY",function(e,t,n,a,r,i,o,s,c){return{restrict:"E",require:"bpaBaseForm",scope:{subscriptionInfo:"=?",callbackObject:"=?",flowName:"@",subscriptionUrl:"@"},templateUrl:t.resourceUrl(s+"/partials/client-plan-subscription-form.html"),link:function(e,t,s,l){var u=!0;function d(){return u||l.isScreenLocked("form")}function p(t){o.submitClick(),u=!0,e.subscriptionInfo.primary?m(t):i.setPrimaryMop(n.get(c),e.subscriptionInfo.id).then(function(e){e.data&&!e.data.status?f():m(t)},function(){return f()})}function m(t){a.subscribe(e.subscriptionInfo.plan.product_id).then(function(){u=!1,t&&t.success&&(t.success(),o.submitSuccess())},function(){return f()})}function f(){l.addStandardError(),o.submitProcessingFailure(),u=!1}!function(){l.init(e,t,"clientPlanSubscription").setSubmit(p).setIsValid(function(){return!!e.subscriptionInfo}),a.setUrl(e.subscriptionUrl),l.setEventLogger(o);var n=l.getInterfaceObject();n.isBlocked=d,n.cancel=function(){return o.logClickEvent(o.LABEL_CANCEL)}}(),e.$watch("subscriptionInfo",function(e){void 0!==e&&(o.logFormShown(),u=!1)}),e.getSubscriptionFee=function(){return e.subscriptionInfo&&e.subscriptionInfo.plan&&e.subscriptionInfo.plan.fee?r("number")(e.subscriptionInfo.plan.fee,2)+"%":""},e.getBenefitAmount=function(){return e.subscriptionInfo&&e.subscriptionInfo.plan&&e.subscriptionInfo.plan.fee?100*e.subscriptionInfo.plan.price/e.subscriptionInfo.plan.fee:0},e.learnmoreSubscription=function(){o.logClickEvent("learnmore")}}}}])},function(e,t,n){"use strict";n(0),n(2),n(24),n(46),n(4),n(20),n(21),n(60),angular.module("bpa-ui.directives").directive("creditCardForm",["bpaUrl","bpaOauth2Http","$timeout","$window","CreditCards","bpaBlockMode","bpaVars","ExternalScripts","bpaIovation","bpaCcEventLogger",function(e,t,n,a,r,i,o,s,c,l){return{restrict:"E",scope:{allowDoubleSubmit:"=?",isSubmited:"=?",colFieldsClass:"@",cancelUrl:"@",recordId:"@",disallowCurrencies:"@",lockOnCountryChange:"@",formLockSelector:"@",forcePrimary:"@",flowName:"@",pagedSubmitLabel:"@",updateBillingAddress:"<",enableAddressLookup:"<"},require:"bpaBaseForm",templateUrl:function(t,n){var a=n.recordId?e.formUrl("edit-credit-card"):r.getAddFormUrl();a&&"/"===a[0]&&(n.recordId&&(a+="/"+n.recordId),a+="?"+Date.now());return a},link:function(u,d,p,m){var f={},b=null,g=null,h=0,v=1;function y(){return u.billingAddress&&u.billingAddress.country}function k(e){l.loadingFailure(e+": "+angular.toJson(r.getServicesState()))}function A(){var e=r.getCurrentCard();return"1"!==u.disallowCurrencies&&(!e||e.currenciesAllowed)}function w(e){return l.setBin(e.firstSixDigits),!(e.errors.length>0)||(l.logTokenizationErrors(e.errors),!1)}function _(){angular.extend(u.bpaFormData,{address1:u.billingAddress.street,address2:u.billingAddress.street2,city:u.billingAddress.city,country:u.billingAddress.country,zip:u.billingAddress.zip}),"USA"===u.billingAddress.country?u.bpaFormData.countryState={stateUsa:u.billingAddress.state.stateUsa}:"CAN"===u.billingAddress.country&&(u.bpaFormData.countryState={stateCanada:u.billingAddress.state.stateCanada}),u.billingAddress.phone&&(u.bpaFormData.phone=u.billingAddress.phone)}function E(){var n=y();if(n){h=0;var a=f[n];a?S(a):function n(a){if(!A())return void S({countryCode:a,currencies:[{code:"USD"}]});f[a]=!0;(!m.isPagedMode()||m.isPagedMode()&&!m.isFirstPage())&&m.setSubmitLock("ccDataLock",i.lockScreen,u.lockOnCountryChange);t.get(e.baseUrl()+"countries/"+a,{cache:!0}).success(function(e){S(e),f[a]=e,m.releaseSubmitLock("ccDataLock")}).error(function(){h<v?(h++,n(a)):(C(a,[]),delete f[a],m.releaseSubmitLock("ccDataLock"))})}(n)}}function S(e){!0!==e&&C(e.countryCode,e.currencies)}function C(e,t){var n=u.bpaFormData.chargeCurrency,a=void 0;if(1===t.length&&e&&g&&"USD"===t[0].code&&e===b&&"USD"!==g)u.chargeCurrenciesList=function(e){return[{code:e,date:"",name:"",rate:""},{code:"USD",date:"",name:"U.S. dollars",rate:""}]}(g),n=g;else{if(t.length<=1)return u.chargeCurrenciesList=[],void(u.bpaFormData.chargeCurrency="");u.chargeCurrenciesList=t}n&&(a=T(n)),a||(a=t[0]),a&&I(a)}function T(e){for(var t=void 0,n=0,a=u.chargeCurrenciesList.length;n<a;n++)if((t=u.chargeCurrenciesList[n]).code===e)return t;return null}function I(e){u.currentCurrency=e,u.bpaFormData.chargeCurrency=e.code}m.init(u,d,"creditCard"),function(){var e=o.get("billingAddress");e&&"string"==typeof e&&(u.billingAddress=JSON.parse(e))}(),u.recordId?(function(){var t=document.getElementById("card-error-status");if(!t)return;"not-found"===t.value&&(a.location=e.getMainBillingMethodsPageUri())}(),m.setSubmit(function(e){_(),c.updateScope(u,function(){m.sendFormData(u.bpaFormData,e)})}),n(function(){E(),b=y(),g=u.bpaFormData&&u.bpaFormData.chargeCurrency}),n(function(){m.areErrorsVisible()&&m.showErrorNotification()},300),function(){if(r.getCurrentCard())return;var e=o.get("cardFirstSixDigits");e&&"string"==typeof e&&r.updateNumber(e)}()):(m.setForceValueToModelAllFields(!0).setSubmit(function(e){if(!r.isReady())return void m.addStandardError();m.setSubmitLock("Tokenize",i.preventLeave|i.lockScreen,m.getSubmitLockMode()),A()||(u.bpaFormData.chargeCurrency="USD");var t=r.tokenize(u.bpaFormData);w(t)?(_(),u.bpaFormData.forcePrimary=u.forcePrimary,u.bpaFormData.adyenToken=t.adyen,u.bpaFormData.lastFourDigits=t.lastFourDigits,u.bpaFormData.firstSixDigits=t.firstSixDigits,u.bpaFormData.updateBillingAddress=Boolean(u.updateBillingAddress),u.bpaFormData.timestamps=angular.extend({},t.timestamps,{userTime:(new Date).toISOString()}),c.updateScope(u,function(){m.releaseSubmitLock("Tokenize"),m.sendFormData(u.bpaFormData,e)})):(m.releaseSubmitLock("Tokenize"),m.addStandardError())}).setGtmEvents({success:"Add Credit Card",failure:"Add Credit Card",cancel:"Click"}),p.pagedMode&&m.setEventLogger(l),function(){u.jsLoadError=!1,s.isGroupReady("add-credit-card")||m.setSubmitLock("add-cc-js-lock",i.lockScreen,"form");s.addReadyCallback("add-credit-card",function(){n(function(){m.releaseSubmitLock("add-cc-js-lock"),u.jsLoadError=!r.isReady(),u.jsLoadError&&k("Tokenization API failed to load")})}),s.addErrorCallback("add-credit-card",function(){n(function(){m.releaseSubmitLock("add-cc-js-lock"),u.jsLoadError=!0,k("External scripts loading error")})})}(),function(){var e=void 0;u.$watch("bpaFormData.ccNumber",function(){var t=r.getCurrentCard();t&&t.type!==e&&(e=t.type,t.currenciesAllowed&&y()&&E())})}()),u.countryChange=E,u.currencyChange=function(){var e;(e=T(u.bpaFormData.chargeCurrency))&&I(e)},u.isAmexCard=function(){var e=r.getCurrentCard();return e&&"amex"===e.type},u.tokenizationSuccess=!0,u.tokenizationErrors={},u.tokenizeCard=function(e){var t=r.tokenize(u.bpaFormData,!0);return u.tokenizationSuccess=w(t),u.tokenizationSuccess?delete u.bpaFormErrors.tokenization:(void 0===t.validationResult||t.validationResult.valid||angular.extend(u.tokenizationErrors,{cvv:t.validationResult.cvc,number:t.validationResult.luhn&&t.validationResult.number,name:t.validationResult.holderName,month:t.validationResult.month&&t.validationResult.expiryMonth,year:t.validationResult.year&&t.validationResult.expiryYear}),u.bpaFormErrors.tokenization=e),u.tokenizationSuccess},u.isCurrencySelected=function(e,t){var n=u.bpaFormData.chargeCurrency;return n?e===n:0===t},u.areCurrenciesAllowed=A}}}])},function(e,t,n){"use strict";function a(e,t,n,a,r,i,o,s,c,l,u,d){var p=u.create("list");return{scope:{currentAe:"<",aeType:"@",interfaceObject:"=?"},templateUrl:"depositMethodsTpl.html",link:function(t){t.interfaceObject={refresh:f},c.setScreenLoading(!1),a.setAccountingEntityRid(t.currentAe),s.preFetchData();var i=l.getAction();switch(i.action){case l.ACTION_ADD_PAYMENT_METHOD:u();break;case l.ACTION_VERIFY_PAYMENT_METHOD:c.verifyMop(i.mopRid)}function o(e,t){c.setPrimaryMop(e,t).success(function(t){c.processResponse(e,t)}).error(function(){c.processFatalErrorInResponse(e)})}function u(){s.show({flowName:"BPA:"+t.aeType+":deposit_methods",enableSubscription:!0,forcePrimary:0}).then(m,m)}function m(e){e&&e.success&&n.publish(c.CHANNEL_MOP_ADDED,e.mopData),d.CODE_EMAIL_NOT_VERIFIED!==e&&f()}function f(){c.setScreenLoading(!0),c.depositMethodsReload()}t.$watch("currentAe",function(e,t){e!=t&&(s.removeAddCardFormFromCache(),f())}),t.getDepositTemplateUrl=function(){return c.getDepositTemplateUrl()},t.templateLoaded=function(){c.setScreenLoading(!1)},t.verifyMop=function(e){p.click("verify"),c.verifyMop(e)},t.setPrimary=function(e,t,n,a,r){1==n&&(c.setScreenLoading(!0),1==a&&0==r?c.setUpModal({locals:{_injectedProperties:{}},size:"sm",keyboard:!1,backdrop:"static",controller:"yesNoModalController",templateUrl:"changePrimaryWarning.html"},function(n){n&&n.success&&(c.setScreenLoading(!0),o(e,t))}):o(e,t))},t.showAddMopModal=function(){p.click("add_method"),u()},t.deleteMop=function(t,a,i){c.setScreenLoading(!0),c.setUpModal({locals:{_injectedProperties:{remove:i}},size:"sm",keyboard:!1,backdrop:"static",controller:"yesNoModalController",templateUrl:"deleteMopWarning.html"},function(i){i&&i.success&&(c.setScreenLoading(!0),e.post(function(e,t,n){return r.depositMethodsBaseUrl(e)+"/"+n+"/"+t}(t,"remove",a)).success(function(e){e.status&&n.publish(c.CHANNEL_MOP_REMOVED),c.processResponse(t,e)}).error(function(){c.processFatalErrorInResponse(t)}))})}}}}n(0),n(9),n(2),n(6),n(19),n(22),n(34),n(35),n(30),n(3),angular.module("bpa-ui.directives").directive("depositMethods",a),a.$inject=["bpaOauth2Http","$templateCache","eoChannel","bpa","bpaUrl","bpaAlert","DEPOSIT_METHODS_URL_PART","bpaAddBillingMethod","bpaDepositMethods","bpaHashAction","bpaEventTrackerFactory","bpaRequirementsNotMetHandler"]},function(e,t,n){"use strict";n(0),n(37),angular.module("bpa-ui.directives").directive("financialAccountSelector",["bpaOauth2Http","cookieManager","bpaRouting","eoUtils","bpaFlashMessage",function(e,t,n,a,r){return{scope:{currentAe:"<",collection:"<",cookie:"@",callback:"&"},templateUrl:n.get("template-financial-account-selector"),link:function(i){var o=i.cookie,s=i.currentAe,c=i.collection,l=!1;function u(e,t){var n=[],r=void 0;return angular.forEach(t,function(t,i){var o=t.split("("),s=void 0;s=2===o.length?'<span class="d-flex"><span class="ellipsis">'+a.escapeText(o[0])+"</span>&nbsp;<span>("+a.escapeText(o[1])+"</span></span>":a.escapeText(t),n.push({id:i,label:s}),i===e&&(r=s)}),i.selectedAe={id:e,label:r},n}i.dropdownDidClose=function(){if(l){!function(){var e=new Date;e.setDate(e.getDate()+30),t.put(o,i.selectedAe.id,{expires:e})}();var e=i.selectedAe.id;r.fetchMessages(e),i.callback({id:e,label:i.selectedAe.label}),l=!1}},i.change=function(){return l=!0},c&&o&&s?(angular.isString(c)&&(c=angular.fromJson(c)),Object.keys(c).length>1&&(i.aeCollection=u(s,c))):e.get(n.get("financial-account-selector-fetch")).success(function(e){Object.keys(e.collection).length>1&&(o=e.cookie,s=e.currentAe,i.aeCollection=u(s,e.collection))})}}}])},function(e,t,n){"use strict";n(0),n(2),n(21),n(30),angular.module("bpa-ui.directives").directive("mpesaForm",["bpaUrl","eoModal","bpaIovation","$timeout",function(e,t,n,a){return{restrict:"E",scope:{cancelUrl:"@",removeMopUrl:"@",recordId:"@"},require:"bpaBaseForm",templateUrl:function(t,n){var a=n.recordId?e.formUrl("edit-mpesa-form"):e.formUrl("add-mpesa-form");return a&&"/"===a[0]&&(n.recordId&&(a+="/"+n.recordId),a+="?"+Date.now()),a},link:function(e,r,i,o){var s,c=!1;o.init(e,r,"mpesa").setSubmit(function(t){o.isValid()&&n.updateScope(e,function(){o.sendFormData(e.bpaFormData,t)})}),o.setRemoveAction(function(n){t.custom({locals:{_injectedProperties:{}},keyboard:!1,controller:"yesNoModalController",templateUrl:"removalWarning.html"}).result.then(function(){e.removeMopUrl&&(document.location=e.removeMopUrl)},function(){})}),e.isAccountHolderPopoverVisible=function(){return c},e.showAccountHolderPopover=function(){s&&(a.cancel(s),s=null),c=!0},e.hideAccountHolderPopover=function(){s&&a.cancel(s),s=a(function(){c=!1,s=null},100)},e.changeCountry=function(){var t=e.countries.find(function(t){return t.Code2===e.bpaFormData.country});t&&(e.phone={country:t,number:null},e.mpesaPhonePattern=t.numberPattern)},e.initPhoneCodes=function(t){for(var n in e.countries=[],t)e.countries.push({Code2:n,"Phone Code":t[n].countryCode,numberPattern:t[n].numberPattern});a(function(){e.changeCountry()})},r[0].querySelector(".bpa-flash-messages")&&o.setNeedAttention()}}}])},function(e,t,n){"use strict";function a(e,t,n,a,r,i,o,s,c,l,u){return{restrict:"E",scope:{currentAe:"<",minChargeAmount:"<",defaultErrorMessage:"@",flowName:"@",addBillingMethodConfig:"<",interfaceObject:"=?",callbackObject:"=?"},templateUrl:e.resourceUrl(t+"/partials/pay-now-block.html"),link:function(d){var p="pay_now",m="informational_modal",f=!0,b={balance:0,isChargeable:!1},g={mops:[],isManualChargeAllowed:!0},h={};function v(){return f||0===y()}function y(){return b&&!angular.isUndefined(b.balance)&&b.balance<0?Math.abs(b.balance):0}function k(){return g.mops.length>0}function A(){T().finally(function(){v()||M(o.EVENT_IMPRESSION,{event_label:"button_enabled"})})}function w(){s(function(){return angular.element(c).triggerHandler("resize")},75)}function _(e){T(),e&&e.addMop&&S()}function E(e){T(),M(o.EVENT_CLICK,{event_message:e})}function S(){s(function(){u.show(angular.extend({flowName:d.flowName,enableSubscription:!0,forcePrimary:0},d.addBillingMethodConfig)).then(C)},300)}function C(e){e&&e.success&&(!function(e,t){d.callbackObject&&d.callbackObject[e]&&d.callbackObject[e](t)}("mopAdded",e.mopData),x(e.mopData))}function T(){return f=!0,l.all([i.getInfo(d.currentAe),n.getBalance()]).then(I).catch(function(){i.processFatalErrorInResponse(d.currentAe)}).finally(function(){f=!1})}function I(e){var t=e[0];b=e[1],angular.isArray(t.depositMethods)&&(g.mops=t.depositMethods.filter(function(e){return e.canBeManuallyCharged})),g.isManualChargeAllowed=t.isManualChargeAllowed,h=t.urls}function O(e,t,n){var r=a.custom({size:"sm",locals:{_injectedProperties:t||{}},keyboard:!1,controller:n?"yesNoModalController":"closablePopupController",templateUrl:e,windowClass:"bpa-pay-now-warning-modal"});n&&r.result.then(n),r.result.catch(function(e){return M(o.EVENT_CLICK,{event_label:e},p,m)}),r.rendered.then(P)}function P(){var e=document.querySelector(".bpa-pay-now-warning-modal .modal-body");M(o.EVENT_IMPRESSION,{status_message:e?e.innerText.trim():""},p,m)}function M(e,t,n,a){(t=t||{}).flow=d.flowName,o.logBpaEvent(e,n||p,t,a)}function x(e){y()>0&&(e&&e.verified&&!k()||!e&&k())&&T()}angular.isUndefined(d.addBillingMethodConfig)&&(d.addBillingMethodConfig={}),d.isDisabled=v,d.getBalanceDue=y,d.payNow=function(){g.isManualChargeAllowed?k()?y()<d.minChargeAmount?O("payNowDueLessThanThresholdWarning.html",{minChargeAmount:d.minChargeAmount}):function(){var n=a.custom({templateUrl:e.resourceUrl(t+"/partials/pay-due-modal.html"),controller:"payDueModalController",controllerAs:"vm",locals:{injected:{currentAe:d.currentAe,minChargeAmount:d.minChargeAmount,defaultErrorMessage:d.defaultErrorMessage,flowName:d.flowName}},size:"sm",keyboard:!1,backdrop:"static"});n.result.then(_,E),n.rendered.then(w)}():O("payNowNoBillingMethodsWarning.html",{},function(){return S()}):O("payNowManualChargeIsNotAllowedWarning.html",{},function(){return c.location=h.customerSupport})},d.interfaceObject={refresh:x},d.$watch("currentAe",function(e,t){e!==t&&A()}),r.subscribe(i.CHANNEL_MOP_ADDED,d,x),r.subscribe(i.CHANNEL_MOP_REMOVED,d,x),A()}}}n(0),n(2),n(44),n(22),n(5),n(19),n(30),n(72),n(73),n(3),angular.module("bpa-ui.directives").directive("payDueForm",a),a.$inject=["bpaUrl","DEPOSIT_METHODS_URL_PART","bpaBalance","eoModal","eoChannel","bpaDepositMethods","bpaEventLog","$timeout","$window","$q","bpaAddBillingMethod"]},function(e,t,n){"use strict";n(0),angular.module("bpa-ui.directives").directive("paymentMethodSelector",["eoUtils","$timeout","$compile","bpaRouting",function(e,t,n,a){return{restrict:"E",scope:{ngModel:"=",collection:"<",onChange:"&",name:"@",bpaSelectClass:"@"},templateUrl:a.get("template-payment-method-selector"),link:function(a,r,i){if(angular.isDefined(i.required)&&!r.hasClass("payment-method-required")){r.addClass("payment-method-required");var o=r[0].querySelector("div[bpa-select]");o.setAttribute("required",!0===i.required?"required":i.required),t(function(){return n(angular.element(o))(a)})}function s(t){angular.isArray(t)&&(a.paymentsCollection=t.map(function(t){var n=t.hasOwnProperty("namePlain")?t.namePlain:t.name,a=n.match(/^(.+) (ending in \d+)$/);if(null===a&&(a=n.match(/^(.+) (\([^()]+)(\))$/)),null!==a){var r='<span class="ellipsis payment-label-second">'+e.escapeText(a[2])+"</span>";t.formattedName='<span class="d-flex payment-label"><span class="ellipsis payment-label-first">'+e.escapeText(a[1])+"&nbsp;</span>"+(a[3]?'<span class="payment-label-middle-ellipsis">'+r+a[3]+"</span>":""+r)+"</span>"}else t.formattedName=n;return t}))}a.change=function(){return t(function(){return a.onChange()})},s(a.collection),a.$watch("collection",s)}}}])},function(e,t,n){"use strict";n(0),n(13),n(26),n(6),angular.module("bpa-ui.directives").directive("taxInfoForm",["bpaTaxInfo","bpaRouting","bpaFormValidation","bpaAlert",function(e,t,n,a){return{restrict:"E",templateUrl:t.get("template-tax-form"),scope:{taxInfo:"=?",interfaceObject:"=?",callbackObject:"=?"},link:function(t,r,i){var o=!1,s=!1;function c(e){if(angular.isObject(t.callbackObject)&&angular.isFunction(t.callbackObject[e])){for(var n,a=arguments.length,r=Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];(n=t.callbackObject)[e].apply(n,r)}}i.taxInfo||(o=!0,e.get().then(function(e){return t.taxInfo=e.taxInfo}).finally(function(){return o=!1})),t.interfaceObject=t.interfaceObject||{},angular.extend(t.interfaceObject,{isBlocked:function(){return o},getType:function(){return t.form.type||t.taxInfo&&t.taxInfo.type},triedToSubmit:function(){return s},resetValues:function(){t.taxInfo&&angular.extend(t.form,{type:t.taxInfo.type,tin:"",tinType:t.taxInfo.tinType,legalName:t.taxInfo.legalName,classification:t.taxInfo.classification,classificationOther:t.taxInfo.classificationOther,certification:!1}),s=!1,t.tax_info.$setPristine()},submit:function(){c("submit"),a.clearMessages(),n.revalidateAllFields(t.tax_info),t.tax_info.$valid?(s=!0,o=!0,a.clearMessages(),e.save(t.form).then(function(e){a.addAlertMessages(e.messages),c("success",e)},function(e){e&&e.messages.length>0?a.addAlertMessages(e.messages):a.addFatalErrorMessage(),c("error",e)}).finally(function(){return o=!1})):c("validationError")}}),angular.extend(t,{form:{},isW9:function(){return"w9"===this.form.type},taxCertificateContents:function(){return this.isW9()?"template-tax-certificate-w9":"template-tax-certificate-w8"},resolveClassification:function(e){return angular.isObject(e)?e.id:e}}),t.$watch("taxInfo",function(e){e&&t.interfaceObject.resetValues()})}}}])},function(e,t,n){"use strict";n(0),n(2),angular.module("bpa-ui.directives").directive("ccTemporaryCharges",["bpaUrl",function(e){return{restrict:"E",scope:{gotItUrl:"@"},templateUrl:e.resourceUrl("/resources/html/temporary-charges.partial.html")}}])},function(e,t,n){"use strict";n(0),n(13),n(26),n(6),n(25),angular.module("bpa-ui.directives").directive("vatInfoForm",["bpaGcModal","bpaTaxInfo","bpaRouting","bpaFormValidation","bpaAlert",function(e,t,n,a,r){return{restrict:"E",templateUrl:n.get("template-vat-form"),scope:{vatInfo:"=?",interfaceObject:"=?",callbackObject:"=?"},link:function(n,i,o){var s=!1,c=!1;function l(e){if(angular.isObject(n.callbackObject)&&angular.isFunction(n.callbackObject[e])){for(var t,a=arguments.length,r=Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];(t=n.callbackObject)[e].apply(t,r)}}function u(){var e=n.isVatSkipped()?t.skipVat():t.saveVat(n.form.vatId);s=!0,e.then(function(e){r.addAlertMessages(e.messages),l("success",e)},function(e){e&&e.messages.length>0?r.addAlertMessages(e.messages):r.addFatalErrorMessage(),l("error",e)}).finally(function(){return s=!1})}o.vatInfo||(s=!0,t.get().then(function(e){return n.vatInfo=e.vatInfo}).finally(function(){return s=!1})),n.interfaceObject=n.interfaceObject||{},angular.extend(n,{form:{skipVat:"0"},flag:{formatIsCorrect:!0},isVatSkipped:function(){return"1"===n.form.skipVat}}),angular.extend(n.interfaceObject,{isBlocked:function(){return s},resetValues:function(){angular.extend(n.form,{skipVat:"0",vatId:"",certification:!1}),c=!1,n.vat_info.$setPristine()},triedToSubmit:function(){return c},submit:function(){l("submit"),r.clearMessages(),a.revalidateAllFields(n.vat_info),n.vat_info.$valid?(c=!0,r.clearMessages(),n.isVatSkipped()||n.flag.formatIsCorrect?u():e.open("bpa-vat-format-warning",{saveLabel:"save",vatFormat:n.vatInfo.format,onClose:function(e){e&&u()}})):l("validationError")}})}}}])},function(e,t,n){"use strict";n(0),n(2),n(9),n(71),angular.module("bpa-ui.directives").directive("verifyPaymentMethod",["bpaUrl","bpa","$timeout","$window","bpaVerifyMopEventLogger",function(e,t,n,a,r){return{restrict:"E",require:"bpaBaseForm",scope:{mopRid:"=?",mopData:"=?",forcePrimary:"<",allowPrimary:"<",callbackObject:"=?",flowName:"@"},templateUrl:e.resourceUrl("verify-payment/partial/modern-form.partial.html"),link:function(n,a,i,o){var s=!1;function c(e){n.mopData&&o.isValid()&&(n.bpaFormData.mopRid=n.mopData.id,n.bpaFormData.forcePrimary=-1!==["CC","ACH_DEPOSIT"].indexOf(n.mopData.type)&&(Boolean(n.forcePrimary)||Boolean(n.allowPrimary)&&n.bpaFormData.makePrimary),o.sendFormData(n.bpaFormData,e))}function l(e){return Boolean(e.verified)}!function(){r.setFlowName(n.flowName),o.init(n,a,"verifyPaymentMethod"),o.setActionUrl(e.baseUrl(!0)+"verify-payment"),o.setSubmit(c),o.setCheckSuccessResponse(l),o.setEventLogger(r);var t=o.getInterfaceObject();t.isBlocked=function(){return s||o.isScreenLocked("form")},t.isLoading=function(){return s};var i=t.submit;t.submit=function(e){r.setMakePrimary(Boolean(n.allowPrimary)?Boolean(n.bpaFormData.makePrimary):void 0),r.submitClick(),i(e)},t.cancel=function(){return r.logClickEvent(r.LABEL_CANCEL)}}(),n.$watch("mopRid",function(e){e&&(n.mopData||(s=!0,t.getMethodOfPaymentInfo(e,function(e){e&&e.id?n.mopData=e:o.showErrorNotification(),s=!1},function(){o.showErrorNotification(),s=!1})))}),n.$watch("mopData",function(e){e&&e.type&&(r.setMopType(e.type),r.logFormShown())}),n.logClickEvent=function(e){return r.logClickEvent("global.text.contact_us"===e?"contact_us":"global.text.learn_more"===e?"learn_more":void 0)}}}}])},function(e,t,n){"use strict";n(51);var a=n(155);a.keys().forEach(a)},function(e,t,n){var a={"./base.js":51,"./bpa-template-loading-error.js":156};function r(e){return n(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=155},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n(51),n(49),angular.module("bpa-ui.interceptors").factory("bpaTemplateLoadingError",["$q","$injector","$window","$templateCache","bpaNetworkErrors",function(e,t,n,r,i){var o=Applet.getVar("bpa_ui_base_url")||[];function s(e){for(var t=o.length-1;t>=0;t--)if(0===e.indexOf(o[t]))return!0;return!1}return"string"==typeof o&&(o=[o]),{request:function(e){return e.isBpaTemplateRequest="GET"===e.method&&-1!==e.url.indexOf(".html")&&"object"===a(e.cache)&&void 0===e.cache.get(e.url)&&s(e.url),e},responseError:function(a){if(!a.config)return e.reject("Invalid Response.");if(a.config.isBpaTemplateRequest){var r="application/json"===a.headers("content-type")?JSON.parse(a.data):a.data;return i.setErrorForUrl(a.config.url,a.status,r),s(n.location.pathname)&&function(){var e=t.get("bpaConfirmation");if(!e)throw"bpa-ui.interceptors requires bpaConfirmation";var a=e.open("template-loading-error-modal");a&&a.then(function(){return n.location.reload()})}(),a.status=200,a.statusText="OK",a.data="",e.resolve(a)}return e.reject(a)}}}])},function(e,t,n){var a={"./base.js":10,"./closable-popup-controller.js":72,"./deposit-method.js":158,"./disbursement-method.js":159,"./pay-due-modal-controller.js":73,"./simple-modal.js":52,"./us-us-method.js":160,"./yes-no-modal-controller.js":30};function r(e){return n(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=157},function(e,t,n){"use strict";n(10),n(2),angular.module("bpa-ui.controllers").controller("depositMethodCtrl",["$scope","$location","$window","bpaUrl",function(e,t,n,a){var r=a.getMainBillingMethodsPageUri();e.cancelUrl=r,e.showTemporaryCharge=!1,e.callbackObject={success:function(t){t&&t.id&&("1"===t.verify?(n.scroll(0,0),e.showTemporaryCharge=!0):document.location=r)}}}])},function(e,t,n){"use strict";n(10),n(2),angular.module("bpa-ui.controllers").controller("disbursementMethodCtrl",["$scope","$location","$window","bpaUrl",function(e,t,n,a){var r=a.getDisbursementMethodsPageUri();e.cancelUrl=r,e.showTemporaryCharge=!1,e.callbackObject={success:function(e){e&&e.id&&(document.location=e.return_to||r)}}}])},function(e,t,n){"use strict";n(10),angular.module("bpa-ui.controllers").controller("usUsCtrl",["$scope",function(e){var t=Applet.getVar("find_work_home_uri")||"/";e.cancelUrl=t,e.showTemporaryCharge=!1,e.callbackObject={success:function(){document.location=t}}}])},function(e,t,n){"use strict";n(11);var a=n(162);a.keys().forEach(a)},function(e,t,n){var a={"./base.js":11,"./bpa-confirmation-modal.js":63,"./bpa-vat-format-warning.js":163,"./bpa-vat-info-removal-warning.js":164,"./bpa-verify-mop-modal.js":65,"./disbursement-methods-popup.js":165,"./disbursement-schedule-modal.js":166};function r(e){return n(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=162},function(e,t,n){"use strict";n(11),n(52),angular.module("bpa-ui.components").component("bpaVatFormatWarning",{bindings:{vatFormat:"<",onClose:"<"},templateUrl:["bpaRouting",function(e){return e.get("template-vat-format-warning")}],controller:"simpleModalController",controllerAs:"vm"})},function(e,t,n){"use strict";n(11),n(52),angular.module("bpa-ui.components").component("bpaVatInfoRemovalWarning",{bindings:{vatInfo:"<",onClose:"<"},templateUrl:["bpaRouting",function(e){return e.get("template-vat-removal-warning")}],controller:"simpleModalController",controllerAs:"vm"})},function(e,t,n){"use strict";n(11),angular.module("bpa-ui.components").component("disbursementMethodsPopup",{bindings:{paymentTypes:"<",onClose:"<"},templateUrl:["bpaRouting",function(e){return e.get("template-disbursement-methods-popup")}],controller:function(){var e=this;this.handleClose=function(t){"UP-C-MODAL"===t.target.tagName&&angular.isFunction(e.onClose)&&e.onClose()}},controllerAs:"vm"})},function(e,t,n){"use strict";function a(e){var t=this,n=this;this.result=null,this.cancel=function(){t.result="cancel",t.close()},this.formCallbacks={success:function(e){n.result=e,n.close()}},this.handleClose=function(e){"UP-C-MODAL"===e.target.tagName&&angular.isFunction(t.onClose)&&t.onClose(t.result)},this.isSmallScreen=function(){return e.isSmallScreen()}}n(11),n(12),angular.module("bpa-ui.components").component("disbursementScheduleModal",{bindings:{schedule:"<",paymentMethods:"<",currentAccountRid:"<",onClose:"<"},templateUrl:["bpaRouting",function(e){return e.get("template-disbursement-schedule-form-modal")}],controller:a,controllerAs:"vm"}),a.$inject=["bpaScreenSize"]},function(e,t,n){"use strict";function a(e,t,n,a,r,i){e.currentAe=a.getAccountingEntityRid(),e.switchEntity=function(r){e.currentAe=r,a.setAccountingEntityRid(r),t.path(n.depositMethodsBaseUrl(r,!0)),i.create(i.SUBLOCATION_PAGE).impression(i.LABEL_PAGE_RELOAD)},e.isScreenLoading=function(){return r.isScreenLoading()},e.payDueCallbackObject={mopAdded:function(){e.depositMethodsInterface.refresh()}}}n(2),n(9),n(22),angular.module("bpa-ui.deposit-methods.controllers",[]).controller("depositMethodsCtrl",a),a.$inject=["$scope","$location","bpaUrl","bpa","bpaDepositMethods","bpaEventTrackerFactory"]},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(17));if(n(18),n(169),n(75),n(170),(0,a.default)("Payments-DisbursementMethods")){var r=angular.module("bpa-ui");r.requires.push("account-security-ui"),r.config(i)}function i(e,t,n,a,r,i){e.when("/:aeId?/"+a,{templateUrl:"disbursementMethods.html",controller:"disbursementMethodsCtrl",controllerAs:"disbursements"}),t.html5Mode({enabled:!0}),r.group="payments",r.page="withdrawal-methods",i.pageLoadTracking=!0}i.$inject=["$routeProvider","$locationProvider","$compileProvider","DISBURSEMENT_METHODS_URL_PART","SMF_CONFIG","BPA_EVENT_TRACKING_CONFIG"]},function(e,t,n){"use strict";n(2),n(59),n(4),n(6),n(47),n(34),n(62),n(25),n(3);var a="bpa_ui_disbursement_methods_data";angular.module("bpa-ui.controllers").controller("disbursementMethodsCtrl",["$location","$window","$routeParams","bpaOauth2Http","$anchorScroll","$timeout","$q","bpaGcModal","eoUtils","sensitiveZone","bpaUrl","bpaCachedPostRequest","bpaVars","bpaAlert","bpaVerifyMop","bpaConfirmation","ACCOUNTING_ENTITY_KEY","bpaHashAction","bpaEventTrackerFactory",function(e,t,n,r,i,o,s,c,l,u,d,p,m,f,b,g,h,v,y){var k=this,A=this;this.pageData=Applet.getAngularCache()[a]||{},this.shouldBlockContent=0;var w=y.create(y.SUBLOCATION_PAGE),_=y.create("payment_details");this.pageData.currentAccountRid||(this.pageData.currentAccountRid=m.get(h)||n.aeId),this.getActionUrl=function(e){return d.disbursementMethodsActionUrl(this.pageData.currentAccountRid,e,!1)};var E=this.getActionUrl("current-schedule"),S=this.getActionUrl("list"),C={schedule:E,paymentMethods:S,lastWithdrawal:this.getActionUrl("last-withdrawal"),paymentTypes:this.getActionUrl("mop-types"),accountInfo:this.getActionUrl("account-info")};function T(e,t,n,a){var r=g.open(t,n);if(r){var i=y.create(e);a&&r.then(a),r.then(function(){return i.click("proceed")},function(e){return i.click(e)}),i.impression(e+"_impression")}}function I(e){return angular.isObject(e)&&Object.keys(e).length>0}function O(e){p.invalidate(S),delete e.pageData.paymentMethods,M.call(e)}function P(e,t){var n=this;return n.setContentBlock(!0),p.post(t).then(function(t){n.pageData[e]=t.data,"paymentMethods"===e&&x()},function(){n.setContentBlock(!1),f.clearMessages(n.pageData.currentAccountRid),f.addFatalErrorMessage(n.pageData.currentAccountRid)}).finally(function(){return n.setContentBlock(!1)})}function M(e){var t=[];for(var n in C)(e||angular.isUndefined(this.pageData[n]))&&t.push(P.call(this,n,C[n]));return s.all(t)}function x(){angular.forEach(A.pageData.paymentMethods,function(e){var t=e.descriptionSuffix.match(/^(.+)(\d{4})$/);e.oneLineDescription='<span class="d-flex"><span class="ellipsis">'+l.escapeText(e.label)+(t?l.escapeText(t[1])+"</span>&nbsp;<span>"+t[2]:l.escapeText(e.descriptionSuffix))+".</span></span>"})}function N(e){b.show(e,{allowPrimary:!1,enableSubscription:!1,flowName:"BPA:DisbursementMethods:VerifyUpm"}).then(function(){return O(A)})}this.hasPaymentMethods=function(){return!angular.isUndefined(this.pageData.paymentMethods)&&I(this.pageData.paymentMethods)},this.hasPaymentMethodsWithStatus=function(e){if(this.hasPaymentMethods())for(var t in this.pageData.paymentMethods)if(e===this.pageData.paymentMethods[t].status)return!0;return!1},this.hasAvailableMethods=function(){return this.pageData.paymentTypes&&this.pageData.paymentTypes.types},this.getBalance=function(){return this.pageData.accountInfo&&this.pageData.accountInfo.balance||0},this.hasNegativeBalance=function(){return this.pageData.accountInfo&&this.pageData.accountInfo.balance<0},this.onGetPaidClicked=function(){var e=this;this.pageData.accountInfo.taxInfo.incomplete?T("modal_no_tax_info","template-disburse-warning-tax-info",{taxInfoType:this.pageData.accountInfo.taxInfo.type},function(){return t.location=e.pageData.urls.taxInfo}):this.hasPaymentMethods()?this.pageData.accountInfo.isSuspended?T("modal_ae_suspended","template-disburse-warning-account-suspended",{},function(){return t.location=e.pageData.urls.customerSupport}):this.hasPaymentMethodsWithStatus("NOTVALIDYET")&&!this.hasPaymentMethodsWithStatus("ACTIVE")?T("modal_upm_is_not_active","template-disburse-warning-method-not-valid"):this.hasPaymentMethods()&&!this.hasPaymentMethodsWithStatus("ACTIVE")?T("modal_no_active_upms","template-disburse-warning-no-active-methods"):t.location=this.pageData.urls.disburse.replace(new RegExp("(/00000)(/|$)"),"/"+this.pageData.currentAccountRid+"$2"):T("modal_no_upms","template-disburse-warning-no-payment-methods",{},function(){return e.showDisbursementMethodsPopup()})},this.hasSchedule=function(){return this.pageData.schedule&&this.pageData.schedule.schedule&&this.pageData.schedule.schedule!==this.pageData.schedule.manualSchedule&&null!==this.getPreferredMop()},this.getPreferredMop=function(){return this.pageData.schedule&&this.pageData.schedule.preferredMop&&this.pageData.paymentMethods&&this.pageData.paymentMethods[this.pageData.schedule.preferredMop]?this.pageData.paymentMethods[this.pageData.schedule.preferredMop]:null},this.hasAdditionalMop=function(){var e=this.getPreferredMop();for(var t in this.pageData.paymentMethods)if(this.pageData.paymentMethods.hasOwnProperty(t)&&e&&String(e.id)!==String(t))return!0;return!1},this.getPaymentStatus=function(e){var t={};return t[e.status]=!0,t},this.switchAccount=function(t){for(var n in this.pageData.currentAccountRid=t,C)delete this.pageData[n];!function(e){Applet.getAngularCache()[a]=e}(this.pageData),e.path(d.disbursementMethodsActionUrl(t,"",!0)),w.impression(y.LABEL_PAGE_RELOAD)},this.showDisbursementScheduleModal=function(){var e=y.create("schedule_form");c.open("disbursement-schedule-modal",{schedule:this.pageData.schedule,paymentMethods:this.pageData.paymentMethods,currentAccountRid:this.pageData.currentAccountRid,onClose:function(t){t&&"cancel"!==t?t.schedule&&(p.invalidate(E),A.pageData.schedule=t.schedule):e.click(t||"close")}}),e.impression("schedule_form_impression")},this.verifyMop=function(e){_.click("verify"),N(e.id)},this.hasLastWithdrawal=function(){return I(k.pageData.lastWithdrawal)},this.initiateVerification=function(e){function n(e){_.messages("error_event_initiate_verification",[e])}g.open("template-initiate-verification-modal").then(function(){A.setContentBlock(!0),r.post(d.baseUrl(!1)+A.pageData.currentAccountRid+"/initiate-verification/"+e.id).then(function(e){e.data.result?_.click("success_event_initiate_verification"):n(e.data.message),e.data.result&&e.data.redirect?t.location=e.data.redirect:(O(A),f.clearMessages(A.pageData.currentAccountRid),f.addAlertMessages([{type:e.data.result?"success":"danger",message:e.data.message,aeRid:A.pageData.currentAccountRid}]))}).catch(function(){f.clearMessages(A.pageData.currentAccountRid),f.addFatalErrorMessage(A.pageData.currentAccountRid),n()}).finally(function(){return A.setContentBlock(!1)})}),_.click("initiate_verification")},this.showDisbursementMethodsPopup=function(){var e=y.create("add_method");c.open("disbursement-methods-popup",{paymentTypes:this.pageData.paymentTypes,onClose:function(){return e.click("close")}}),e.impression("add_method_impression")},this.setContentBlock=function(e){e?this.shouldBlockContent++:this.shouldBlockContent>0&&this.shouldBlockContent--},this.getScheduleLabel=function(){for(var e in this.pageData.schedule.schedulesList)if(this.pageData.schedule.schedulesList[e].key===this.pageData.schedule.schedule)return this.pageData.schedule.schedulesList[e].label;return null},this.getNextDate=function(){return this.pageData.schedule.nextDate},this.isContentBlocked=function(){return!u.isModalShown()&&this.shouldBlockContent>0},this.removePaymentMethod=function(e){var t=function(){f.clearMessages(k.pageData.currentAccountRid),f.addFatalErrorMessage(k.pageData.currentAccountRid),i("alert-messages"),a()},n=y.create("remove_method_modal");function a(e){n.messages("event_error_remove",e||[void 0])}g.open("template-disbursement-methods-removal-confirmation").then(function(){n.click("remove"),k.setContentBlock(!0);var s=k.pageData.currentAccountRid;r.post(function(e,t,n){return d.depositMethodsBaseUrl(e)+"/"+n+"/"+t}(s,"remove",e.id)).success(function(e){return function(e,r){r?(r.messages&&r.messages.length>0&&(f.clearMessages(e),f.addAlertMessages(r.messages),o(function(){return i("alert-messages")})),void 0===r.status?t():r.status?(p.invalidate(C.paymentMethods),p.invalidate(C.paymentTypes),p.invalidate(C.schedule),M.call(k,!0),n.click("success_event_removed")):a(r.messages.map(function(e){return e.message}))):t()}(s,e)}).error(function(){return t()}).finally(function(){return k.setContentBlock(!1)})},function(e){n.click(e)}),_.click("remove"),n.impression("remove_method_modal_impression")},M.call(this).then(function(){return x()}),function(){var e=v.getAction();v.ACTION_VERIFY_PAYMENT_METHOD===e.action&&N(e.mopRid)}()}])},function(e,t,n){"use strict";angular.module("bpa-ui.directives").directive("paymentTypesList",["bpaRouting",function(e){return{restrict:"E",templateUrl:e.get("template-disbursement-method-types-list"),scope:{paymentTypes:"<",country:"<"}}}])},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(17));if(n(18),n(172),n(75),(0,a.default)("Payments-DisbursementMethods-ScheduleForm")){var r=angular.module("bpa-ui");r.requires.push("account-security-ui"),r.config(["BPA_EVENT_TRACKING_CONFIG",function(e){e.pageLoadTracking=!0}])}},function(e,t,n){"use strict";n(2),n(4),n(3);var a=n(76);function r(e,t,n,r,i){var o=this,s=i.create(a.SUBLOCATION_DISBURSEMENT_SCHEDULE);this.pageData=Applet.getAngularCache().bpa_ui_disbursement_methods_data||{},this.pageData.currentAccountRid||(this.pageData.currentAccountRid=n.get(r)),this.getReturnUrl=function(){return t.getDisbursementMethodsPageUri()},this.trackCancelClick=function(){s.click(i.LABEL_CANCEL)},this.formCallbacks={success:function(e){window.location=o.pageData.successUrls[e.schedule.taxInfo.incomplete?"taxInfo":"disbursements"]}}}angular.module("bpa-ui.controllers").controller("disbursementSchedulePageCtrl",r),r.$inject=["$window","bpaUrl","bpaVars","ACCOUNTING_ENTITY_KEY","bpaEventTrackerFactory"]},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(17));if(n(18),n(174),n(176),n(186),(0,a.default)("FinancialAccounts")||(0,a.default)("FinancialAccounts-Edit")){var r=angular.module("bpa-ui");r.requires.push("bpa-ui.financial-accounts.factories"),r.requires.push("bpa-ui.financial-accounts.directives"),r.requires.push("bpa-ui.financial-accounts.controllers"),r.config(["$routeProvider",function(e){e.when("/edit/:aeId",{template:" ",controller:"editAeCtrl"})}])}},function(e,t,n){"use strict";n(27);var a=n(175);a.keys().forEach(a)},function(e,t,n){var a={"./ae-manage.js":14,"./ae-messages.js":31,"./base.js":27,"./lock-submit.js":39,"./scroller.js":40};function r(e){return n(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=175},function(e,t,n){"use strict";n(7);var a=n(177);a.keys().forEach(a)},function(e,t,n){var a={"./ae-header-link.js":178,"./ae-init.js":179,"./align-left.js":180,"./auto-focus.js":181,"./base.js":7,"./hidden-title.js":182,"./save-scroll-pos.js":183,"./team-init.js":184,"./title-provider.js":185};function r(e){return n(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=177},function(e,t,n){"use strict";n(7),angular.module("bpa-ui.financial-accounts.directives").directive("aeHeaderLink",[function(){return{restrict:"A",scope:{aeHeaderLink:"@"},link:function(e,t){e.$watch("aeHeaderLink",function(){void 0!==e.aeHeaderLink&&t.text(function(e,t){t<e.length&&(e=e.substr(0,t-3)+"...");return e}(e.aeHeaderLink,25))})}}}])},function(e,t,n){"use strict";n(7),n(14),angular.module("bpa-ui.financial-accounts.directives").directive("aeInit",["aeManage",function(e){return{restrict:"A",link:function(t,n,a){var r=n[0].querySelector(".ae-name");e.registerExistingAe({aeId:a.aeId,name:r?r.innerText.trim():"",hidden:"false"!=a.aeHidden&&"0"!=a.aeHidden,suspended:"false"!=a.aeSuspended&&"0"!=a.aeSuspended})}}}])},function(e,t,n){"use strict";n(7),angular.module("bpa-ui.financial-accounts.directives").directive("alignLeft",["$timeout",function(e){return{restrict:"A",link:function(t,n){var a=n[0],r=document.querySelector(".container");function i(){if(a.offsetWidth>r.offsetWidth){var e=function e(t){return t.offsetParent?t.offsetLeft+e(t.offsetParent):t.offsetLeft}(r),t=(r.offsetWidth-a.offsetWidth)/2;a.style.position="relative",a.style.left=(e+t<0?10-e:t)+"px"}}e(i),window.addEventListener("resize",function(){i()})}}}])},function(e,t,n){"use strict";n(7),angular.module("bpa-ui.financial-accounts.directives").directive("autoFocus",["$timeout",function(e){return{restrict:"A",link:function(t,n){e(function(){n[0].focus()},300)}}}])},function(e,t,n){"use strict";n(7),angular.module("bpa-ui.financial-accounts.directives").directive("hiddenTitle",[function(){return{restrict:"A",require:"^^titleProvider",link:function(e,t,n,a){n.ngDisabled&&e.$watch(n.ngDisabled,function(e){e?t.attr("title",a.getTitle("hidden")):t.removeAttr("title")})}}}])},function(e,t,n){"use strict";n(7),n(40),angular.module("bpa-ui.financial-accounts.directives").directive("saveScrollPos",["scroller",function(e){return{restrict:"A",link:function(t,n){var a,r,i=n[0];i.addEventListener("mousedown",function(){a=e.getPosition().left}),i.addEventListener("mouseup",function(){clearTimeout(r),r=setTimeout(function(){e.getPosition().left!=a&&e.setPosition(a,null)})})}}}])},function(e,t,n){"use strict";n(7),n(14),angular.module("bpa-ui.financial-accounts.directives").directive("teamInit",["aeManage",function(e){return{restrict:"A",link:function(t,n,a){var r=n[0].querySelector(".team-name");e.registerExistingTeam({teamId:a.teamId,name:r?r.innerText.trim():"",disabled:"false"!=a.teamDisabled&&"0"!=a.teamDisabled,hidden:"false"!=a.teamHidden&&"0"!=a.teamHidden,isRoot:"false"!=a.teamRoot&&"0"!=a.teamRoot})}}}])},function(e,t,n){"use strict";n(7),angular.module("bpa-ui.financial-accounts.directives").directive("titleProvider",[function(){return{restrict:"A",require:"titleProvider",link:function(e,t,n,a){a.setTitle("hidden",n.titleHidden)},controller:[function(){var e={};this.getTitle=function(t){return e[t]},this.setTitle=function(t,n){e[t]=n}}]}}])},function(e,t,n){"use strict";n(15);var a=n(187);a.keys().forEach(a)},function(e,t,n){var a={"./add-ae-modal.js":188,"./base.js":15,"./edit-ae-modal.js":189,"./edit-ae.js":190,"./financial-accounts-big-account.js":191,"./financial-accounts.js":192,"./submit-modal.js":193};function r(e){return n(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=187},function(e,t,n){"use strict";n(15),n(14),angular.module("bpa-ui.financial-accounts.controllers").controller("AddAeModalCtrl",["$scope","$modalInstance","aeManage",function(e,t,n){e.aeLimit=n.getAddAeLimit(),e.ok=function(){t.close()}}])},function(e,t,n){"use strict";n(15),n(14),angular.module("bpa-ui.financial-accounts.controllers").controller("EditAeModalCtrl",["$scope","$modalInstance","aeManage","item",function(e,t,n,a){var r={};e.currentName=a.name,e.item=a,function(){for(var e in a)r[e]=a[e]}(),e.isHideAeDisabled=function(){return!n.canHideAe(a.aeId)},e.ok=function(){e.canSubmit()&&t.close(e.item)},e.canSubmit=function(){if(!a.name)return!1;for(var e in a)if(r[e]!=a[e])return!0;return!1},e.cancel=function(){t.dismiss("cancel")}}])},function(e,t,n){"use strict";n(15),n(14),angular.module("bpa-ui.financial-accounts.controllers").controller("editAeCtrl",["$routeParams","$modal","$location","aeManage",function(e,t,n,a){function r(){n.path("/")}!function(e){var n=a.getAeById(e);if(!n)return;t.open({templateUrl:"editAeModalContent.html",controller:"EditAeModalCtrl",resolve:{item:function(){return{aeId:n.aeId,name:n.name,hidden:n.hidden}}}}).result.then(function(e){a.updateAe(e),r()},function(){r()})}(e.aeId)}])},function(e,t,n){"use strict";n(15),n(39),n(14),n(31),angular.module("bpa-ui.financial-accounts.controllers").controller("FinancialAccountsBigAccountCtrl",["$scope","$modal","lockSubmit","aeManage","aeMessages",function(e,t,n,a,r){var i=!0;e.showHidden=!1,e.isLocked=n.isLocked,e.messagesService=r,e.teamId="",e.accountingEntityId=null,e.newAe={},e.getTeamName=a.getTeamName;var o=Applet.getVar("big_account_aes");for(var s in o){var c=o[s];for(var l in a.registerExistingAe({aeId:c.id,name:c.name,hidden:c.hidden,suspended:c.suspended}),c.teams){var u=c.teams[l];a.registerExistingTeam({teamId:u.id,name:u.name,disabled:u.disabled,hidden:u.hidden,fullName:u.fullName,isRoot:u.isRoot}),a.getFinData()[u.id]=c.id,a.setFinInitData(u.id,c.id)}}function d(){return""!=e.teamId&&null==e.accountingEntityId}function p(e,t){var n=a.isRootAe(e.aeId),r=a.isRootAe(t.aeId),i=0;if(!e.hidden&&t.hidden)i=-1;else if(e.hidden&&!t.hidden)i=1;else if(n&&!r)i=-1;else if(!n&&r)i=1;else{var o=e.name.toLowerCase(),s=t.name.toLowerCase();o<s?i=-1:o>s&&(i=1)}return i}function m(){var t=null;e.teamId&&(t=a.getAeInitiallyAssignedToTeam(e.teamId).aeId);e.accountingEntityId=t}function f(e){i=!e}function b(e){var n;a.aboutToAssignForExistingAe()&&(n="assign"),a.aboutToCreateAe()&&(n=n?"assign_create":"create");var r=function(e,n){return t.open({templateUrl:"submitModalContent.html",controller:"SubmitModalCtrl",resolve:{params:function(){return{mode:e,params:n}}}}).result}(n,a.getAffectedTeamObjects());return r.then(function(){a.assignCreate().success(function(){e&&e()})}),r}e.getAeList=function(){var e=[],t=a.getExistingAes();for(var n in t)e.push(t[n]);return e.sort(p)},e.getTeamsAssignedToAe=function(e){return a.getTeamsInitiallyAssignedToAe(e)},e.onChangeTeam=function(){a.resetFinData(),a.removeUnusedNewAe(),i=!0,m()},e.onChangeAe=function(){if(a.resetFinData(),a.removeUnusedNewAe(),i=!0,e.teamId)if(d())if(a.aeLimitRiched())t.open({templateUrl:"noAddAeModalContent.html",controller:"AddAeModalCtrl"});else{var n=a.addNewAe(a.getTeamName(e.teamId));e.newAe=a.getNewAeById(n),a.getFinData()[e.teamId]=a.createTemporaryNewAeId(e.newAe.id),a.canTeamSwitchAe(e.teamId,void 0,f)}else a.getFinData()[e.teamId]=e.accountingEntityId,a.canTeamSwitchAe(e.teamId,e.accountingEntityId,f)},e.submit=function(){e.submitIsLocked()||(d()?b(function(){m()}):b())},e.submitIsLocked=function(){return n.isLocked()||a.isFinDataEmpty()||d()&&(!e.newAe.name||a.isRootAeSuspended())||!i},e.isNewAeAddingAvailable=function(){return d()&&!a.isFinDataEmpty()&&!a.isRootAeSuspended()},e.getAddAeHint=function(){return d()&&a.isRootAeSuspended()?a.getAddAeHint():""}}])},function(e,t,n){"use strict";n(15),n(14),n(39),n(31),angular.module("bpa-ui.financial-accounts.controllers").controller("financialAccountsCtrl",["$scope","$timeout","$modal","aeManage","lockSubmit","aeMessages",function(e,t,n,a,r,i){e.finData=a.getFinData(),e.newAeList=a.getNewAeList(),e.showHidden=!1,e.isLocked=r.isLocked,e.getAeName=a.getAeName,e.getAeHidden=a.getAeHidden,e.setFinInitData=a.setFinInitData,e.messagesService=i,e.createTemporaryNewAeId=a.createTemporaryNewAeId,e.getTeamName=a.getTeamName,e.getAddAeHint=a.getAddAeHint,e.submit=function(){var t;e.submitIsLocked()||(a.aboutToAssignForExistingAe()&&(t="assign"),a.aboutToCreateAe()&&(t=t?"assign_create":"create"),function(e,t,a){n.open({templateUrl:"submitModalContent.html",controller:"SubmitModalCtrl",resolve:{params:function(){return{mode:e,params:t}}}}).result.then(a)}(t,a.getAffectedTeamObjects(),function(){a.assignCreate()}))},e.shouldShowColumn=function(t){return!t||!a.getAeHidden(t)||e.showHidden},e.submitIsLocked=function(){return r.isLocked()||a.isFinDataEmpty()},e.addNewAE=function(t){if(e._finData[t]="",e.canAddNewAEForTeam(t))if(a.aeLimitRiched())n.open({templateUrl:"noAddAeModalContent.html",controller:"AddAeModalCtrl"});else{var r=a.getTeamName(t),i=a.addNewAe(r);e.finData[t]=a.createTemporaryNewAeId(i),a.countNewUsedAe(t)}},e.canAddNewAEForTeam=function(t){if(a.isRootAeSuspended())return!1;var n,r=a.extractNewAeId(e.finData[t]);return!r||(0==(n=a.getNewAeCountForTeam(r))||1<n)},e.onChangeAE=function(e){a.countNewUsedAe(e),a.removeUnusedNewAe()}}])},function(e,t,n){"use strict";n(15),n(31),angular.module("bpa-ui.financial-accounts.controllers").controller("SubmitModalCtrl",["$scope","$modalInstance","aeMessages","params",function(e,t,n,a){function r(){return"assign_create"==a.mode}e.messageData=n.formatObjectNameList(a.params),e.teamCount=a.params.length,e.ok=function(){t.close()},e.cancel=function(){t.dismiss("cancel")},e.isCreateMode=function(){return"create"==a.mode||r()},e.isAssignMode=function(){return"assign"==a.mode||r()}}])},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(17));if(n(18),n(195),(0,a.default)("TaxInfo-Show")){var r=angular.module("bpa-ui");r.requires.push("account-security-ui"),r.config(["$routeProvider","$locationProvider","TAX_INFO_URL_PART","SMF_CONFIG",function(e,t,n,a){e.when("/"+n,{templateUrl:"taxInfoIndex.html",controller:"taxInfoCtrl"}),t.html5Mode({enabled:!0}),a.group="tax",a.page="show-info"}])}},function(e,t,n){"use strict";n(13),n(26),n(6),n(12),n(25),n(74),angular.module("bpa-ui.controllers").controller("taxInfoCtrl",["$scope","$anchorScroll","$timeout","$location","$window","bpaScreenSize","bpaAlert","bpaTaxInfo","bpaFormValidation","bpaRouting","bpaGcModal","sensitiveZone",function(e,t,n,a,r,i,o,s,c,l,u,d){var p="tax-info-form",m="vat-info-form",f="return-to-disbursements",b=!1,g=!1,h="show";function v(t){b=!0,s.get().then(function(n){e.pageData=n,t&&y()},function(t){return e.pageDataError=t}).finally(function(){return b=!1})}function y(){switch(a.hash()){case f:g=!0;case p:e.showTaxInfoForm();break;case m:e.pageData&&e.pageData.vatInfo&&!e.pageData.vatInfo.isPresent&&e.showVatInfoForm()}}function k(e){i.is("xs","sm","md")&&t(e)}function A(){t("alert-messages")}angular.extend(e,{isTaxInfo:function(){return h===p},isVatInfo:function(){return h===m},vatInfoForm:{},taxInfoForm:{},taxInfoCallbacks:{success:function(){h="show",A(),g?r.location=l.get("page-disbursement-methods"):v()},error:function(){A()}},vatInfoCallbacks:{success:function(){h="show",A(),v()},error:function(){A()}},shouldBlockContent:function(){return(b||angular.isFunction(e.taxInfoForm.isBlocked)&&e.taxInfoForm.isBlocked()||angular.isFunction(e.vatInfoForm.isBlocked)&&e.vatInfoForm.isBlocked())&&!d.isModalShown()},showTaxInfoForm:function(){h=p,n(function(){return k(h)}),angular.isFunction(e.taxInfoForm.resetValues)&&e.taxInfoForm.resetValues()},cancelTaxInfoForm:function(){k(h="show"),g?r.location=l.get("page-disbursement-methods"):e.taxInfoForm.triedToSubmit()&&v()},showVatInfoForm:function(){h=m,n(function(){return k(h)},100),angular.isFunction(e.vatInfoForm.resetValues)&&e.vatInfoForm.resetValues()},cancelVatInfoForm:function(){k(h),h="show",e.vatInfoForm.triedToSubmit()&&v()},removeVatInfo:function(){u.open("bpa-vat-info-removal-warning",{vatInfo:e.pageData.vatInfo,onClose:function(e){e&&(o.clearMessages(),b=!0,s.removeVat().then(function(e){o.addAlertMessages(e.messages),A(),v()},function(e){e&&e.messages.length>0?o.addAlertMessages(e.messages):o.addFatalErrorMessage(),b=!1,A()}))}})}}),e.pageData?y():v(!0)}])},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(17));if(n(18),n(197),n(199),n(203),(0,a.default)("TaxInfo-VatInterstitial")){var r=angular.module("bpa-ui");r.requires.push("bpa-ui.vat-info.factories"),r.requires.push("bpa-ui.vat-info.controllers"),r.requires.push("bpa-ui.vat-info.directives"),r.config(["$routeProvider",function(e){var t={templateUrl:"VatMain.html",controller:"vatInfoMainCtrl"};e.when("/",t).when("/skip",{templateUrl:"VatSkip.html",controller:"vatInfoSkipCtrl"}).when("/edit",{templateUrl:"VatEdit.html",controller:"vatInfoEditCtrl"}).otherwise(t)}])}},function(e,t,n){"use strict";n(53);var a=n(198);a.keys().forEach(a)},function(e,t,n){var a={"./base.js":53,"./vat-ctrl-utils.js":54,"./vat-form.js":55};function r(e){return n(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=198},function(e,t,n){"use strict";n(41);var a=n(200);a.keys().forEach(a)},function(e,t,n){var a={"./base.js":41,"./bpa-vat-form.js":201,"./bpa-vat-input.js":202};function r(e){return n(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=200},function(e,t,n){"use strict";n(41),n(55),angular.module("bpa-ui.vat-info.directives").directive("bpaVatForm",["vatForm",function(e){return{restrict:"A",link:function(t,n,a){e.setSubmitUrl(a.actionUrl),e.setFormName(a.name)}}}])},function(e,t,n){"use strict";n(41),n(55),angular.module("bpa-ui.vat-info.directives").directive("bpa-vat-input",["vatForm",function(e){return{require:"ngModel",restrict:"A",link:function(t,n,a,r){e.addInput(a.bpaVatInput,a.ngModel,r)}}}])},function(e,t,n){"use strict";n(42);var a=n(204);a.keys().forEach(a)},function(e,t,n){var a={"./base.js":42,"./vat-Info-main-ctrl.js":205,"./vat-info-edit-ctrl.js":206};function r(e){return n(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=204},function(e,t,n){"use strict";n(42),n(13),n(37),n(54),angular.module("bpa-ui.vat-info.controllers").controller("vatInfoMainCtrl",["$scope","$window","bpaTaxInfo","cookieManager","vatCtrlUtils",function(e,t,n,a,r){r.setDefaults(e,t,a,n),e.skipEntry=function(){e.locked=!0,e.hasError=!1,n.skipVat().then(function(n){n.data&&n.data.status&&r.redirectToReturnUrl(t),e.locked=!1,e.hasError=!0},function(){e.locked=!1,e.hasError=!0})}}])},function(e,t,n){"use strict";n(42),n(13),n(37),n(54),angular.module("bpa-ui.vat-info.controllers").controller("vatInfoEditCtrl",["$scope","$window","bpaTaxInfo","eoModal","cookieManager","vatCtrlUtils",function(e,t,n,a,r,i){var o={};function s(){e.locked=!0,n.saveVat(e.vatId).then(function(n){n.data&&n.data.status?i.redirectToReturnUrl(t):(e.locked=!1,n.data&&n.data.messages?c(n.data.messages[0]):c())},function(){e.locked=!1,c()})}function c(e){(o={})[e||"net_error"]=!0}e.getErrors=function(){return o},e.locked=!1,i.setDefaults(e,t,r,n),e.isLocked=function(){return e.locked||e.vat_info.$invalid},e.submit=function(){o={},!e.hasOwnProperty("vatIdIsCorrect")||e.vatIdIsCorrect?s():e.vatIdIsCorrect||a.custom({locals:{_injectedProperties:{saveLabel:"submit"}},size:"sm",keyboard:!1,controller:"yesNoModalController",templateUrl:"VatFormatWarning.html"}).result.then(function(){s()})}}])},function(e,t,n){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(n(17));if(n(18),n(208),n(209),n(210),(0,a.default)("Payments-Disburse","Payments-Disburse-Confirmation","Payments-Disburse-Confirmation-WithAdjustment")){var r=angular.module("bpa-ui");r.requires.push("account-security-ui"),r.config(["$routeProvider","$locationProvider","SMF_CONFIG",function(e,t,n){var a=Applet.getVar("bpa_ui_disburse_data"),r={templateUrl:"disbursePage.html",controller:"disburseCtrl",controllerAs:"disburse"};e.when("/:aeId?/disburse",angular.extend({title:a.titles.disburse},r)).when("/:aeId/disburse/:paymentTrxId",angular.extend({title:a.titles.confirmation},r)).when("/:aeId/disburse/:paymentTrxId-:adjustmentTrxId",angular.extend({title:a.titles.confirmation},r)),t.html5Mode({enabled:!0}),n.group="withdraw",n.page="index"}]),r.run(["$rootScope","$document",function(e,t){e.$on("$routeChangeSuccess",function(e,n){n.$$route&&n.$$route.title&&(t[0].title=n.$$route.title)})}])}},function(e,t,n){"use strict";function a(e,t,n,a,r,i,o){this.pageData=Applet.getVar("bpa_ui_disburse_data"),r.get(o)||r.set(o,e.aeId),this.isForm=function(){return angular.isUndefined(e.paymentTrxId)},this.getTitle=function(){return this.isForm()?this.pageData.titles.disburse:this.pageData.titles.confirmation},this.onSubmit=function(e){angular.extend(this.pageData,{accountInfo:e.accountInfo,withdrawalResult:e.withdrawalResult});var n="/"+e.accountInfo.id+"/disburse/"+e.withdrawalResult.payment.id;e.withdrawalResult.adjustment&&(n+="-"+e.withdrawalResult.adjustment.id),t.path(n)},this.getCancelUrl=function(){return a.getDisbursementMethodsPageUri()},this.onSave=function(){n.print()},this.isForm()&&i.create(i.SUBLOCATION_PAGE).impression(i.LABEL_PAGE_LOAD)}n(2),n(4),n(3),angular.module("bpa-ui.controllers").controller("disburseCtrl",a),a.$inject=["$routeParams","$location","$window","bpaUrl","bpaVars","bpaEventTrackerFactory","ACCOUNTING_ENTITY_KEY"]},function(e,t,n){"use strict";n(2),n(6),n(4),n(36),n(26),n(3);var a=n(77);angular.module("bpa-ui.directives").directive("disburseForm",["bpaOauth2Http","$timeout","$anchorScroll","bpaUrl","bpaVars","bpaAlert","bpaEventTrackerFactory","bpaValidationErrors","bpaFormValidation","sensitiveZone","ACCOUNTING_ENTITY_KEY",function(e,t,n,r,i,o,s,c,l,u,d){return{restrict:"E",templateUrl:"disburseForm.html",scope:{accountInfo:"<",withdrawalOptions:"<",blockTarget:"@",onSubmit:"&?",onCancel:"&?",cancelUrl:"@",isShown:"<"},controllerAs:"vm",controller:["$scope","$element",function(p,m){var f=this,b=!1,g=void 0,h=s.create("get_paid_now");function v(e){g=[],angular.forEach(e||{},function(e){g.push(e)}),1===g.length&&(p.form.selectedPayment=g[0])}function y(e,a){var r=f.getAeRid();a?(a.messages&&a.messages.length>0&&o.addAlertMessages(a.messages),a.errors&&a.errors.length>0&&o.addAlertMessages(a.errors.map(function(e){return{message:e,type:"danger",title:"",namespace:"",aeRid:r}}))):o.addFatalErrorMessage(r),t(function(){n("alert-messages"),function(e){var t=o.getAlertMessages(f.getAeRid()).filter(function(e){return"success"!==e.type}).map(function(e){return e.message});t.length&&h.messages(s.LABEL_ERROR_PROCESSING,t,e)}(e)})}p.form={withdrawalMode:"whole"},p.const={AMOUNT_WHOLE:"whole",AMOUNT_PARTIAL:"partial"},p.blockTarget||(p.blockTarget="body"),angular.extend(f,{setContentBlock:function(e){b=e},isContentBlocked:function(){return!u.isModalShown()&&b},getWithdrawalOptionsArray:function(){return g},getBalance:function(){return p.accountInfo&&p.accountInfo.balance||0},hasNegativeBalance:function(){return p.accountInfo&&p.accountInfo.balance<0},getSelectedPayment:function(){return p.form.selectedPayment},getLimit:function(){var e=f.getSelectedPayment();return e&&e.withdrawalLimits.max},getLimitHint:function(){var e=f.getSelectedPayment();return e&&e.withdrawalLimits.hint},getMinLimit:function(){var e=f.getSelectedPayment();return e?Math.abs(f.getFee())+e.withdrawalLimits.min:NaN},hasLimit:function(){return Boolean(f.getLimit())},getMaxAmount:function(){return f.getSelectedPayment()?f.hasLimit()?Math.min(f.getLimit(),f.getBalance()):f.getBalance():0},getFee:function(){var e=f.getSelectedPayment();return e?-e.fee.fixed:0},hasFeeNote:function(){return Boolean(f.getFeeNote())},getFeeNote:function(){var e=f.getSelectedPayment();return e?e.fee.note:""},getSelectedAmount:function(){return f.isPartialAmount()?parseFloat(p.form.partialAmount):f.getMaxAmount()},getTotal:function(){if(f.getSelectedPayment()){var e=f.getFee()+f.getSelectedAmount();return e>0?e:0}return 0},hasFxRate:function(){return Boolean(f.getFxRateData())},getFxRateData:function(){var e=f.getSelectedPayment();return e?e.currency:null},hasRemittanceInfo:function(){var e=f.getSelectedPayment();return e&&void 0!==e.remittanceInfo},getPaymentDescription:function(){return f.getSelectedPayment()?f.getSelectedPayment().name:""},getRemittanceInfo:function(){return f.hasRemittanceInfo()?f.getSelectedPayment().remittanceInfo:""},isPartialAmount:function(){return"partial"===p.form.withdrawalMode},getAeRid:function(){return i.get(d)},submitForm:function(n){if(n.preventDefault(),n.stopPropagation(),p.form.selectedPayment){var i={selected_amount:p.form.withdrawalMode,upm_type:p.form.selectedPayment.code};h.click("get_paid_now",i),l.revalidateAllFields(p.disburseForm),p.disburseForm.$valid?(f.setContentBlock(!0),o.clearMessages(f.getAeRid()),e.post(r.baseUrl(!0)+"disburse",{disburseForm:{amount:f.getSelectedAmount(),mopRid:p.form.selectedPayment.id,remittanceInfo:f.hasRemittanceInfo()?p.form.remittanceInfo:null,overrideRemittanceInfo:!!f.hasRemittanceInfo()&&Boolean(p.form.overrideRemittanceInfo)}}).then(function(e){y(i,e.data),e.data&&e.data.status&&(h.impression("success_event_disbursed",i,a.SUBLOCATION_CONFIRMATION),angular.isFunction(p.onSubmit)&&p.onSubmit({data:e.data}))},function(){y(i)}).finally(function(){f.setContentBlock(!1)})):t(function(){h.messages(s.LABEL_ERROR_VALIDATION,c.extract(m[0]),i)})}else h.messages(s.LABEL_ERROR_VALIDATION,c.extract(m[0],".form-group .form-message.form-error:not(.ng-hide)"))},cancelForm:function(e){h.click(s.LABEL_CANCEL),angular.isFunction(p.onCancel)&&(e.preventDefault(),e.stopPropagation(),p.onCancel())}}),v(p.withdrawalOptions),p.$watch("form.withdrawalMode",function(e){"whole"===e&&(p.form.partialAmount=""),p.disburseForm.partialAmount.$setPristine()}),p.$watch("withdrawalOptions",v),p.$watch("form.selectedPayment",function(){p.form.remittanceInfo=f.getRemittanceInfo(),p.disburseForm.partialAmount.$setPristine(),p.disburseForm.remittanceInfo.$setPristine()}),p.$watch("isShown",function(e){e&&h.impression("get_paid_now_impression")})}]}}])},function(e,t,n){"use strict";var a=n(77);function r(e,t){var n=this,r=t.create(a.SUBLOCATION_CONFIRMATION);angular.extend(n,{getFee:function(){return e.withdrawalResult&&e.withdrawalResult.adjustment?-e.withdrawalResult.adjustment.amount:0},getTotal:function(){return e.withdrawalResult&&e.withdrawalResult.payment.amount-n.getFee()},closeReceipt:function(t){r.click("done"),angular.isFunction(e.onClose)&&(t.preventDefault(),t.stopPropagation(),e.onClose())},hasOnSave:function(){return angular.isFunction(e.onSave)},saveReceipt:function(t){r.click("print"),n.hasOnSave()&&(t.preventDefault(),t.stopPropagation(),e.onSave())},hasFxRate:function(){return Boolean(n.getFxRateData())},getFxRateData:function(){return e.withdrawalResult&&e.withdrawalResult.mop&&e.withdrawalResult.mop.currency?e.withdrawalResult.mop.currency:null}})}angular.module("bpa-ui.directives").directive("disburseConfirmation",function(){return{restrict:"E",templateUrl:"disburseConfirmation.html",scope:{accountInfo:"<",withdrawalResult:"<",onClose:"&?",onSave:"&?",closeUrl:"@",saveLabel:"@"},controllerAs:"vm",controller:r}}),r.$inject=["$scope","bpaEventTrackerFactory"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(n(78)),r=n(213),i=c(n(215)),o=c(n(216)),s=c(n(217));function c(e){return e&&e.__esModule?e:{default:e}}t.default=angular.module("fe.components.upAddressAutocomplete",[a.default.name,i.default.name,s.default.name,o.default.name]).directive(r.upAddressAutocomplete.ngName,r.upAddressAutocomplete)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CountriesStatesDataService=c,t.TimezonesDataService=l,t.CountryDataService=u,t.AddressAutocompleteDataService=d;var a=void 0,r=void 0,i=void 0,o=void 0;function s(){a="/freelancers/api/v2/data/countries",r="/freelancers/api/v2/address/autocomplete?query={query}&countryCode={country}",i="/freelancers/api/v2/address/details?placeId={placeId}&countryCode={country}",o="/freelancers/api/v2/city/autocomplete?query={query}&countryCode={country}"}function c(){var e={"United States":[{id:"AA",name:"AA"},{id:"AE",name:"AE"},{id:"AL",name:"AL"},{id:"AK",name:"AK"},{id:"AP",name:"AP"},{id:"AZ",name:"AZ"},{id:"AR",name:"AR"},{id:"CA",name:"CA"},{id:"CO",name:"CO"},{id:"CT",name:"CT"},{id:"DE",name:"DE"},{id:"DC",name:"DC"},{id:"FL",name:"FL"},{id:"GA",name:"GA"},{id:"HI",name:"HI"},{id:"ID",name:"ID"},{id:"IL",name:"IL"},{id:"IN",name:"IN"},{id:"IA",name:"IA"},{id:"KS",name:"KS"},{id:"KY",name:"KY"},{id:"LA",name:"LA"},{id:"ME",name:"ME"},{id:"MD",name:"MD"},{id:"MA",name:"MA"},{id:"MI",name:"MI"},{id:"MN",name:"MN"},{id:"MS",name:"MS"},{id:"MO",name:"MO"},{id:"MT",name:"MT"},{id:"NE",name:"NE"},{id:"NV",name:"NV"},{id:"NH",name:"NH"},{id:"NJ",name:"NJ"},{id:"NM",name:"NM"},{id:"NY",name:"NY"},{id:"NC",name:"NC"},{id:"ND",name:"ND"},{id:"OH",name:"OH"},{id:"OK",name:"OK"},{id:"OR",name:"OR"},{id:"PA",name:"PA"},{id:"RI",name:"RI"},{id:"SC",name:"SC"},{id:"SD",name:"SD"},{id:"TN",name:"TN"},{id:"TX",name:"TX"},{id:"UT",name:"UT"},{id:"VT",name:"VT"},{id:"VA",name:"VA"},{id:"WA",name:"WA"},{id:"WV",name:"WV"},{id:"WI",name:"WI"},{id:"WY",name:"WY"}],Canada:[{id:"AB",name:"AB"},{id:"BC",name:"BC"},{id:"MB",name:"MB"},{id:"NB",name:"NB"},{id:"NL",name:"NL"},{id:"NT",name:"NT"},{id:"NS",name:"NS"},{id:"NU",name:"NU"},{id:"ON",name:"ON"},{id:"PE",name:"PE"},{id:"QC",name:"QC"},{id:"SK",name:"SK"},{id:"YT",name:"YT"}]};return{setData:function(t){e=t},getStatesByCountry:function(t){return e[t]},isStateRequired:function(e){if(!e)return!1;return"United States"===e||"Canada"===e},hasStatesList:function(t){return t&&angular.isString(t)&&angular.isDefined(e[t])}}}function l(){var e=void 0;return{setData:function(t){e=t},fetchAll:function(){return e}}}function u(e,t){return{fetchAll:n,getCountryByShortCode:function(e){t.defer();n().then(function(e){})}};function n(t){var n=a;return t&&(n+="?all=true"),e.get(n,{cache:!0}).then(r)}function r(e){return e.data}}function d(e,t){return{getAddressesByRequest:function(t,n){var a=r.replace("{query}",t).replace("{country}",n);return e.get(a,{cache:!0}).then(function(e){return e.data&&e.data.predictions})},getAddressDetails:function(t,n){var a=i.replace("{placeId}",t).replace("{country}",n);return e.get(a,{cache:!0}).then(function(e){return e.data&&e.data.result})},getCitiesByRequest:function(t,n){var a=o.replace("{query}",t).replace("{country}",n);return e.get(a,{cache:!0}).then(function(e){return e.data&&e.data.predictions})}}}s.$inject=[],c.ngName="CountriesStatesDataService",l.ngName="TimezonesDataService",u.ngName="CountryDataService",u.$inject=["$http","$q"],d.ngName="AddressAutocompleteDataService",d.$inject=["$http","$q"],t.default=angular.module("fe.components.country",[]).run(s).factory(u.ngName,u).factory(c.ngName,c).factory(l.ngName,l).factory(d.ngName,d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.upAddressAutocomplete=o;var a=n(78),r=function(e){return e&&e.__esModule?e:{default:e}}(n(214));var i=function(){return/[^\x20-\x7E]+/g};function o(){return{restrict:"EA",template:r.default,scope:{addressString:"=",countryCode:"=",isLoading:"=",onNoStreetNumberError:"&?",onNotFoundError:"&?",onSelect:"&?"},controller:s,controllerAs:"vm",bindToController:!0,link:function(e,t,n,a){a.isForInvoice="true"===n.isForInvoice,e.$watch("vm.addressString",function(e){e&&angular.isString(e)&&(a.addressString=e.replace(i(),""))})}}}function s(e){var t=this;function n(e,t,n){var a=n||"long_name",r="";return e&&e.address_components&&angular.isArray(e.address_components)&&e.address_components.forEach(function(e){-1!==e.types.indexOf(t)&&(r=e[a])}),r}function a(){t.address.street="",t.address.city="",t.address.state="",t.address.zip=""}t.address={},t.isLoading=!1,t.autoCompleteIsAvaliable=!0,t.noStreetNumber=!1,t.addressString="",t.countryCode=t.countryCode||"US",t.getAddresses=function(n){if(n)return t.noStreetNumber=!1,e.getAddressesByRequest(n,t.countryCode).then(function(e){return t.autoCompleteIsAvaliable=!0,e&&!e.length&&angular.isFunction(t.onNotFoundError)&&t.onNotFoundError(),e.map(function(e){return{description:e.description,place_id:e.place_id}})},function(){a()})},t.selectAddress=function(){return t.isLoading=!0,t.noStreetNumber=!1,e.getAddressDetails(t.addressString&&t.addressString.place_id,t.countryCode).then(function(e){t.autoCompleteIsAvaliable=!0,function(e){var r=n(e,"street_number"),i=n(e,"postal_code");if(t.noStreetNumber=!r,t.noStreetNumber)a(),angular.isFunction(t.onNoStreetNumberError)&&t.onNoStreetNumberError();else{t.address.street=(r?r+" ":"")+n(e,"route");var o=n(e,"locality"),s=n(e,"postal_town"),c=n(e,"administrative_area_level_2"),l=n(e,"administrative_area_level_1","short_name");o?(t.address.city=o,t.address.state=s||l):s?(t.address.city=s,t.address.state=""):(t.address.city=c,t.address.state=s||l),t.address.zip=i,e.geometry&&e.geometry.location&&(t.address.location=e.geometry.location),t.address.cityData=t.address.city,angular.isFunction(t.onSelect)&&t.onSelect({address:t.address})}}(e)},function(){a()}).finally(function(){t.isLoading=!1}),!1}}o.ngName="upAddressAutocomplete",o.$inject=[],s.$inject=[a.AddressAutocompleteDataService.ngName]},function(e,t){var n,a=window.angular;try{n=a.module(["ng"])}catch(e){n=a.module("ng",[])}var r='<div class="input-group">\n<div data-eo-tokenizer data-ng-model="vm.selectedSkills" data-placeholder="Skills" data-use-typeahead="true">\n<input autocomplete="off" class="form-control" id="addressString" placeholder="Start typing your address" eo-typeahead="address as address.description for address in vm.getAddresses($viewValue)" ng-model="vm.addressString" typeahead-wait-ms="300" typeahead-on-select="vm.selectAddress()" typeahead-loading="vm.loadingLocations" typeahead-no-results="vm.noAutocompleteResults" ng-class="{\'ng-dirty ng-invalid\': vm.addressString && (vm.noAutocompleteResults || vm.noStreetNumber)}">\n</div>\n</div>\n',i="upAddressAutocomplete.tmpl.html",o=a.element(window.document).injector();o?o.get("$templateCache").put(i,r):n.run(["$templateCache",function(e){e.put(i,r)}]),e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="fe.components.templates";try{angular.module(a)}catch(e){angular.module(a,[])}t.default=angular.module(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"components.core.typeahead"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"components.core.tokenizer"}},function(e,t,n){"use strict";n(219),n(239),n(246),n(249),n(252),n(254);var a=n(23),r=angular.module((0,a.getModuleName)());r.requires.push("bpa-common.constants"),r.requires.push("bpa-common.factories"),r.requires.push("bpa-common.directives"),r.requires.push("bpa-common.interceptors")},function(e,t,n){"use strict";n(32);var a=n(220);a.keys().forEach(a)},function(e,t,n){var a={"./base.js":32,"./bpa-event-tracking.js":221,"./bpa-image-asset.js":237,"./bpa-stylesheet-asset.js":238};function r(e){return n(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=220},function(e,t,n){"use strict";var a=n(32);n(56),a.CheckedModule.get("bpa-common.directives").directive("bpaEventTracking",c),c.$inject=["$parse","bpaEventBinder"];var r="tracking",i="trackingLabel",o="trackingEvent",s="trackingSublocation";function c(e,t){return{restrict:"A",require:{trackingDirective:"?"+r,parentEventTracking:"?^^bpaEventTracking"},link:function(n,a,c,l){if(null===l.trackingDirective){var u=c.bpaEventTracking||"click";t.listen({event:u,element:a[0],data:function(){var t=angular.extend(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},o,u),function(t,n){var a={};return angular.forEach(n,function(n,c){s===c||i===c||o===c?a[c]=n:c.substring(0,r.length)===r&&(a[c]=e(n)(t))}),a}(n,c));return!t[s]&&l.parentEventTracking&&(t[s]=l.parentEventTracking.getAttr(s)),t}})}},controller:["$attrs",function(e){this.getAttr=function(t){return e[t]}}]}}},function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="undefined"==typeof Promise?n(79).Promise:Promise;Object.defineProperty(t,"__esModule",{value:!0});var o=n(57);t.EVENT_DEFAULT="default";var s=function(){function e(t,n){r(this,e),this.element=t,this.callback=n}return a(e,[{key:"init",value:function(){}}]),e}();t.Listener=s;var c=function(){function e(t,n){r(this,e),this.logger=t,this.tracker=n,this.bindings={}}return a(e,[{key:"register",value:function(e,t){this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push(t)}},{key:"listen",value:function(e){var n=this,a=e.element,r=e.data,s=function(){return r instanceof Function?r():r};return new i(function(r){(n.bindings[e.event]||n.bindings[t.EVENT_DEFAULT]||[]).forEach(function(e){return new e(a,function(){return n.tracker.track(s())}).init()}),n.logger.log(o.LogType.EVENT_REGISTERED,s()),r()})}}]),e}();t.Binder=c},function(e,t,n){"use strict";var a,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(e){if(a===setTimeout)return setTimeout(e,0);if((a===o||!a)&&setTimeout)return a=setTimeout,setTimeout(e,0);try{return a(e,0)}catch(t){try{return a.call(null,e,0)}catch(t){return a.call(this,e,0)}}}!function(){try{a="function"==typeof setTimeout?setTimeout:o}catch(e){a=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l,u=[],d=!1,p=-1;function m(){d&&l&&(d=!1,l.length?u=l.concat(u):p=-1,u.length&&f())}function f(){if(!d){var e=c(m);d=!0;for(var t=u.length;t;){for(l=u,u=[];++p<t;)l&&l[p].run();p=-1,t=u.length}l=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function b(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new b(e,t)),1!==u.length||d||c(f)},b.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var a,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":r(window))&&(a=window)}e.exports=a},function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){r(this,e),this.subscribers={}}return a(e,[{key:"publish",value:function(e){if(this.subscribers[e.type])return this.subscribers[e.type].forEach(function(t){return t.handle(e)}),this}},{key:"subscribe",value:function(e,t){return this.subscribers[t]||(this.subscribers[t]=[]),-1===this.subscribers[t].indexOf(e)&&this.subscribers[t].push(e),this}}]),e}();t.EventBus=i;var o=function(){function e(){r(this,e)}return a(e,[{key:"handle",value:function(e){this.bus&&this.isHandleable(e)&&this.bus.publish(this.getEvent(e))}}]),e}();t.AbstractPublisher=o},function(e,t,n){"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.APPLET_KEY="event_data";var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"getCookie",value:function(e){var t=document.cookie.split(/;\s*/).map(function(e){return e.split("=",2)}).filter(function(t){return t[0]===e});return t.length?decodeURI(t[0][1]):null}},{key:"isTouchScreen",value:function(){return!!("ontouchstart"in document.documentElement||window.DocumentTouch&&document instanceof DocumentTouch)}},{key:"getBrowserPayload",value:function(){return{recognized:this.getCookie("recognized"),touch_screen:this.isTouchScreen()}}},{key:"getUserContextData",value:function(){var e=window.Applet;return{user_id:e&&e.getUser()&&e.getUser().getNid()||void 0,organization_uid:e&&e.getOrganization()&&e.getOrganization().getUid()||void 0,visitor_id:e&&e.getVisitorId()||void 0}}},{key:"getBackendPayload",value:function(){return window.Applet&&window.Applet.getVar(t.APPLET_KEY)||{}}},{key:"getData",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return a({},n.reduce(function(e,t){return a(e,t)},{}),e)}},{key:"merge",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Object.assign.apply(null,t.concat([{}]).reverse());return Object.keys(r).reduce(function(e,n){return a(e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,t.reduce(function(e,t){return t&&void 0!==t[n]?t[n]:e},r[n])))},{})}},{key:"handle",value:function(e){var t=this.getBackendPayload(),n=this.getBrowserPayload(),a=this.getUserContextData();this.send(this.merge(t,e,{data:this.getData(e.data,n,a,t.data)}))}}]),e}();t.BrowserTracker=i},function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var r="undefined"==typeof Promise?n(79).Promise:Promise;Object.defineProperty(t,"__esModule",{value:!0});var i=n(57),o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bus=t,this.logger=n,this.publishers=[],this.subscribers={}}return a(e,[{key:"addPublisher",value:function(e){return e.bus=this.bus,this.publishers.push(e),this}},{key:"addSubscriber",value:function(e,t){var n=this;return t.forEach(function(t){n.subscribers[t]||(n.subscribers[t]=[]),-1===n.subscribers[t].indexOf(e)&&(n.subscribers[t].push(e),n.bus.subscribe(e,t))}),this}},{key:"track",value:function(e){var t=this;return new r(function(n){t.publishers.forEach(function(t){t.handle(e)}),t.logger.log(i.LogType.EVENT_TRACKED,e),n()})}}]),e}();t.Tracker=o},function(e,t,n){"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(8);t.EVENT_GTM="gtm";var l=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,c.AbstractPublisher),r(n,[{key:"isHandleable",value:function(e){return e.event&&(!Array.isArray(e.trackers)||!e.trackers.length||e.trackers.indexOf(t.EVENT_GTM)>-1)}},{key:"getEvent",value:function(e){return{type:t.EVENT_GTM,gtmEvent:e.gtmEvent,event:e.event,sublocation:e.sublocation,label:e.label||e.element,value:e.value,data:e.data}}}]),n}();t.GtmPublisher=l;var u=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,c.AbstractPublisher),r(n,[{key:"isHandleable",value:function(e){return e.trackingEvent&&(1==e.trackingGtm||!e.hasOwnProperty("trackingGtm"))}},{key:"getEvent",value:function(e){return{type:t.EVENT_GTM,gtmEvent:e.trackingGtmEvent,event:e.trackingEvent,sublocation:e.trackingSublocation,label:e.trackingLabel||e.trackingElement,value:e.trackingValue,data:e.trackingData}}}]),n}();t.GtmLegacyPublisher=u;var d=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,c.BrowserTracker),r(t,[{key:"normalize",value:function(e){return a({},e.data,{event:e.gtmEvent||"ga",eventAction:e.event||" ",eventCategory:e.sublocation||" ",eventLabel:e.label||" ",eventValue:e.value||" "})}},{key:"send",value:function(e){var t=window.dataLayer;t&&t.push(this.normalize(e))}}]),t}();t.GtmTracker=d},function(e,t,n){"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(8);t.EVENT_OLOG="olog";var l=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,c.AbstractPublisher),r(n,[{key:"isHandleable",value:function(e){return e.event&&(!Array.isArray(e.trackers)||!e.trackers.length||e.trackers.indexOf(t.EVENT_OLOG)>-1)}},{key:"getEvent",value:function(e){return{type:t.EVENT_OLOG,event:e.event,location:e.location,sublocation:e.sublocation,label:e.label||e.element,data:e.data}}}]),n}();t.OlogPublisher=l;var u=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,c.AbstractPublisher),r(n,[{key:"isHandleable",value:function(e){return!!e.ologEvent||e.trackingEvent&&(1==e.trackingOlog||!e.hasOwnProperty("trackingOlog"))}},{key:"getEvent",value:function(e){return{type:t.EVENT_OLOG,event:e.ologEvent||e.trackingEvent,location:e.ologLocation||e.trackingLocation,sublocation:e.ologSublocation||e.trackingSublocation,label:e.trackingLabel||e.trackingElement,referrer:e.ologReferrer,data:e.ologData||e.trackingData}}}]),n}();t.OlogLegacyPublisher=u;var d=function(e){function t(e,n){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.oLog=e,a.eoModelFactory=n,a}return s(t,c.BrowserTracker),r(t,[{key:"getBrowserPayload",value:function(){return a(function e(t,n,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,a)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(a):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getBrowserPayload",this).call(this),{userAgent:window.navigator.userAgent,language:window.navigator.language,platform:window.navigator.platform})}},{key:"getData",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return(Array.isArray(e)&&e.length?e:[e]).map(function(e){return a({},n.reduce(function(e,t){return a(e,t)},{}),e)})}},{key:"send",value:function(e){var t=this.eoModelFactory.get("Event",{event:e.event,location:e.location,referrer:e.referrer,sublocation:e.sublocation,data:e.data.map(function(t){return a({event_label:e.label},t)}),time:+new Date});return this.oLog.event(t)}}]),t}();t.OlogTracker=d},function(e,t,n){"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(8);t.EVENT_SNOWPLOW="snowplow";var l=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,c.AbstractPublisher),r(n,[{key:"isHandleable",value:function(e){return e.event&&(!Array.isArray(e.trackers)||!e.trackers.length||e.trackers.indexOf(t.EVENT_SNOWPLOW)>-1)}},{key:"getEvent",value:function(e){return{type:t.EVENT_SNOWPLOW,event:e.event,event_label:e.label||e.element,location:e.location,sublocation:e.sublocation,value:e.value,data:e.data}}}]),n}();t.SnowplowPublisher=l;var u=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,c.AbstractPublisher),r(n,[{key:"isHandleable",value:function(e){return e.trackingEvent&&(1==e.trackingSnowplow||!e.hasOwnProperty("trackingSnowplow"))}},{key:"getEvent",value:function(e){return{type:t.EVENT_SNOWPLOW,event:e.trackingEvent,event_label:e.trackingLabel||e.trackingElement,location:e.trackingLocation,sublocation:e.trackingSublocation,value:e.trackingValue,data:e.trackingData}}}]),n}();t.SnowplowLegacyPublisher=u;var d=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,c.BrowserTracker),r(t,[{key:"getPayload",value:function(e){return a(Object.keys(e).filter(function(e){return-1===["type","data"].indexOf(e)}).reduce(function(t,n){return a(t,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,e[n]))},{}),e.data)}},{key:"send",value:function(e){var t=window.dataLayer;t&&t.push({event_payload:void 0},{event:"snowplow",event_payload:this.getPayload(e)})}}]),t}();t.SnowplowTracker=d},function(e,t,n){"use strict";function a(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),a(n(232)),a(n(233)),a(n(234)),a(n(235)),a(n(236))},function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,a){var i,o=arguments.length,s=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),s=n(28),c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Listener),a(t,[{key:"init",value:function(){this.element.addEventListener("click",this.callback)}}]),t}();c=i([s.bind("click")],c),t.ClickListener=c},function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,a){var i,o=arguments.length,s=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),s=n(28),c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Listener),a(t,[{key:"init",value:function(){this.callback()}}]),t}();c=i([s.bind(o.EVENT_DEFAULT)],c),t.DefaultListener=c},function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,a){var i,o=arguments.length,s=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),s=n(28),c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Listener),a(t,[{key:"init",value:function(){var e=this;this.element.addEventListener("keydown",function(t){13===t.keyCode&&e.callback()})}}]),t}();c=i([s.bind("enter")],c),t.EnterListener=c},function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o,s=function(e,t,n,a){var i,o=arguments.length,s=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var c=n(8),l=n(28),u=function(){function e(){i(this,e),this.observations=[],this.observer=new IntersectionObserver(this.callback.bind(this),this.getOptions())}return a(e,[{key:"getOptions",value:function(){return{root:null,rootMargin:"0px",threshold:function(){for(var e=[],t=0;t<=100;t++)e.push(t/100);return e}()}}},{key:"callback",value:function(e){var t=this;e.forEach(function(e){for(var n=0;n<t.observations.length;n++)e.target===t.observations[n].element&&t.observations[n].callback(100*e.intersectionRatio)})}},{key:"observe",value:function(e,t){this.observations.push({element:e,callback:t}),this.observer.observe(e)}},{key:"unobserve",value:function(e){for(var t=0;t<this.observations.length;t++)if(e===this.observations[t].element){this.observer.unobserve(e),this.observations.splice(t,1);break}}}]),e}();t.IntersectionObserverAdapter=u;var d=o=function(e){function t(){i(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.checking=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.Listener),a(t,[{key:"init",value:function(){this.observer=o.getObserver(),this.target=this.getTarget(),this.observer.observe(this.target,this.update.bind(this))}},{key:"getTarget",value:function(){return"tracking"===this.element.tagName.toLowerCase()?this.element.parentElement:this.element}},{key:"update",value:function(e){this.ratio=e,this.check()}},{key:"check",value:function(){var e=this;this.checking||(this.checking=!0,setTimeout(function(){e.ratio>0&&e.trigger(),e.checking=!1},1e3))}},{key:"trigger",value:function(){this.callback(),this.observer.unobserve(this.target)}}],[{key:"getObserver",value:function(){return this.observer||(this.observer=new u),this.observer}}]),t}();d=o=s([l.bind("impression")],d),t.ImpressionListener=d},function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,a){var i,o=arguments.length,s=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),s=n(28),c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Listener),a(t,[{key:"init",value:function(){this.element.addEventListener("submit",this.callback)}}]),t}();c=i([s.bind("submit")],c),t.SubmitListener=c},function(e,t,n){"use strict";var a=n(32);n(33),a.CheckedModule.get("bpa-common.directives").directive("bpaImageAsset",["bpaAssets",function(e){return{restrict:"A",replace:!0,scope:{relativeSrc:"@",relatedScript:"@"},link:function(t,n){n[0].src=e.getAssetUrl(t.relativeSrc,t.relatedScript)}}}])},function(e,t,n){"use strict";var a=n(32);n(33),a.CheckedModule.get("bpa-common.directives").directive("bpaStylesheetAsset",["bpaAssets",function(e){return{restrict:"E",replace:!0,scope:{src:"@",relatedScript:"@"},template:'<link rel="stylesheet">',link:function(t,n){n[0].href=e.getAssetUrl(t.src,t.relatedScript)}}}])},function(e,t,n){"use strict";n(16);var a=n(240);a.keys().forEach(a)},function(e,t,n){var a={"./base.js":16,"./bpa-assets.js":33,"./bpa-country-service.js":241,"./bpa-event-tracker-factory.js":242,"./bpa-event-tracking-init.js":81,"./bpa-oauth2-http.js":244,"./bpa-rouiting.js":245};function r(e){return n(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=240},function(e,t,n){"use strict";function a(e,t,n,a){return{get:function(e){return r(e?n:t)},getSupportingIdv:function(){return r(a)}};function r(t){return e.get(t,{cache:!0}).then(function(e){return e.data})}}n(16).CheckedModule.get("bpa-common.factories").factory("bpaCountryService",a),a.$inject=["$http","ENDPOINT_COUNTRIES_ALL","ENDPOINT_COUNTRIES_EU","ENDPOINT_COUNTRIES_IDV"]},function(e,t,n){"use strict";var a=n(16);function r(e){var t={create:function(n){return{sublocation:n,track:function(t,n){e.track(angular.extend({sublocation:n||this.sublocation},t))},impression:function(e,n,a){this.track({event:t.EVENT_IMPRESSION,label:e,data:n},a)},click:function(e,n,a){this.track({event:t.EVENT_CLICK,label:e,data:n},a)},messages:function(e,t,n){var a=this;angular.forEach(t,function(t){a.impression(e,angular.extend({event_message:t},n||{}))})}}},get EVENT_IMPRESSION(){return"impression"},get EVENT_CLICK(){return"click"},get LABEL_CANCEL(){return"cancel"},get LABEL_ERROR_VALIDATION(){return"error_event_validation"},get LABEL_ERROR_PROCESSING(){return"error_event_processing"},get LABEL_PAGE_LOAD(){return"page_load"},get LABEL_PAGE_RELOAD(){return"page_reload"},get LABEL_WIDGET_LOAD(){return"widget_load"},get SUBLOCATION_PAGE(){return"page"}};return t}n(81),a.CheckedModule.get("bpa-common.factories").factory("bpaEventTrackerFactory",r),r.$inject=["bpaEventTracker"]},function(e,t,n){"use strict";!function(e,t){if("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)"isIntersecting"in e.IntersectionObserverEntry.prototype||Object.defineProperty(e.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var n=[];r.prototype.THROTTLE_TIMEOUT=100,r.prototype.POLL_INTERVAL=null,r.prototype.USE_MUTATION_OBSERVER=!0,r.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},r.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},r.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},r.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},r.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},r.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},r.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(i(e,"resize",this._checkForIntersections,!0),i(t,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},r.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,o(e,"resize",this._checkForIntersections,!0),o(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},r.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),n=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(r){var i=r.element,o=c(i),s=this._rootContainsTarget(i),l=r.entry,u=t&&s&&this._computeTargetAndRootIntersection(i,n),d=r.entry=new a({time:e.performance&&performance.now&&performance.now(),target:i,boundingClientRect:o,rootBounds:n,intersectionRect:u});l?t&&s?this._hasCrossedThreshold(l,d)&&this._queuedEntries.push(d):l&&l.isIntersecting&&this._queuedEntries.push(d):this._queuedEntries.push(d)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},r.prototype._computeTargetAndRootIntersection=function(n,a){if("none"!=e.getComputedStyle(n).display){for(var r=c(n),i=u(n),o=!1;!o;){var l=null,d=1==i.nodeType?e.getComputedStyle(i):{};if("none"==d.display)return;if(i==this.root||i==t?(o=!0,l=a):i!=t.body&&i!=t.documentElement&&"visible"!=d.overflow&&(l=c(i)),l&&!(r=s(l,r)))break;i=u(i)}return r}},r.prototype._getRootRect=function(){var e;if(this.root)e=c(this.root);else{var n=t.documentElement,a=t.body;e={top:0,left:0,right:n.clientWidth||a.clientWidth,width:n.clientWidth||a.clientWidth,bottom:n.clientHeight||a.clientHeight,height:n.clientHeight||a.clientHeight}}return this._expandRectByRootMargin(e)},r.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100}),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},r.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,a=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==a)for(var r=0;r<this.thresholds.length;r++){var i=this.thresholds[r];if(i==n||i==a||i<n!=i<a)return!0}},r.prototype._rootIsInDom=function(){return!this.root||l(t,this.root)},r.prototype._rootContainsTarget=function(e){return l(this.root||t,e)},r.prototype._registerInstance=function(){n.indexOf(this)<0&&n.push(this)},r.prototype._unregisterInstance=function(){var e=n.indexOf(this);-1!=e&&n.splice(e,1)},e.IntersectionObserver=r,e.IntersectionObserverEntry=a}function a(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,a=this.intersectionRect,r=a.width*a.height;this.intersectionRatio=n?Number((r/n).toFixed(4)):this.isIntersecting?1:0}function r(e,t){var n=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=function(e,t){var n=null;return function(){n||(n=setTimeout(function(){e(),n=null},t))}}(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function i(e,t,n,a){"function"==typeof e.addEventListener?e.addEventListener(t,n,a||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function o(e,t,n,a){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,a||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function s(e,t){var n=Math.max(e.top,t.top),a=Math.min(e.bottom,t.bottom),r=Math.max(e.left,t.left),i=Math.min(e.right,t.right),o=i-r,s=a-n;return o>=0&&s>=0&&{top:n,bottom:a,left:r,right:i,width:o,height:s}}function c(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function l(e,t){for(var n=t;n;){if(n==e)return!0;n=u(n)}return!1}function u(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}}(window,document)},function(e,t,n){"use strict";function a(e,t){function n(e){return(e=e||{}).headers=e.headers||{},t.addAuthHelpHeader(e.headers),e}var a=Object.create(e);return a.post=function(t,a,r){return e.post(t,a,n(r))},a.get=function(t,a){return e.get(t,n(a))},a}n(16).CheckedModule.get("bpa-common.factories").factory("bpaOauth2Http",a),a.$inject=["$http","eoAuthHelper"]},function(e,t,n){"use strict";n(16).CheckedModule.get("bpa-common.factories").factory("bpaRouting",[function(){var e={};return{addRoutes:function(t){angular.extend(e,t)},setRoutes:function(t){e=t},get:function(t){return e[t]||""}}}])},function(e,t,n){"use strict";n(43);var a=n(247);a.keys().forEach(a)},function(e,t,n){var a={"./base.js":43,"./bpa-country-service.js":248,"./bpa-event-tracking.js":56};function r(e){return n(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=247},function(e,t,n){"use strict";var a=n(43);n(33),a.CheckedModule.get("bpa-common.constants").constant("ENDPOINT_COUNTRIES_ALL","/ab/compliance/countries").constant("ENDPOINT_COUNTRIES_EU","/ab/compliance/countries/eu").constant("ENDPOINT_COUNTRIES_IDV","/ab/compliance/countries/idv")},function(e,t,n){"use strict";n(58);var a=n(250);a.keys().forEach(a)},function(e,t,n){var a={"./base.js":58,"./requirements-not-met.js":251};function r(e){return n(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=250},function(e,t,n){"use strict";n(58).CheckedModule.get("bpa-common.interceptors").provider("bpaRequirementsNotMet",function(){var e=this;this.handlers=[],this.$get=["$q","$injector",function(t,n){return{responseError:function(a){if(449!==a.status||"application/json"!==a.headers("content-type"))return t.reject(a);var r=angular.isString(a.data)?JSON.parse(a.data):a.data;if(!r.code)return t.reject(a);for(var i=0;i<e.handlers.length;i++){var o=n.get(e.handlers[i]);if(o.isRelevant(r.code))return o.handle(r,a)}return t.reject(a)}}}]})},function(e,t,n){"use strict";n(33);var a=function(e){return e&&e.__esModule?e:{default:e}}(n(253)),r=n(23);angular.module((0,r.getModuleName)()).run(["$cacheFactory","$templateCache","bpaAssets",function(e,t,n){if(n.isCdnUsed()){if(a.default.httpData){var r=e.get("$http");for(var i in a.default.httpData)a.default.httpData.hasOwnProperty(i)&&r.put(i,a.default.httpData[i])}if(a.default.templates)for(var o in a.default.templates)a.default.templates.hasOwnProperty(o)&&t.put(o,a.default.templates[o])}}])},function(e,t){e.exports={templates:{"/ab/payments/verify-payment/partial/modern-form.partial.html":'\n\n\n\n\n\n\n<div data-ng-if="hasError()" class="m-0-top">\n    <eo-alert type="danger" data-ng-repeat="(key, error) in bpaFormErrors">\n        <span ng-bind-html="error"></span>\n    </eo-alert>\n</div>\n\n<div data-ng-switch="mopData.type" class="m-lg-top-bottom">\n            <div data-ng-switch-when="CC">\n        Check your credit card statement for two small charges made by Upwork to your <strong>{{mopData.name}}</strong>. Enter them here.     <a target="_blank"\n       href="https://support.upwork.com/hc/en-us/articles/211068008"\n       ng-click="logClickEvent(\'global.text.learn_more\')" class="d-none-mobile-app">Learn more</a>\n\n\n    </div>\n\n            <div data-ng-switch-when="ACH">\n        Check your bank statement for two small deposits made by Upwork to your <strong>{{mopData.name}}</strong>. Enter them here.     <a target="_blank"\n       href="https://support.upwork.com/hc/en-us/articles/211068008"\n       ng-click="logClickEvent(\'global.text.learn_more\')" class="d-none-mobile-app">Learn more</a>\n\n\n    </div>\n\n            <div data-ng-switch-when="ACH_DEPOSIT">\n        Check your bank statement for two small deposits made by Upwork to your <strong>{{mopData.name}}</strong>. Enter them here.     <a target="_blank"\n       href="https://support.upwork.com/hc/en-us/articles/211068008"\n       ng-click="logClickEvent(\'global.text.learn_more\')" class="d-none-mobile-app">Learn more</a>\n\n\n    </div>\n\n</div>\n\n<div id="verifyMop" data-name="verifyMop"\n     data-ng-submit="submit()"\n     class="ng-form"\n     data-ng-model-options="{updateOn:\'updateEvent\'}"\n    >\n    <div class="row">\n        <div class="col-sm-6">\n                        <div class="form-group m-0-bottom"\n         data-ng-class="{ \'has-error\': getCtrlByModelName(&#039;amountOne&#039;).$dirty && getCtrlByModelName(&#039;amountOne&#039;).$invalid, \'has-success\': getCtrlByModelName(&#039;amountOne&#039;).$dirty && getCtrlByModelName(&#039;amountOne&#039;).$valid }">\n        <label for="verifyMop_amountOne" class="control-label">Amount 1</label>\n        <input id="verifyMop_amountOne" name="verifyMop[amountOne]"\n               data-bpa-model="amountOne"  type="number" step="0.01" class="form-control text-right" data-bpa-model="amountOne" bpa-amount-input="" required="required" />\n    </div>\n\n            <div class="d-block d-sm-none m-sm-bottom"></div>\n        </div>\n        <div class="col-sm-6">\n                        <div class="form-group m-0-bottom"\n         data-ng-class="{ \'has-error\': getCtrlByModelName(&#039;amountTwo&#039;).$dirty && getCtrlByModelName(&#039;amountTwo&#039;).$invalid, \'has-success\': getCtrlByModelName(&#039;amountTwo&#039;).$dirty && getCtrlByModelName(&#039;amountTwo&#039;).$valid }">\n        <label for="verifyMop_amountTwo" class="control-label">Amount 2</label>\n        <input id="verifyMop_amountTwo" name="verifyMop[amountTwo]"\n               data-bpa-model="amountTwo"  type="number" step="0.01" class="form-control text-right" data-bpa-model="amountTwo" bpa-amount-input="" required="required" />\n    </div>\n\n        </div>\n    </div>\n\n    <div ng-messages="bpaFormCtrl.$error" data-ng-show="bpaFormCtrl.$invalid && bpaFormCtrl.$dirty">\n        <label ng-message="bpaPattern" class="form-message form-error">\n            <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>Please enter amounts accurate to two decimal places.</label>\n        <label ng-message="bpaMin" class="form-message form-error">\n            <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>Amount should be greater than $0. Please check your statement for correct amounts.</label>\n        <label ng-message="required" class="form-message form-error">\n            <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>Please enter amounts accurate to two decimal places.</label>\n    </div>\n\n    <img         class="m-lg-top m-sm-bottom img img-responsive" data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/verify-sample-statement.png"  />    <div data-ng-switch="mopData.type">\n                <small class="text-muted" data-ng-switch-when="CC"><span class="text-capitalize">charges</span> usually appear within 1 business day.     <a target="_blank"\n       href="https://support.upwork.com/hc/en-us/requests/new"\n       ng-click="logClickEvent(\'global.text.contact_us\')">Contact us</a>\n if it takes more than 5 days.\n</small>\n\n                <small class="text-muted" data-ng-switch-when="ACH"><span class="text-capitalize">deposits</span> usually appear within 2 business days.     <a target="_blank"\n       href="https://support.upwork.com/hc/en-us/requests/new"\n       ng-click="logClickEvent(\'global.text.contact_us\')">Contact us</a>\n if it takes more than 5 days.\n</small>\n\n                <small class="text-muted" data-ng-switch-when="ACH_DEPOSIT"><span class="text-capitalize">deposits</span> usually appear within 2 business days.     <a target="_blank"\n       href="https://support.upwork.com/hc/en-us/requests/new"\n       ng-click="logClickEvent(\'global.text.contact_us\')">Contact us</a>\n if it takes more than 5 days.\n</small>\n\n    </div>\n\n    <div ng-if="allowPrimary" class="form-group m-0-bottom m-md-top">\n        <div class="checkbox last-visible-child">\n            <label>\n                <input type="checkbox" name="makePrimary" bpa-model="makePrimary" bpa-post-skip="true">\n                <span class="checkbox-replacement-helper">\n                    <span aria-hidden="true" class="glyphicon air-icon-check"></span>\n                </span>Use as primary payment method</label>\n        </div>\n        <hr class="m-0-top-bottom d-block d-md-none" data-ng-show="mopData.type == \'CC\'">\n    </div>\n</div>\n\n<div data-ng-show="mopData.type == \'CC\'" class="m-lg-top">\n    <img         style="width: 18px; vertical-align: middle" class="m-xs-right" data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/verify-refund.png"  />    <small class="text-muted">You will be refunded within 10 days</small>\n</div>\n',"/ab/payments/verify-payment/partial/modal.html":'<div data-eo-block="{{vm.isBlocked()}}"\n     target="body"\n     block-decorator="eo-block-large full-page-loading bpa-modal-block"></div>\n\n<up-c-modal bpa-custom-element\n            ng-on-close="vm.handleClose()"\n            ng-method-close="vm.close"\n            ng-method-open="vm.open"\n            ng-method-component-on-ready="vm.onReady"\n            ng-prop-page-title="vm.getPageTitle()"\n            size="sm"\n            modal-footer-inverse\n            class="bpa-verify-mop-modal bpa-modal-with-alerts">\n\n    <span ng-init="vm.pageTitles = {&quot;billing&quot;:&quot;Verify your billing method&quot;,&quot;disbursement&quot;:&quot;Verify your payment method&quot;,&quot;subscription&quot;:&quot;Switch processing fees&quot;}"></span>\n\n    <div slot="body"\n         ng-class="{\'no-primary-selection\': vm.isDisbursementMethod() || !vm.config.allowPrimary}">\n        <verify-payment-method\n                ng-show="vm.isVerification()"\n                bpa-base-form\n                show-error-notification="true"\n                bpa-comm-object="vm.verifyInterface"\n                callback-object="vm.verifyCallbackObject"\n                mop-data="vm.mopData"\n                allow-primary="vm.config.allowPrimary"\n                flow-name="{{ vm.config.flowName }}"\n                lock-on-submit="form"\n                standard-error-message="We are sorry! We are experiencing a technical problem and cannot process your request right now. Please try again in a minute."\n        ></verify-payment-method>\n        <client-plan-subscription\n                ng-show="vm.isSubscription()"\n                bpa-base-form\n                show-error-notification="true"\n                bpa-comm-object="vm.subscriptionInterface"\n                callback-object="vm.subscriptionCallbackObject"\n                subscription-info="vm.subscriptionInfo"\n                lock-on-submit="form"\n                flow-name="{{ vm.config.flowName }}"\n                standard-error-message="We are sorry! We are experiencing a technical problem and cannot process your request right now. Please try again in a minute."\n                subscription-url="/ab/plans/client/subscribe-to-plan"\n        ></client-plan-subscription>\n    </div>\n    <div slot="footer">\n        <div class="btn-row text-right" ng-show="vm.isVerification()">\n            <button class="btn btn-link" data-ng-click="vm.cancelVerification()">\n                Cancel\n            </button>\n            <button class="btn btn-primary no-hide-animation"\n                    data-ng-click="vm.verifyInterface.submit()"\n                    data-ng-disabled="!vm.verifyInterface.isSubmitAllowed()">\n                Verify\n            </button>\n        </div>\n        <div ng-show="vm.isSubscription()" ng-class="vm.isSmallScreen() ? \'bpa-mobile-stacked-buttons\' : \'text-right\'">\n            <button class="btn btn-link btn-block-sm" data-ng-click="vm.cancelSubscription()">\n                Cancel\n            </button>\n            <button class="btn btn-primary no-hide-animation btn-block-sm"\n                    data-ng-click="vm.subscriptionInterface.submit()"\n                    data-ng-disabled="!vm.subscriptionInterface.isSubmitAllowed()">\n                Switch to Flat Fee\n            </button>\n        </div>\n    </div>\n</up-c-modal>\n',"/ab/payments/add-primary-method/add-button":'<eo-alert ng-if="requirementsError" type="danger">\n    {{ requirementsError.message }}\n</eo-alert>\n<div class="bpa-primary-payment-area" ng-hide="requirementsError">\n        <div class="bpa-cards-icon-img"></div>\n\n    <div ng-show="isLoading" data-eo-block="{{isLoading}}" class="p-md-top-bottom"></div>\n    <eo-alert ng-show="isError" type="danger">\n        We are sorry! We are experiencing a technical problem and cannot process your request right now. Please try again in a minute.\n    </eo-alert>\n\n    <div ng-show="!isLoading">\n        <button\n            ng-click="click()"\n            ng-show="!isPrimaryPayment()"\n            class="{{getAddButtonClass(&quot;m-0-top-bottom btn btn-primary p-md-left p-md-right m-0-left&quot;)}}">\n            <span aria-hidden="true" class="glyphicon air-icon-add m-0-left m-md-right"></span>\n            {{ getAddButtonLabel(&quot;Add Billing Now&quot;) }}\n        </button>\n\n        <div ng-show="isPrimaryPayment()" class="m-sm-top">\n            <div class="{{ getPaymentIconClass() }}"></div>\n            <div>\n                <div ng-bind-html="paymentData.display_name"></div>\n                <div ng-show="isVerificationInProgress()" class="m-sm-top">\n                    <em>Remember to verify your billing method later, before your first payment is made.</em>\n                </div>\n            </div>\n        </div>\n    </div>\n\n        <bpa-stylesheet-asset related-script="js/bpa-ui-combined.js" src="css/payments.css"></bpa-stylesheet-asset>\n</div>\n',"/ab/payments/resources/html/billing-address-form.partial.html":'\n<div data-ng-if="hasError()">\n    <eo-alert type="danger" ng-repeat="(key, error) in bpaFormErrors">\n        <span data-ng-bind-html="error"></span>\n    </eo-alert>\n</div>\n\n<bpa-alert-messages current-ae="currentAe"\n                    fatal-error-message="We are sorry! We are experiencing a technical problem and cannot process your request right now. Please try again in a minute."\n                    reset-margins="true"\n></bpa-alert-messages>\n\n<div id="billing_address" data-name="billing_address" data-ng-submit="submit()" class="ng-form m-lg-top-bottom">\n    <billing-address data-ng-model="billingAddress"\n                     ng-model-options="{updateOn:\'updateEvent\'}"\n                     enable-address-lookup="enableAddressLookup"\n    ></billing-address>\n</div>\n',"/ab/payments/resources/html/temporary-charges.partial.html":'<h1>Temporary Charges</h1>\n\n<div class="row">\n    <div class="col-md-7">\n        <img         class="m-lg-top m-md-bottom" data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/2sc-credit-card.png"  />    </div>\n\n    <div class="col-md-5">\n        <p>In order to verify your credit card, we have made 2 temporary charges totaling $10. What happens next?</p> <p>These charges will be refunded to your credit card within 10 days.</p>\n        <a class="btn btn-primary m-0" data-ng-href="{{gotItUrl}}">Got It</a>\n    </div>\n</div>\n',"/ab/payments/deposit-methods/partials/add-billing-method.html":'\n\n\n<style>\n    #bpa-add-primary-payment, #bpa-cc-form-lock {\n        min-height: 381px;\n    }\n    .bpa-security-banner {\n        min-height: 42px;\n        background-color: #EBF7EC;\n        padding: 10px;\n    }\n    .bpa-security-banner img {\n        height: 23px;\n        margin-right: 5px;\n        margin-top: -1px;\n    }\n    #bpa-add-primary-payment .bpa-hide-loading {\n        display: none !important;\n    }\n    .bpa-upwork-balance {\n        color: #767676;\n    }\n    .bpa-content {\n        min-height: 152px;\n        width: 100%;\n    }\n    #bpa-method-ACH .bpa-content {\n        min-height: 134px;\n    }\n    .bpa-method-choice:not(:first-child) {\n        border-top: 1px solid #E0E0E0;\n    }\n    @media (min-width: 481px) {\n        .bpa-security-banner {\n            text-align: center;\n        }\n    }\n    @media (max-width: 480px) {\n        .bpa-security-banner {\n            padding-left: 41px;\n        }\n        .bpa-security-banner img {\n            margin-left: -30px;\n        }\n    }\n</style>\n\n<bpa-var key="addUpmDefaultSubmitLabel" value="Save"></bpa-var>\n\n<eo-alert class="mx-0" ng-if="requirementsError" type="danger">\n    {{ requirementsError.message }}\n</eo-alert>\n\n<div id="bpa-add-primary-payment" class="bpa-add-primary-payment bpa-growable" ng-hide="requirementsError">\n    <div id="bpa-cc-form-lock" class="bpa-growable">\n        <div data-eo-block="{{isBlocked()}}" target="{{formLockSelector}}"></div>\n        <div class="bpa-hide-loading bpa-growable">\n            <div data-ng-show="interfaceObject.isAddPaymentFormActive()"\n                 data-ng-class="{ \'bpa-full-content-page\': interfaceObject.isCcBillingAddressFormActive()}">\n                <div data-ng-if="config.client" class="bpa-security-banner bpa-hide-on-full-content">\n                    <img         data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/protection-small.png"  />                    Upwork Payment Protection: Only pay for work you authorize\n                </div>\n                <div class="bpa-growable">\n                        <div id="bpa-method-ACH_DEPOSIT"\n         class="bpa-method-choice ng-cloak bpa-primary-payment-content"\n         data-ng-if="hasMethod(\'ACH_DEPOSIT\')"\n         data-ng-class="{\n            \'bpa-mode-active\': isActive(\'ACH_DEPOSIT\'),\n            \'bpa-mode-inactive bpa-hide-on-full-content\': !isActive(\'ACH_DEPOSIT\'),\n            \'p-md-left-right p-md-bottom\': isSmallScreen(),\n            \'p-lg-left-right p-lg-bottom\': !isSmallScreen()\n         }"\n         data-ng-init="addMethod(\'ACH_DEPOSIT\')">\n\n        <div class="radio bpa-hide-on-full-content" ng-class="isSmallScreen() ? \'p-md-top\' : \'p-lg-top\'">\n            <label>\n                <input type="radio" name="methodType" data-ng-model="$parent.mode" value="ACH_DEPOSIT">\n                <span class="checkbox-replacement-helper"></span>Bank Account</label>\n        </div>\n        <div class="bpa-collapsed" data-ng-show="isActive(\'ACH_DEPOSIT\')">\n            <div class="bpa-content">\n                <div class="p-sm-top bpa-hide-on-full-content"></div>\n\n                    <div class="forward-slide">\n                        <div class="bpa-form-page" data-ng-show="!isManualBankAccountShown()">\n                            <bank-account-plaid-form\n                                    callback-object="plaidCallbackObject"\n                                    account-types="availableMethods.ACH_DEPOSIT.accountTypes"\n                                    processing-fee="availableMethods.ACH_DEPOSIT.processingFee"\n                                    force-primary="{{ forcePrimary }}"\n                            ></bank-account-plaid-form>\n                        </div>\n                    </div>\n                    <div class="backward-slide">\n                        <div class="bpa-form-page" data-ng-show="isManualBankAccountShown()">\n                            <bank-account-form\n                                    bpa-base-form\n                                    mop-type="deposit"\n                                    callback-object="baCallbackObject"\n                                    bpa-comm-object="$parent.bankAccountInterface"\n                                    is-active="isActive(\'ACH_DEPOSIT\')"\n                                    lock-on-submit="form"\n                                    paged-mode="1"\n                                    is-modern="1"\n                                    paged-submit-label="{{ getSubmitLabel() }}"\n                                    enable-back-button="hasPlaid()"\n                                    standard-error-message="We are sorry! We are experiencing a technical problem and cannot process your request right now. Please try again in a minute."\n                                    flow-name="{{flowName}}"\n                                    force-primary="{{ forcePrimary }}"\n                            ></bank-account-form>\n                        </div>\n                    </div>\n                                </div>\n        </div>\n    </div>\n\n\n                        <div id="bpa-method-CC"\n         class="bpa-method-choice ng-cloak bpa-primary-payment-content"\n         data-ng-if="hasMethod(\'CC\')"\n         data-ng-class="{\n            \'bpa-mode-active\': isActive(\'CC\'),\n            \'bpa-mode-inactive bpa-hide-on-full-content\': !isActive(\'CC\'),\n            \'p-md-left-right p-md-bottom\': isSmallScreen(),\n            \'p-lg-left-right p-lg-bottom\': !isSmallScreen()\n         }"\n         data-ng-init="addMethod(\'CC\')">\n\n        <div class="radio bpa-hide-on-full-content" ng-class="isSmallScreen() ? \'p-md-top\' : \'p-lg-top\'">\n            <label>\n                <input type="radio" name="methodType" data-ng-model="$parent.mode" value="CC">\n                <span class="checkbox-replacement-helper"></span>Credit or Debit Card</label>\n        </div>\n        <div class="bpa-collapsed" data-ng-show="isActive(\'CC\')">\n            <div class="bpa-content">\n                <div class="p-sm-top bpa-hide-on-full-content"></div>\n\n                    <credit-card-form\n                            bpa-base-form\n                            callback-object="ccCallbackObject"\n                            bpa-comm-object="$parent.creditCardInterface"\n                            is-active="isActive(\'CC\')"\n                            lock-on-submit="form"\n                            lock-on-country-change="form"\n                            paged-mode="1"\n                            paged-submit-label="{{ getSubmitLabel() }}"\n                            form-lock-selector="{{ccFormLockSelector}}"\n                            standard-error-message="We&#x20;are&#x20;sorry&#x21;&#x20;We&#x20;are&#x20;experiencing&#x20;a&#x20;technical&#x20;problem&#x20;and&#x20;cannot&#x20;process&#x20;your&#x20;card&#x20;now.&#x20;Please&#x20;try&#x20;again&#x20;in&#x20;a&#x20;minute."\n                            flow-name="{{flowName}}"\n                            force-primary="{{ forcePrimary }}"\n                            update-billing-address="updateBillingAddress"\n                            enable-address-lookup="config.enableAddressLookup"\n                            class="bpa-growable"\n                    ></credit-card-form>\n                                </div>\n        </div>\n    </div>\n\n\n                                            <div id="bpa-method-PAYPAL_DEPOSIT"\n         class="bpa-method-choice ng-cloak bpa-primary-payment-content"\n         data-ng-if="hasMethod(\'PAYPAL_DEPOSIT\')"\n         data-ng-class="{\n            \'bpa-mode-active\': isActive(\'PAYPAL_DEPOSIT\'),\n            \'bpa-mode-inactive bpa-hide-on-full-content\': !isActive(\'PAYPAL_DEPOSIT\'),\n            \'p-md-left-right p-md-bottom\': isSmallScreen(),\n            \'p-lg-left-right p-lg-bottom\': !isSmallScreen()\n         }"\n         data-ng-init="addMethod(\'PAYPAL_DEPOSIT\')">\n\n        <div class="radio bpa-hide-on-full-content" ng-class="isSmallScreen() ? \'p-md-top\' : \'p-lg-top\'">\n            <label>\n                <input type="radio" name="methodType" data-ng-model="$parent.mode" value="PAYPAL_DEPOSIT">\n                <span class="checkbox-replacement-helper"></span><img         data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/paypal-small.png"  /></label>\n        </div>\n        <div class="bpa-collapsed" data-ng-show="isActive(\'PAYPAL_DEPOSIT\')">\n            <div class="bpa-content">\n                <div class="p-sm-top bpa-hide-on-full-content"></div>\n\n                    <div class="m-md-top" data-ng-show="!paypalLoadingFailure">\n                        <eo-alert ng-show="hasPaypalError" type="danger">\n                            <span data-ng-bind-html="paypalGetError(&#039;We are sorry! We are experiencing a technical problem and cannot process your request right now. Please try again in a minute.&#039;)"></span>\n                        </eo-alert>\n\n                        <p data-ng-show="availableMethods.PAYPAL_DEPOSIT.verification">Youll be redirected to PayPal to link a verified account.</p>\n                        <div class="width-sm">\n                            <bpa-paypal-button\n                                    size="responsive"\n                                    callbacks="ppCallbackObject"\n                                    flow-name="{{flowName}}"\n                                    force-primary="{{ forcePrimary }}"\n                                    update-billing-address="updateBillingAddress"\n                            ></bpa-paypal-button>\n                        </div>\n                    </div>\n                    <div class="m-md-top" data-ng-show="paypalLoadingFailure">\n                        <eo-alert type="danger">Sorry, a critical component of this page failed to load. Please reload the page.</eo-alert>\n                    </div>\n                                </div>\n        </div>\n    </div>\n\n                        <div id="bpa-method-BALANCE"\n         class="bpa-method-choice ng-cloak bpa-primary-payment-content"\n         data-ng-if="hasMethod(\'BALANCE\')"\n         data-ng-class="{\n            \'bpa-mode-active\': isActive(\'BALANCE\'),\n            \'bpa-mode-inactive bpa-hide-on-full-content\': !isActive(\'BALANCE\'),\n            \'p-md-left-right p-md-bottom\': isSmallScreen(),\n            \'p-lg-left-right p-lg-bottom\': !isSmallScreen()\n         }"\n         data-ng-init="addMethod(\'BALANCE\')">\n\n        <div class="radio bpa-hide-on-full-content" ng-class="isSmallScreen() ? \'p-md-top\' : \'p-lg-top\'">\n            <label>\n                <input type="radio" name="methodType" data-ng-model="$parent.mode" value="BALANCE">\n                <span class="checkbox-replacement-helper"></span>Account balance <span class="bpa-upwork-balance">{{ availableMethods.BALANCE.accountBalance | currency:"$" }}</span></label>\n        </div>\n        <div class="bpa-collapsed" data-ng-show="isActive(\'BALANCE\')">\n            <div class="bpa-content">\n                <div class="p-sm-top bpa-hide-on-full-content"></div>\n\n                    <p class="m-0 p-0-bottom p-md-top ">Pay with the funds in {{ availableMethods.BALANCE.accountName }} account {{ availableMethods.BALANCE.accountBalance | currency:&quot;$&quot; }}.</p>\n                    <a data-ng-click="useBalance()" class="btn btn-primary m-0-left m-0-bottom m-lg-top">\n                        Pay Now\n                    </a>\n                                </div>\n        </div>\n    </div>\n\n                </div>\n            </div>\n            <div data-ng-show="interfaceObject.isBillingAddressFormActive()" class="bpa-growable">\n                <div ng-class="isSmallScreen() ? \'p-md-left-right\': \'p-lg-left-right\'" class="bpa-growable">\n                    <billing-address-form\n                         bpa-base-form\n                         class="bpa-growable"\n                         bpa-comm-object="addressInterface"\n                         callback-object="addressCallbackObject"\n                         lock-on-submit="form"\n                         address-data="billingAddress"\n                         flow-name="flowName"\n                         mop-type="mode"\n                         enable-address-lookup="config.enableAddressLookup"\n                         standard-error-message="We are sorry! We are experiencing a technical problem and cannot process your request right now. Please try again in a minute."\n                    ></billing-address-form>\n\n                    <div class="btn-row" ng-class="isSmallScreen() ? \'p-md-bottom\': \'p-lg-bottom\'">\n                        <button class="btn btn-primary m-0"\n                                data-ng-click="addressInterface.submit()"\n                                data-ng-disabled="!addressInterface.isSubmitAllowed()">{{ getSubmitLabel() }}</button>\n\n                                                    <button class="btn m-0 btn-link" data-ng-click="cancelBillingAddress()">Cancel</button>\n                                            </div>\n                </div>\n            </div>\n            <div data-ng-show="interfaceObject.isVerificationFormActive()" class="bpa-growable">\n                <div ng-class="isSmallScreen() ? \'p-md-left-right\': \'p-lg-left-right\'" class="bpa-growable">\n                    <verify-payment-method\n                        bpa-base-form\n                        class="bpa-growable"\n                        show-error-notification="true"\n                        bpa-comm-object="verifyInterface"\n                        callback-object="verifyCallbackObject"\n                        mop-rid="verificationMopRid"\n                        force-primary="forcePrimary"\n                        allow-primary="!forcePrimary"\n                        lock-on-submit="form"\n                        flow-name="{{flowName}}"\n                        standard-error-message="We are sorry! We are experiencing a technical problem and cannot process your request right now. Please try again in a minute."\n                    ></verify-payment-method>\n\n                    <div class="m-lg-top btn-row" ng-class="isSmallScreen() ? \'p-md-bottom\': \'p-lg-bottom\'">\n                        <button class="btn btn-primary m-0"\n                            data-ng-click="verifyInterface.submit()"\n                            data-ng-disabled="!verifyInterface.isSubmitAllowed()">\n                            Verify\n                        </button>\n                                                    <button class="btn m-0 btn-link" data-ng-click="cancelVerification()">Do it later</button>\n                                            </div>\n                </div>\n            </div>\n            <div data-ng-show="interfaceObject.isSubscriptionFormActive()" class="bpa-growable">\n                <div ng-class="isSmallScreen() ? \'p-md-left-right\': \'p-lg-left-right\'" class="bpa-growable">\n                    <client-plan-subscription\n                            bpa-base-form\n                            class="bpa-growable"\n                            show-error-notification="true"\n                            bpa-comm-object="subscriptionInterface"\n                            callback-object="subscriptionCallbackObject"\n                            subscription-info="subscriptionInfo"\n                            lock-on-submit="form"\n                            flow-name="{{flowName}}"\n                            standard-error-message="We are sorry! We are experiencing a technical problem and cannot process your request right now. Please try again in a minute."\n                            subscription-url="/ab/plans/client/subscribe-to-plan"\n                    ></client-plan-subscription>\n\n                    <div class="m-lg-top btn-row" ng-class="isSmallScreen() ? \'p-md-bottom\': \'p-lg-bottom\'">\n                        <button class="btn btn-primary m-0"\n                                data-ng-click="subscriptionInterface.submit()"\n                                data-ng-disabled="!subscriptionInterface.isSubmitAllowed()">\n                            Switch to Flat Fee\n                        </button>\n                                                    <button class="btn m-0 btn-link" data-ng-click="cancelSubscription()">Cancel</button>\n                                            </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div data-ng-init="templateLoaded()"></div>\n\n    <bpa-stylesheet-asset related-script="js/bpa-ui-combined.js" src="css/payments.css"></bpa-stylesheet-asset>\n',"/ab/payments/deposit-methods/partials/add-billing-method-modal.html":'<style>\n    #bpa-add-primary-payment-modal, #bpa-cc-form-lock-modal {\n        min-height: 430px;\n    }\n\n    .bpa-hide-loading .modal-header {\n        display: none !important;\n    }\n</style>\n\n<div data-ng-hide="addBillingInterface.isModalHidden()" id="bpa-add-primary-payment-modal" class="bpa-add-primary-payment bpa-growable">\n    <div id="bpa-cc-form-lock-modal" class="bpa-growable">\n        <div class="bpa-hide-loading bpa-growable">\n            <div class="modal-header d-flex align-items-center">\n                <h2 data-ng-show="addBillingInterface.isAddPaymentFormActive() && !addBillingInterface.isCcBillingAddressFormActive()"\n                    class="modal-title no-hide-animation">Add a billing method</h2>\n                <h2 data-ng-show="addBillingInterface.isVerificationFormActive()"\n                    class="modal-title no-hide-animation">Verify your billing method</h2>\n                <h2 data-ng-show="addBillingInterface.isSubscriptionFormActive()"\n                    class="modal-title no-hide-animation">Switch processing fees</h2>\n                <h2 data-ng-show="addBillingInterface.isBillingAddressFormActive() || addBillingInterface.isCcBillingAddressFormActive()"\n                    class="modal-title no-hide-animation">Billing address</h2>\n                <button data-ng-hide="config.hideCloseButton" type="button" class="close" data-ng-click="close()">\n                    <span class="glyphicon air-icon-close m-0 vertical-align-middle" aria-hidden="true"></span>\n                    <span class="sr-only">Close</span>\n                </button>\n            </div>\n            <div class="modal-body p-0 m-0 bpa-add-billing-method bpa-growable">\n                <add-billing-method\n                    class="bpa-growable"\n                    interface-object="addBillingInterface"\n                    callback-object="addBillingCallback"\n                    form-lock-selector="#bpa-add-primary-payment-modal"\n                    cc-form-lock-selector="#bpa-cc-form-lock-modal"\n                    return-payment-data="config.returnPaymentData"\n                    skip-verification="config.skipVerification"\n                    flow-name="{{config.flowName}}"\n                    enable-subscription="config.enableSubscription"\n                    force-primary="config.forcePrimary"\n                    update-billing-address="config.updateBillingAddress"\n                    submit-label="{{config.popupSubmitLabel}}"\n                ></add-billing-method>\n            </div>\n        </div>\n    </div>\n</div>\n',"/ab/payments/deposit-methods/partials/add-billing-method-plaid-modal.html":'<style>\n    .bpa-add-plaid-modal {\n        min-height: 410px;\n    }\n\n    @media (max-width: 480px) {\n        .bpa-plaid-redirect img {\n            width: 100%;\n            height: auto !important;\n        }\n    }\n\n    .bpa-plaid-redirect img {\n        max-width: 295px;\n        height: 138px;\n        margin-bottom: 50px;\n    }\n\n    .bpa-plaid-redirect {\n        padding-top: 70px;\n        padding-bottom: 40px; /* -30px for modal bottom padding */\n    }\n</style>\n\n<div data-ng-hide="isPlaidModalHidden()"\n     id="bpa-add-plaid-modal"\n     class="bpa-add-plaid-modal"\n     data-ng-class="{\'bpa-min-height-auto d-flex flex-1\' : !isAddPlaidFormActive()}"\n>\n    <div data-eo-block="{{isBlocked()}}" target="#bpa-add-plaid-modal"></div>\n    <div data-ng-show="isAddPlaidFormActive()" class="modal-header d-flex align-items-center">\n        <h2 class="modal-title">Select your bank account</h2>\n        <button type="button" class="close" data-ng-click="close()">\n            <span class="glyphicon air-icon-close m-0" aria-hidden="true"></span>\n            <span class="sr-only">Close</span>\n        </button>\n    </div>\n    <div class="modal-body p-0-top p-0-left-right bpa-add-billing-method"\n         ng-class="{ \'d-flex flex-1\': !isAddPlaidFormActive() }">\n        <div class="bpa-overflow-hidden"\n             ng-class="{ \'d-flex flex-1\': !isAddPlaidFormActive(), \'p-md-left-right\': isSmallScreen(), \'p-lg-left-right\': !isSmallScreen() }">\n            <div data-ng-show="!isAddPlaidFormActive()" class="bpa-plaid-redirect align-items-center d-flex flex-1">\n                <div class="text-center">\n                    <img         data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/plaid-redirect.png"   class="img" />                    <p class="m-0-bottom">\n                        You are being redirected to Plaid to instantly link and verify your account. Upwork does not store your bank login credentials.\n                    </p>\n                </div>\n            </div>\n\n            <div data-ng-show="isAddPlaidFormActive()" id="plaidForm" data-name="plaidForm" class="ng-form">\n                <bank-account-plaid-modal-form\n                    bpa-base-form\n                    bpa-comm-object="bpaCommObject"\n                    callback-object="callbackObject"\n                    account-types="accountTypes"\n                    force-primary="{{ forcePrimary }}"\n                    lock-on-submit="form"\n                    standard-error-message="We&#x20;are&#x20;sorry&#x21;&#x20;We&#x20;are&#x20;experiencing&#x20;a&#x20;technical&#x20;problem&#x20;and&#x20;cannot&#x20;process&#x20;your&#x20;card&#x20;now.&#x20;Please&#x20;try&#x20;again&#x20;in&#x20;a&#x20;minute.">\n                    on-cancel="$dismiss(\'cancel\')"\n                </bank-account-plaid-modal-form>\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer" data-ng-show="isAddPlaidFormActive()">\n        <div class="btn-row">\n            <button type="button" name="submitButton" class="btn btn-primary m-0-top-bottom"\n                    data-ng-click="bpaCommObject.submit()"\n                    data-ng-disabled="!bpaCommObject.isSubmitAllowed()">Save</button>\n            <button type="button"\n                    class="btn btn-link m-0-right m-0-top-bottom"\n                    data-ng-click="close()">Cancel</button>\n        </div>\n    </div>\n</div>\n',"/ab/payments/deposit-methods/partials/bank-account-plaid.html":'<div id="add-plaid-bank-account">\n    <eo-alert class="add-plaid-bank-account-errors" ng-if="isNetworkError()" type="danger">\n        We are sorry! We are experiencing a technical problem and cannot process your request right now. Please try again in a minute.\n    </eo-alert>\n    <eo-alert class="add-plaid-bank-account-errors" ng-if="isPlaidAccountsEmpty()" type="danger">\n        Sorry, we were unable to import any checkings/savings account using this login. Please try again.\n    </eo-alert>\n    <eo-alert class="add-plaid-bank-account-errors" ng-if="loadingFailure" type="danger">\n        Sorry, a critical component of this page failed to load. Please reload the page.\n    </eo-alert>\n\n    <div data-ng-show="!loadingFailure">\n        <p class="p-md-top m-md-bottom">\n            {{ processingFee }}\n        </p>\n        <div class="p-md-top">\n            <button type="button" data-ng-click="initPlaid()" class="btn btn-primary btn-block-sm m-0-bottom m-0-right">Link Account</button>\n            <span class="text-vertical-separator m-sm-left-right d-none d-md-inline-block">or</span>\n            <div class="d-block d-md-none m-md-top"></div>\n            <button type="button" data-ng-click="showManual()" class="btn btn-default btn-block-sm m-0-bottom m-0-right">\n                Enter Manually\n            </button>\n        </div>\n    </div>\n</div>\n',"/ab/payments/deposit-methods/partials/client-plan-subscription-form.html":'\n\n\n<div id="clientPlanSubscription" data-name="clientPlanSubscription"\n     data-ng-submit="submit()"\n     class="ng-form bpa-subscription-form">\n    <div data-ng-if="hasError()">\n        <eo-alert type="danger" ng-repeat="(key, error) in bpaFormErrors">\n            <span data-ng-bind-html="error"></span>\n        </eo-alert>\n    </div>\n\n    <p class="m-lg-top">Youre currently paying a {{getSubscriptionFee()}} fee on every payment.</p>\n    <hr />\n    <h1 class="m-sm-bottom">Flat monthly fee instead</h1>\n    <h4 class="m-md-bottom">{{ subscriptionInfo.plan.price|currency:"$":0 }} / month</h4>\n    <hr />\n\n    <p class="m-md-bottom"><strong>Best for clients spending over {{ getBenefitAmount()|currency:&quot;$&quot;:-1 }} / month</strong></p>\n\n    <p class="m-md-bottom">{{ subscriptionInfo.plan.price|currency:&quot;$&quot;:0 }} flat fee. No matter how many freelancers or payments you have</p>\n\n    <p class="m-md-bottom">\n        <strong data-ng-show="subscriptionInfo.type == \'ACH_DEPOSIT\'">A bank account is reqired.</strong>\n        <strong data-ng-show="subscriptionInfo.type == \'CC\'">A credit card or debit card that is billed in your local currency is reqired.</strong>\n        You&#039;ll be charged a {{getSubscriptionFee()}} fee if you use any other billing method to pay a freelancer</p>\n\n    <p class="m-0-bottom">Cancel and opt back in at any time</p>\n\n    <div class="m-md-top" data-ng-click="learnmoreSubscription()" data-ng-show="subscriptionInfo.type == \'ACH_DEPOSIT\'">    <a target="_blank" href="https://support.upwork.com/hc/en-us/articles/211068088">Learn more</a>\n</div>\n    <div class="m-md-top" data-ng-click="learnmoreSubscription()" data-ng-show="subscriptionInfo.type == \'CC\'">    <a target="_blank" href="https://support.upwork.com/hc/en-us/articles/211068028">Learn more</a>\n</div>\n</div>\n',"/ab/payments/deposit-methods/partials/pay-now-block.html":'<div id="pay-now-block" class="air-card p-0-top-bottom m-0-left-md m-0-left-xl" bpa-event-tracking="submit" tracking-sublocation="pay_now">\n    <header>\n        <h2 class="m-0-bottom m-auto-right">Balance due</h2>\n    </header>\n\n    <section>\n        <div class="row">\n            <div class="col-md-7">\n                <div class="d-none d-md-block m-sm-top"></div>\n                Your balance due is <strong id="pay-now-due">{{getBalanceDue() | currency:"$"}}</strong>\n                <div class="d-block d-md-none m-lg-top"></div>\n            </div>\n            <div class="col-md-5 text-right">\n                <button class="btn btn-primary m-0-bottom btn-block-sm m-0-right"\n                        data-ng-disabled="isDisabled()"\n                        bpa-event-tracking\n                        tracking-label="pay_now"\n                        data-ng-click="payNow()">\n                    Pay Now\n                </button>\n            </div>\n        </div>\n    </section>\n</div>\n',"/ab/payments/deposit-methods/partials/pay-due-modal.html":'<div id="pay-balance-due-modal" class="bpa-growable-all">\n    <div data-eo-block="{{ vm.isBlocked() }}" data-target="#pay-balance-due-modal"></div>\n    <div class="modal-header d-flex align-items-center">\n        <h2 class="modal-title">Pay My Balance</h2>\n        <button type="button" class="close" data-ng-click="$dismiss(\'close\')">\n            <span class="glyphicon air-icon-close m-0 vertical-align-middle" aria-hidden="true"></span>\n            <span class="sr-only">Close</span>\n        </button>\n    </div>\n\n    <div class="modal-body bpa-init-error no-hide-animation bpa-growable-all" data-ng-show="vm.isPage(\'init\')">\n        <div data-ng-messages="vm.initErrors">\n            <p data-ng-message="noMops">Please add a billing method.</p>\n            <p data-ng-message="noDue">There is no balance due at this time.</p>\n            <p data-ng-message="dueIsLess">Balances under {{ vm.minChargeAmount|currency:$ }} will be charged by Upwork to your primary billing method.</p>\n            <p data-ng-message="manualChargeIsNotAllowed">Your financial account has been suspended. Contact Support to pay the balance.</p>\n            <p data-ng-message="network">We are sorry! We are experiencing a technical problem and cannot process your request right now. Please try again in a minute.</p>\n        </div>\n    </div>\n\n    <div class="modal-body p-0-top no-hide-animation bpa-growable" data-ng-show="vm.isPage(\'form\')" data-name="vm.payDueForm" data-ng-form>\n        <eo-alert type="danger" ng-if="vm.error">\n            <span ng-bind-html="vm.error"></span>\n        </eo-alert>\n        <div class="form-group m-lg-top">\n            <label class="control-label">Billing Method</label>\n            <p  data-ng-show="vm.mops.length == 1"\n                class="form-control-static"\n                data-ng-bind-html="vm.selectedMop.name">\n            </p>\n            <payment-method-selector ng-show="vm.mops.length > 1"\n                                     collection="vm.mops"\n                                     bpa-select-class="width-md"\n                                     ng-model="vm.selectedMop"\n            ></payment-method-selector>\n        </div>\n        <div class="form-group m-0-bottom">\n            <label class="control-label text-capitalize">amount</label>\n            <div class="radio">\n                <label>\n                    <input type="radio"\n                           data-ng-model="vm.depositType"\n                           value="full"\n                           data-ng-change="vm.depositTypeChanged()"\n                    >\n                    <span class="checkbox-replacement-helper"></span>\n                    <span>{{ vm.getBalanceDue()|currency:"$":2 }}</span>\n                </label>\n            </div>\n\n            <div class="radio no-border">\n                <label>\n                    <input type="radio" data-ng-model="vm.depositType" value="custom">\n                    <span class="checkbox-replacement-helper"></span>Other amount</label>\n            </div>\n\n            <div data-ng-show="vm.isCustomAmount()">\n                <div class="m-lg-left p-sm-top d-flex align-items-center">\n                    <div class="form-group mb-0 has-feedback width-auto">\n                        <input type="number"\n                               step="0.01"\n                               class="form-control text-right width-md p-md-right"\n                               name="customAmount"\n                               autocomplete="off"\n                               data-ng-model="vm.customAmount"\n                               data-ng-required="vm.isCustomAmount()"\n                               data-bpa-amount-input\n                               data-bpa-amount-min="vm.minChargeAmount"\n                               data-bpa-amount-max="vm.getBalanceDue()"\n                               placeholder="0.00"\n                        >\n                        <span class="glyphicon glyphicon-md air-icon-payment text-primary form-control-feedback" aria-hidden="true"></span>\n                        <span class="sr-only" id="input-el">(user)</span>\n                    </div>\n                    <span class="m-sm-left">USD</span>\n                </div>\n                <div class="m-lg-left" data-ng-messages="vm.payDueForm.customAmount.$error" data-ng-show="vm.payDueForm.customAmount.$dirty">\n                    <label data-ng-message="required" class="form-message form-error m-0-top">\n                        <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>Please enter a payment amount</label>\n                    <label data-ng-message="bpaPattern" class="form-message form-error m-0-top">\n                        <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>Please enter amount accurate to two decimal places</label>\n                    <label data-ng-message="bpaMin" class="form-message form-error m-0-top">\n                        <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>Minimum amount is {{ vm.minChargeAmount|currency:$ }}</label>\n                    <label data-ng-message="bpaMax" class="form-message form-error m-0-top">\n                        <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>Maximum payment amount is {{ vm.getBalanceDue()|currency:$ }}</label>\n                </div>\n            </div>\n        </div>\n        <div ng-show="vm.selectedMop.processingFee">\n            <hr class="d-block d-md-none" ng-class="vm.isCustomAmount() ? \'m-sm-top\' : \'m-0-top\'" />\n            <div class="m-lg-top d-none d-md-block"></div>\n            <p class="m-0-bottom text-muted">\n                A {{ vm.selectedMop.processingFee * 100 | number:2 }}% processing fee will be assessed on all payments.\n                <a target="_blank" href="https://support.upwork.com/hc/en-us/articles/218375638">\n                    Learn more\n                </a>\n            </p>\n        </div>\n    </div>\n\n    <div class="modal-body no-hide-animation bpa-growable-all" data-ng-show="vm.isPage(\'failure\')">\n        <p>{{vm.paymentMessage}}</p>\n        <div class="row">\n            <div class="col-md-4">Billing Method</div>\n            <div class="col-md-8">\n                <span data-ng-bind-html="vm.selectedMop.name"></span>\n            </div>\n        </div>\n        <div class="m-md-top" data-ng-show="!vm.isPayPal()">\n            <a target="_self" data-ng-href="{{ vm.selectedMop.editUrl }}">Update billing method here</a>\n        </div>\n    </div>\n\n    <div class="modal-body no-hide-animation bpa-growable-all" data-ng-show="vm.isPage(\'success\')">\n        <p>{{vm.paymentMessage}}</p>\n    </div>\n\n                        <div class="modal-footer m-0-top modal-footer-inverse d-none d-md-block">\n                <button type="button" class="btn btn-primary btn-block-sm no-hide-animation" data-ng-click="$close()" data-ng-show="vm.isPage(\'init\')">\n                    Close\n                </button>\n\n                <div class="btn-row no-hide-animation" data-ng-show="vm.isPage(\'form\')">\n                    <button type="submit" class="btn btn-primary" data-ng-click="vm.submit()" data-ng-disabled="vm.isSubmitDisabled()">\n                        Pay Now\n                    </button>\n                    <button type="button" class="btn btn-link m-0-right" data-ng-click="$dismiss(\'cancel\')">\n                        Cancel\n                    </button>\n                </div>\n\n                <div data-ng-show="vm.isPage(\'failure\')" class="no-hide-animation">\n                    <a target="_self"\n                       class="btn btn-primary btn-block-sm"\n                       data-ng-if="!vm.isPayPal()"\n                       data-ng-href="{{ vm.selectedMop.editUrl }}">\n                        Update\n                    </a>\n                    <button type="button" class="btn btn-primary btn-block-sm" data-ng-if="vm.isPayPal()" data-ng-click="vm.addMop()">\n                        Add Billing Method\n                    </button>\n                    <button type="button" class="btn btn-link btn-block-sm" data-ng-click="$dismiss(\'cancel\')">\n                        Cancel\n                    </button>\n                </div>\n\n                <button type="button" class="btn btn-primary btn-block-sm no-hide-animation" data-ng-click="$close()" data-ng-show="vm.isPage(\'success\')">\n                    Close\n                </button>\n            </div>\n                                    <div class="modal-footer m-0-top d-block d-md-none">\n                <button type="button" class="btn btn-primary btn-block-sm no-hide-animation" data-ng-click="$close()" data-ng-show="vm.isPage(\'init\')">\n                    Close\n                </button>\n\n                <div class="btn-row no-hide-animation" data-ng-show="vm.isPage(\'form\')">\n                    <button type="submit" class="btn btn-primary" data-ng-click="vm.submit()" data-ng-disabled="vm.isSubmitDisabled()">\n                        Pay Now\n                    </button>\n                    <button type="button" class="btn btn-link m-0-right" data-ng-click="$dismiss(\'cancel\')">\n                        Cancel\n                    </button>\n                </div>\n\n                <div data-ng-show="vm.isPage(\'failure\')" class="no-hide-animation">\n                    <a target="_self"\n                       class="btn btn-primary btn-block-sm"\n                       data-ng-if="!vm.isPayPal()"\n                       data-ng-href="{{ vm.selectedMop.editUrl }}">\n                        Update\n                    </a>\n                    <button type="button" class="btn btn-primary btn-block-sm" data-ng-if="vm.isPayPal()" data-ng-click="vm.addMop()">\n                        Add Billing Method\n                    </button>\n                    <button type="button" class="btn btn-link btn-block-sm" data-ng-click="$dismiss(\'cancel\')">\n                        Cancel\n                    </button>\n                </div>\n\n                <button type="button" class="btn btn-primary btn-block-sm no-hide-animation" data-ng-click="$close()" data-ng-show="vm.isPage(\'success\')">\n                    Close\n                </button>\n            </div>\n        \n    </div>\n',"/ab/payments/resource/disbursement-schedule-form.html":'\n\n<eo-alert data-ng-show="networkError" type="danger">\n    We are sorry! We are experiencing a technical problem and cannot process your request right now. Please try again in a minute.\n</eo-alert>\n\n<eo-alert type="danger" data-ng-repeat="error in formErrors">\n    <span ng-bind-html="error"></span>\n</eo-alert>\n\n<div id="disbursement_schedule_form" data-name="scheduleForm" class="ng-form m-lg-top">\n    <div class="form-group width-xlg"\n         data-ng-class="{\'has-error\': scheduleForm.mop.$dirty && scheduleForm.mop.$invalid}">\n        <label class="required control-label" ng-hide="hasPreselectedMop()">Preferred Payment Method</label>\n        <label class="required control-label" ng-show="hasPreselectedMop()">Payment Method</label>\n        <div ng-hide="hasPreselectedMop()">\n            <p class="form-control-static payment-method-selector"\n               ng-if="paymentMethodsCount === 1"\n               ng-repeat="payment in paymentMethodsCollection">\n                <span ng-bind-html="payment.formattedName"></span>\n            </p>\n            <payment-method-selector ng-show="paymentMethodsCount > 1"\n                                     collection="paymentMethodsCollection"\n                                     bpa-select-class="width-md"\n                                     ng-model="selectedPayment"\n                                     required\n                                     on-change="form.mopRid = selectedPayment.id"\n                                     name="mop"\n            ></payment-method-selector>\n            <div data-ng-messages="scheduleForm.mop.$error" data-ng-show="scheduleForm.mop.$dirty">\n                <label data-ng-message="required" class="form-message form-error">\n                    <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>This field is required</label>\n            </div>\n        </div>\n        <div ng-show="hasPreselectedMop()">\n            <p class="form-control-static payment-method-selector" ng-bind-html="selectedPayment.formattedName"></p>\n            <div class="text-muted">Earnings will be sent here according to the following schedule.</div>\n        </div>\n    </div>\n    <div class="form-group width-xlg" data-ng-show="!!selectedPayment">\n        <label class="control-label">\n            Upwork Fee\n        </label>\n        <p class="form-control-static">\n            {{selectedPayment.fee.fixed|currency:"$":2}} per payment<br>\n            <span class="text-muted">{{selectedPayment.fee.note}}</span>\n        </p>\n    </div>\n    <div class="form-group"\n         data-ng-class="{\'has-error\': scheduleForm.schedule.$dirty && scheduleForm.schedule.$invalid}">\n        <label class="required control-label">\n            Preferred Payment Schedule\n        </label>\n        <p class="m-sm-bottom text-muted">Earnings will be released upon your request.\n                <a target="_blank"\n       class="d-none-mobile-app"\n       href="https://support.upwork.com/hc/en-us/articles/211063708-Choose-an-Automatic-Payment-Schedule"  ng-click="eventLogClick(&quot;learn_more_schedule&quot;)">Learn more</a>\n</p>\n        <div>\n            <div class="radio pb-0" data-ng-repeat="item in disbursementSchedule.schedulesList track by item.key">\n                <label>\n                    <input type="radio" name="schedule"\n                           ng-value="item.key"\n                           data-ng-model="form.schedule"\n                           required>\n                    <span class="checkbox-replacement-helper"></span>{{item.label}} <span data-ng-if="item.hint" class="text-muted">({{item.hint}})</span>\n                </label>\n            </div>\n        </div>\n        <div data-ng-messages="scheduleForm.schedule.$error"\n             data-ng-show="scheduleForm.schedule.$dirty">\n            <label data-ng-message="required" class="form-message form-error">\n                <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>This field is required</label>\n        </div>\n    </div>\n    <div data-ng-if="thresholdsList.length" class="form-group">\n        <label class="required control-label text-capitalize">\n            Only when balance is\n        </label>\n        <div bpa-select\n             choices="thresholdsList"\n             id-map="item.value || item"\n             label-map="item.name"\n             value-map="item.value"\n             class="width-md form-control bpa-threshold-list"\n             data-ng-disabled="isManualScheduleSelected(form.schedule) || scheduleForm.schedule.$invalid"\n             name="threshold"\n             ng-model="form.threshold"\n             required>\n        </div>\n        <div data-ng-messages="scheduleForm.threshold.$error"\n             data-ng-show="scheduleForm.threshold.$dirty">\n            <label data-ng-message="required" class="form-message form-error">\n                <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>This field is required</label>\n        </div>\n        <div class="text-muted m-sm-top">\n            Minimize withdrawal fees by choosing larger amounts.\n                <a target="_blank"\n       class="d-none-mobile-app"\n       href="https://support.upwork.com/hc/en-us/articles/211063738-Access-Your-Earnings"  ng-click="eventLogClick(&quot;learn_more_fee&quot;)">Learn more</a>\n\n        </div>\n    </div>\n    <div class="form-group mb-0">\n        <div class="m-sm-bottom">\n            <strong>Next Payment</strong>\n            <span class="text-muted">(based on your schedule)</span>\n        </div>\n        <p class="form-control-static">{{getNextDate()|date:\'MMMM d, yyyy\'}}</p>\n    </div>\n</div>\n',"/ab/payments/resource/disbursement-schedule-form-modal.html":'<up-c-modal bpa-custom-element\n            auto-open\n            ng-on-close="vm.handleClose($event)"\n            ng-method-close="vm.close"\n            modal-footer-inverse\n            size="sm"\n            page-title="Edit payment schedule"\n            class="bpa-modal-with-alerts">\n    <div slot="body">\n        <disbursement-schedule-form\n                interface-object="vm.form"\n                callback-object="vm.formCallbacks"\n                disbursement-schedule="vm.schedule"\n                payment-methods="vm.paymentMethods"\n                accounting-entity="vm.currentAccountRid"\n        ></disbursement-schedule-form>\n    </div>\n    <div slot="footer" ng-class="vm.isSmallScreen() ? \'bpa-mobile-stacked-buttons\' : \'text-right\'">\n        <button type="button"\n                class="btn btn-link btn-block-sm mt-10 mt-md-0 text-capitalize"\n                data-ng-click="vm.cancel()">Cancel</button>\n        <button type="button"\n                name="submitButton"\n                class="btn btn-primary btn-block-sm text-capitalize"\n                data-ng-click="vm.form.submit()"\n                data-ng-disabled="vm.form.isBlocked()">Save Changes</button>\n    </div>\n</up-c-modal>\n',"/ab/payments/resource/disbursement-methods-popup.html":'<up-c-modal bpa-custom-element\n            auto-open\n            ng-on-close="vm.handleClose($event)"\n            page-title="Add a payment method"\n            class="bpa-disbursement-methods-popup">\n    <div slot="body">\n        <div bpa-event-tracking="submit" tracking-sublocation="add_method">\n            <div class="m-xs-bottom" data-ng-if="vm.paymentTypes.recommendedTypes.length">\n                <div class="p-md-bottom">\n                    <h3 class="m-sm-top-bottom p-md-left">Recommended for {{ vm.paymentTypes.country.name }}</h3>\n                    <hr class="m-0-top-bottom" />\n                    <payment-types-list\n                            payment-types="vm.paymentTypes.recommendedTypes"\n                            country="vm.paymentTypes.country" />\n                </div>\n                <div>\n                    <h3 class="m-sm-top-bottom p-md-left">Also Available</h3>\n                    <hr class="m-0-top-bottom" />\n                    <payment-types-list\n                            payment-types="vm.paymentTypes.types"\n                            country="vm.paymentTypes.country" />\n                </div>\n            </div>\n            <div class="m-xs-bottom" data-ng-if="!vm.paymentTypes.recommendedTypes.length">\n                <payment-types-list\n                        payment-types="vm.paymentTypes.types"\n                        country="vm.paymentTypes.country" />\n            </div>\n        </div>\n    </div>\n</up-c-modal>\n',"/ab/payments/resource/disbursement-method-types-list.html":'\n\n\n\n\n\n\n\n<div class="m-0-top-bottom" data-ng-repeat="paymentType in paymentTypes" ng-if="paymentType.setupLink.type === \'add\'">\n    <div class="p-md-top" data-ng-class="{ \'p-xs-bottom\': !$last, \'p-0-bottom\': $last}" data-ng-switch="paymentType.type">\n                    <div class="row d-none d-md-flex" data-ng-switch-when="LFT">\n                    <div class="col-md-3 p-xs-left">\n                                            <img                 data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/lft.png"  class="center-block" alt="{{ paymentType.currency.clearingSystem }} ({{ paymentType.currency.code }})" width="93" height="72"/>    \n            </div>\n                <div class="col-md-6 p-xs-left p-0-right">\n                        <p class="m-0-bottom"><strong>{{ paymentType.currency.clearingSystem }} ({{ paymentType.currency.code }})</strong></p>\n                                                    <ul data-ng-class="{ \'list-unstyled\': paymentType.isRecommended && $first }" class="m-sm-top">\n                    <li>\n                        <small class="text-muted">\n                            <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>${{ paymentType.fee|number }} USD per withdrawal</small>\n                    </li>\n                                            <li>\n                            <small class="text-muted">\n                                <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>Deposit to your local bank account in {{ paymentType.currency.code }}</small>\n                        </li>\n                                    </ul>\n                                </div>\n        <div class="col-md-3 text-right">\n                            <a data-ng-if="paymentType.setupLink"\n                   target="_self"\n                   class="btn btn-block-sm btn-sm m-0"\n                   data-ng-class="{ \'btn-primary\': paymentType.isRecommended && $first, \'btn-default\': !(paymentType.isRecommended && $first) }"\n                   data-ng-href="{{ paymentType.setupLink.link }}"\n                   bpa-event-tracking\n                   tracking-label="set_up"\n                   tracking-data="{ target_upm: paymentType.type, target_currency: paymentType.currency.code }">Set Up</a>\n                    </div>\n    </div>\n    <div class="d-block d-md-none" data-ng-switch-when="LFT">\n        <div class="m-md-left-right d-table">\n            <div class="text-center d-table-cell vertical-align-middle payment-type-img-container">                            <img                 data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/lft.png"  class="img-responsive d-inline-block payment-type-img"/>    </div>\n            <div class="flex-1 p-sm-left d-table-cell vertical-align-middle">            <p class="m-0-bottom"><strong>{{ paymentType.currency.clearingSystem }} ({{ paymentType.currency.code }})</strong></p>\n            </div>\n        </div>\n        <div class="m-md-left-right">                            <ul data-ng-class="{ \'list-unstyled\': paymentType.isRecommended && $first }" class="m-sm-top">\n                    <li>\n                        <small class="text-muted">\n                            <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>${{ paymentType.fee|number }} USD per withdrawal</small>\n                    </li>\n                                            <li>\n                            <small class="text-muted">\n                                <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>Deposit to your local bank account in {{ paymentType.currency.code }}</small>\n                        </li>\n                                    </ul>\n                        </div>\n        <div class="m-md-left-right">                <a data-ng-if="paymentType.setupLink"\n                   target="_self"\n                   class="btn btn-block-sm btn-sm m-0"\n                   data-ng-class="{ \'btn-primary\': paymentType.isRecommended && $first, \'btn-default\': !(paymentType.isRecommended && $first) }"\n                   data-ng-href="{{ paymentType.setupLink.link }}"\n                   bpa-event-tracking\n                   tracking-label="set_up"\n                   tracking-data="{ target_upm: paymentType.type, target_currency: paymentType.currency.code }">Set Up</a>\n            </div>\n    </div>\n            <div class="row d-none d-md-flex" data-ng-switch-when="GACH">\n                    <div class="col-md-3 p-0-left">\n                                            <img                 data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/wire-ach.png"  class="center-block" alt="{{ paymentType.currency.clearingSystem }} ({{ paymentType.currency.code }})" width="57" height="60"/>    \n            </div>\n                <div class="col-md-6 p-xs-left p-0-right">\n                        <p class="m-0-bottom"><strong>{{ paymentType.currency.clearingSystem }} ({{ paymentType.currency.code }})</strong></p>\n                                                    <ul data-ng-class="{ \'list-unstyled\': paymentType.isRecommended && $first }" class="m-sm-top">\n                    <li>\n                        <small class="text-muted">\n                            <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>${{ paymentType.fee|number }} USD per withdrawal</small>\n                    </li>\n                                            <li>\n                            <small class="text-muted">\n                                <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>Deposit to your local bank account in {{ paymentType.currency.code }}</small>\n                        </li>\n                                    </ul>\n                                </div>\n        <div class="col-md-3 text-right">\n                            <a data-ng-if="paymentType.setupLink"\n                   target="_self"\n                   class="btn btn-block-sm btn-sm m-0"\n                   data-ng-class="{ \'btn-primary\': paymentType.isRecommended && $first, \'btn-default\': !(paymentType.isRecommended && $first) }"\n                   data-ng-href="{{ paymentType.setupLink.link }}"\n                   bpa-event-tracking\n                   tracking-label="set_up"\n                   tracking-data="{ target_upm: paymentType.type, target_currency: paymentType.currency.code }">Set Up</a>\n                    </div>\n    </div>\n    <div class="d-block d-md-none" data-ng-switch-when="GACH">\n        <div class="m-md-left-right d-table">\n            <div class="text-center d-table-cell vertical-align-middle payment-type-img-container">                            <img                 data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/wire-ach.png"  class="img-responsive d-inline-block payment-type-img"/>    </div>\n            <div class="flex-1 p-sm-left d-table-cell vertical-align-middle">            <p class="m-0-bottom"><strong>{{ paymentType.currency.clearingSystem }} ({{ paymentType.currency.code }})</strong></p>\n            </div>\n        </div>\n        <div class="m-md-left-right">                            <ul data-ng-class="{ \'list-unstyled\': paymentType.isRecommended && $first }" class="m-sm-top">\n                    <li>\n                        <small class="text-muted">\n                            <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>${{ paymentType.fee|number }} USD per withdrawal</small>\n                    </li>\n                                            <li>\n                            <small class="text-muted">\n                                <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>Deposit to your local bank account in {{ paymentType.currency.code }}</small>\n                        </li>\n                                    </ul>\n                        </div>\n        <div class="m-md-left-right">                <a data-ng-if="paymentType.setupLink"\n                   target="_self"\n                   class="btn btn-block-sm btn-sm m-0"\n                   data-ng-class="{ \'btn-primary\': paymentType.isRecommended && $first, \'btn-default\': !(paymentType.isRecommended && $first) }"\n                   data-ng-href="{{ paymentType.setupLink.link }}"\n                   bpa-event-tracking\n                   tracking-label="set_up"\n                   tracking-data="{ target_upm: paymentType.type, target_currency: paymentType.currency.code }">Set Up</a>\n            </div>\n    </div>\n            <div class="row d-none d-md-flex" data-ng-switch-when="WIRE">\n                    <div class="col-md-3 p-0-left">\n                                            <img                 data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/wire-ach.png"  class="center-block" alt="{{ paymentType.currency.clearingSystem }} ({{ paymentType.currency.code }})" width="57" height="60"/>    \n            </div>\n                <div class="col-md-6 p-xs-left p-0-right">\n                        <p class="m-0-bottom"><strong>{{ paymentType.currency.clearingSystem }} ({{ paymentType.currency.code }})</strong></p>\n                                                    <ul data-ng-class="{ \'list-unstyled\': paymentType.isRecommended && $first }" class="m-sm-top">\n                    <li>\n                        <small class="text-muted">\n                            <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>${{ paymentType.fee|number }} USD per withdrawal</small>\n                    </li>\n                                            <li>\n                            <small class="text-muted">\n                                <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>Send funds via wire to any bank in {{ paymentType.currency.code }}</small>\n                        </li>\n                                    </ul>\n                                </div>\n        <div class="col-md-3 text-right">\n                            <a data-ng-if="paymentType.setupLink"\n                   target="_self"\n                   class="btn btn-block-sm btn-sm m-0"\n                   data-ng-class="{ \'btn-primary\': paymentType.isRecommended && $first, \'btn-default\': !(paymentType.isRecommended && $first) }"\n                   data-ng-href="{{ paymentType.setupLink.link }}"\n                   bpa-event-tracking\n                   tracking-label="set_up"\n                   tracking-data="{ target_upm: paymentType.type, target_currency: paymentType.currency.code }">Set Up</a>\n                    </div>\n    </div>\n    <div class="d-block d-md-none" data-ng-switch-when="WIRE">\n        <div class="m-md-left-right d-table">\n            <div class="text-center d-table-cell vertical-align-middle payment-type-img-container">                            <img                 data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/wire-ach.png"  class="img-responsive d-inline-block payment-type-img"/>    </div>\n            <div class="flex-1 p-sm-left d-table-cell vertical-align-middle">            <p class="m-0-bottom"><strong>{{ paymentType.currency.clearingSystem }} ({{ paymentType.currency.code }})</strong></p>\n            </div>\n        </div>\n        <div class="m-md-left-right">                            <ul data-ng-class="{ \'list-unstyled\': paymentType.isRecommended && $first }" class="m-sm-top">\n                    <li>\n                        <small class="text-muted">\n                            <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>${{ paymentType.fee|number }} USD per withdrawal</small>\n                    </li>\n                                            <li>\n                            <small class="text-muted">\n                                <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>Send funds via wire to any bank in {{ paymentType.currency.code }}</small>\n                        </li>\n                                    </ul>\n                        </div>\n        <div class="m-md-left-right">                <a data-ng-if="paymentType.setupLink"\n                   target="_self"\n                   class="btn btn-block-sm btn-sm m-0"\n                   data-ng-class="{ \'btn-primary\': paymentType.isRecommended && $first, \'btn-default\': !(paymentType.isRecommended && $first) }"\n                   data-ng-href="{{ paymentType.setupLink.link }}"\n                   bpa-event-tracking\n                   tracking-label="set_up"\n                   tracking-data="{ target_upm: paymentType.type, target_currency: paymentType.currency.code }">Set Up</a>\n            </div>\n    </div>\n            <div class="row d-none d-md-flex" data-ng-switch-when="MPS">\n                    <div class="col-md-3 p-xs-left">\n                                            <img                 data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/mpesa.png"  class="center-block" alt="M-PESA" width="95" height="48"/>    \n            </div>\n                <div class="col-md-6 p-xs-left p-0-right">\n                        <p class="m-0-bottom"><strong>M-PESA</strong></p>\n                                                    <ul data-ng-class="{ \'list-unstyled\': paymentType.isRecommended && $first }" class="m-sm-top">\n                    <li>\n                        <small class="text-muted">\n                            <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>${{ paymentType.fee|number }} USD per withdrawal</small>\n                    </li>\n                                    </ul>\n                                </div>\n        <div class="col-md-3 text-right">\n                            <a data-ng-if="paymentType.setupLink"\n                   target="_self"\n                   class="btn btn-block-sm btn-sm m-0"\n                   data-ng-class="{ \'btn-primary\': paymentType.isRecommended && $first, \'btn-default\': !(paymentType.isRecommended && $first) }"\n                   data-ng-href="{{ paymentType.setupLink.link }}"\n                   bpa-event-tracking\n                   tracking-label="set_up"\n                   tracking-data="{ target_upm: paymentType.type, target_currency: paymentType.currency.code }">Set Up</a>\n                    </div>\n    </div>\n    <div class="d-block d-md-none" data-ng-switch-when="MPS">\n        <div class="m-md-left-right d-table">\n            <div class="text-center d-table-cell vertical-align-middle payment-type-img-container">                            <img                 data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/mpesa.png"  class="img-responsive d-inline-block payment-type-img"/>    </div>\n            <div class="flex-1 p-sm-left d-table-cell vertical-align-middle">            <p class="m-0-bottom"><strong>M-PESA</strong></p>\n            </div>\n        </div>\n        <div class="m-md-left-right">                            <ul data-ng-class="{ \'list-unstyled\': paymentType.isRecommended && $first }" class="m-sm-top">\n                    <li>\n                        <small class="text-muted">\n                            <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>${{ paymentType.fee|number }} USD per withdrawal</small>\n                    </li>\n                                    </ul>\n                        </div>\n        <div class="m-md-left-right">                <a data-ng-if="paymentType.setupLink"\n                   target="_self"\n                   class="btn btn-block-sm btn-sm m-0"\n                   data-ng-class="{ \'btn-primary\': paymentType.isRecommended && $first, \'btn-default\': !(paymentType.isRecommended && $first) }"\n                   data-ng-href="{{ paymentType.setupLink.link }}"\n                   bpa-event-tracking\n                   tracking-label="set_up"\n                   tracking-data="{ target_upm: paymentType.type, target_currency: paymentType.currency.code }">Set Up</a>\n            </div>\n    </div>\n            <div class="row d-none d-md-flex" data-ng-switch-when="PAYPAL">\n                    <div class="col-md-3 p-xs-left">\n                                            <img                 data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/paypal-small.png"  class="center-block m-md-top" alt="PayPal" width="97" height="25"/>    \n            </div>\n                <div class="col-md-6 p-xs-left p-0-right">\n                        <p class="m-0-bottom"><strong>PayPal</strong></p>\n                                                    <ul class="m-sm-top">\n                    <li>\n                        <small class="text-muted">${{ paymentType.fee|number }} USD Upwork withdrawal fee</small>\n                    </li>\n                    <li>\n                        <small class="text-muted">\n                            PayPal may charge <a target="_blank"\n           data-ng-href="https://www.paypal.com/cgi-bin/webscr?cmd=_display-withdrawal-fees-outside"\n            bpa-event-tracking="" tracking-label="{{ paymentType.type === &#039;PAYPAL&#039; ? &#039;paypal_fees&#039; : &#039;payoneer_fees&#039; }}">additional fees</a> for sending and withdrawing funds.<span data-ng-if="paymentType.setupLink.type ==\'add\'">\n                                                                    <div class="d-sm-none"></div><a target="_blank"\n           data-ng-href="https://www.paypal.com/us/webapps/mpp/account-selection"\n            bpa-event-tracking="" tracking-label="no_paypal">Don&#039;t have a PayPal account?</a>                            </span>\n                        </small>\n                    </li>\n                </ul>\n                                </div>\n        <div class="col-md-3 text-right">\n                            <a data-ng-if="paymentType.setupLink"\n                   target="_self"\n                   class="btn btn-block-sm btn-sm m-0"\n                   data-ng-class="{ \'btn-primary\': paymentType.isRecommended && $first, \'btn-default\': !(paymentType.isRecommended && $first) }"\n                   data-ng-href="{{ paymentType.setupLink.link }}"\n                   bpa-event-tracking\n                   tracking-label="set_up"\n                   tracking-data="{ target_upm: paymentType.type, target_currency: paymentType.currency.code }">Set Up</a>\n                    </div>\n    </div>\n    <div class="d-block d-md-none" data-ng-switch-when="PAYPAL">\n        <div class="m-md-left-right d-table">\n            <div class="text-center d-table-cell vertical-align-middle payment-type-img-container">                            <img                 data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/paypal-small.png"  class="img-responsive d-inline-block payment-type-img"/>    </div>\n            <div class="flex-1 p-sm-left d-table-cell vertical-align-middle">            <p class="m-0-bottom"><strong>PayPal</strong></p>\n            </div>\n        </div>\n        <div class="m-md-left-right">                            <ul class="m-sm-top">\n                    <li>\n                        <small class="text-muted">${{ paymentType.fee|number }} USD Upwork withdrawal fee</small>\n                    </li>\n                    <li>\n                        <small class="text-muted">\n                            PayPal may charge <a target="_blank"\n           data-ng-href="https://www.paypal.com/cgi-bin/webscr?cmd=_display-withdrawal-fees-outside"\n            bpa-event-tracking="" tracking-label="{{ paymentType.type === &#039;PAYPAL&#039; ? &#039;paypal_fees&#039; : &#039;payoneer_fees&#039; }}">additional fees</a> for sending and withdrawing funds.<span data-ng-if="paymentType.setupLink.type ==\'add\'">\n                                                                    <div class="d-sm-none"></div><a target="_blank"\n           data-ng-href="https://www.paypal.com/us/webapps/mpp/account-selection"\n            bpa-event-tracking="" tracking-label="no_paypal">Don&#039;t have a PayPal account?</a>                            </span>\n                        </small>\n                    </li>\n                </ul>\n                        </div>\n        <div class="m-md-left-right">                <a data-ng-if="paymentType.setupLink"\n                   target="_self"\n                   class="btn btn-block-sm btn-sm m-0"\n                   data-ng-class="{ \'btn-primary\': paymentType.isRecommended && $first, \'btn-default\': !(paymentType.isRecommended && $first) }"\n                   data-ng-href="{{ paymentType.setupLink.link }}"\n                   bpa-event-tracking\n                   tracking-label="set_up"\n                   tracking-data="{ target_upm: paymentType.type, target_currency: paymentType.currency.code }">Set Up</a>\n            </div>\n    </div>\n            <div class="row d-none d-md-flex" data-ng-switch-when="PAYONEER">\n                    <div class="col-md-3 p-xs-left">\n                                            <img                 data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/payoneer.png"  class="center-block m-md-top" alt="Payoneer" width="94" height="34"/>    \n            </div>\n                <div class="col-md-6 p-xs-left p-0-right">\n                        <p class="m-0-bottom"><strong>Payoneer</strong></p>\n                                                    <ul class="m-sm-top">\n                    <li>\n                        <small class="text-muted">${{ paymentType.fee|number }} USD per withdrawal</small>\n                    </li>\n                    <li>\n                        <small class="text-muted">\n                            Payoneer charges <a target="_blank"\n           data-ng-href="https://payouts.payoneer.com/Partners/Default/fees.aspx?pid=1889000"\n            bpa-event-tracking="" tracking-label="{{ paymentType.type === &#039;PAYPAL&#039; ? &#039;paypal_fees&#039; : &#039;payoneer_fees&#039; }}">additional fees</a> to withdraw funds.<span data-ng-if="paymentType.setupLink.type ==\'add\'">\n                                Don\'t have a <a target="_self"\n           data-ng-href="{{ paymentType.setupLink.link }}"\n            bpa-event-tracking="" tracking-label="no_payoneer">Payoneer account</a>?                            </span>\n                        </small>\n                    </li>\n                </ul>\n                                </div>\n        <div class="col-md-3 text-right">\n                            <a data-ng-if="paymentType.setupLink"\n                   target="_self"\n                   class="btn btn-block-sm btn-sm m-0"\n                   data-ng-class="{ \'btn-primary\': paymentType.isRecommended && $first, \'btn-default\': !(paymentType.isRecommended && $first) }"\n                   data-ng-href="{{ paymentType.setupLink.link }}"\n                   bpa-event-tracking\n                   tracking-label="set_up"\n                   tracking-data="{ target_upm: paymentType.type, target_currency: paymentType.currency.code }">Set Up</a>\n                    </div>\n    </div>\n    <div class="d-block d-md-none" data-ng-switch-when="PAYONEER">\n        <div class="m-md-left-right d-table">\n            <div class="text-center d-table-cell vertical-align-middle payment-type-img-container">                            <img                 data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/payoneer.png"  class="img-responsive d-inline-block payment-type-img"/>    </div>\n            <div class="flex-1 p-sm-left d-table-cell vertical-align-middle">            <p class="m-0-bottom"><strong>Payoneer</strong></p>\n            </div>\n        </div>\n        <div class="m-md-left-right">                            <ul class="m-sm-top">\n                    <li>\n                        <small class="text-muted">${{ paymentType.fee|number }} USD per withdrawal</small>\n                    </li>\n                    <li>\n                        <small class="text-muted">\n                            Payoneer charges <a target="_blank"\n           data-ng-href="https://payouts.payoneer.com/Partners/Default/fees.aspx?pid=1889000"\n            bpa-event-tracking="" tracking-label="{{ paymentType.type === &#039;PAYPAL&#039; ? &#039;paypal_fees&#039; : &#039;payoneer_fees&#039; }}">additional fees</a> to withdraw funds.<span data-ng-if="paymentType.setupLink.type ==\'add\'">\n                                Don\'t have a <a target="_self"\n           data-ng-href="{{ paymentType.setupLink.link }}"\n            bpa-event-tracking="" tracking-label="no_payoneer">Payoneer account</a>?                            </span>\n                        </small>\n                    </li>\n                </ul>\n                        </div>\n        <div class="m-md-left-right">                <a data-ng-if="paymentType.setupLink"\n                   target="_self"\n                   class="btn btn-block-sm btn-sm m-0"\n                   data-ng-class="{ \'btn-primary\': paymentType.isRecommended && $first, \'btn-default\': !(paymentType.isRecommended && $first) }"\n                   data-ng-href="{{ paymentType.setupLink.link }}"\n                   bpa-event-tracking\n                   tracking-label="set_up"\n                   tracking-data="{ target_upm: paymentType.type, target_currency: paymentType.currency.code }">Set Up</a>\n            </div>\n    </div>\n            <div class="row d-none d-md-flex" data-ng-switch-when="ACH">\n                    <div class="col-md-3 p-0-left">\n                                            <img                 data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/wire-ach.png"  class="center-block" alt="Direct to U.S. Bank (USD)" width="57" height="60"/>    \n            </div>\n                <div class="col-md-6 p-xs-left p-0-right">\n                        <p class="m-0-bottom"><strong>Direct to U.S. Bank (USD)</strong></p>\n                                                    <ul data-ng-class="{ \'list-unstyled\': paymentType.isRecommended && $first }" class="m-sm-top">\n                    <li>\n                        <small class="text-muted">\n                            <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>Free payments to U.S. banks</small>\n                    </li>\n                                            <li>\n                            <small class="text-muted">\n                                <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>Deposit to a U.S. bank account in {{ paymentType.currency.code }}</small>\n                        </li>\n                                    </ul>\n                                </div>\n        <div class="col-md-3 text-right">\n                            <a data-ng-if="paymentType.setupLink"\n                   target="_self"\n                   class="btn btn-block-sm btn-sm m-0"\n                   data-ng-class="{ \'btn-primary\': paymentType.isRecommended && $first, \'btn-default\': !(paymentType.isRecommended && $first) }"\n                   data-ng-href="{{ paymentType.setupLink.link }}"\n                   bpa-event-tracking\n                   tracking-label="set_up"\n                   tracking-data="{ target_upm: paymentType.type, target_currency: paymentType.currency.code }">Set Up</a>\n                    </div>\n    </div>\n    <div class="d-block d-md-none" data-ng-switch-when="ACH">\n        <div class="m-md-left-right d-table">\n            <div class="text-center d-table-cell vertical-align-middle payment-type-img-container">                            <img                 data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/wire-ach.png"  class="img-responsive d-inline-block payment-type-img"/>    </div>\n            <div class="flex-1 p-sm-left d-table-cell vertical-align-middle">            <p class="m-0-bottom"><strong>Direct to U.S. Bank (USD)</strong></p>\n            </div>\n        </div>\n        <div class="m-md-left-right">                            <ul data-ng-class="{ \'list-unstyled\': paymentType.isRecommended && $first }" class="m-sm-top">\n                    <li>\n                        <small class="text-muted">\n                            <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>Free payments to U.S. banks</small>\n                    </li>\n                                            <li>\n                            <small class="text-muted">\n                                <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>Deposit to a U.S. bank account in {{ paymentType.currency.code }}</small>\n                        </li>\n                                    </ul>\n                        </div>\n        <div class="m-md-left-right">                <a data-ng-if="paymentType.setupLink"\n                   target="_self"\n                   class="btn btn-block-sm btn-sm m-0"\n                   data-ng-class="{ \'btn-primary\': paymentType.isRecommended && $first, \'btn-default\': !(paymentType.isRecommended && $first) }"\n                   data-ng-href="{{ paymentType.setupLink.link }}"\n                   bpa-event-tracking\n                   tracking-label="set_up"\n                   tracking-data="{ target_upm: paymentType.type, target_currency: paymentType.currency.code }">Set Up</a>\n            </div>\n    </div>\n            <div class="row d-none d-md-flex" data-ng-switch-when="ACH_US">\n                    <div class="col-md-3 p-0-left">\n                                            <img                 data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/wire-ach.png"  class="center-block" alt="Direct Deposit/ACH" width="57" height="60"/>    \n            </div>\n                <div class="col-md-6 p-xs-left p-0-right">\n                        <p class="m-0-bottom"><strong>Direct Deposit/ACH</strong></p>\n                                                    <ul data-ng-class="{ \'list-unstyled\': paymentType.isRecommended && $first }" class="m-sm-top">\n                    <li>\n                        <small class="text-muted">\n                            <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>Free</small>\n                    </li>\n                                            <li>\n                            <small class="text-muted">\n                                <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>Deposit to a U.S. bank account in {{ paymentType.currency.code }}</small>\n                        </li>\n                                    </ul>\n                                </div>\n        <div class="col-md-3 text-right">\n                            <a data-ng-if="paymentType.setupLink"\n                   target="_self"\n                   class="btn btn-block-sm btn-sm m-0"\n                   data-ng-class="{ \'btn-primary\': paymentType.isRecommended && $first, \'btn-default\': !(paymentType.isRecommended && $first) }"\n                   data-ng-href="{{ paymentType.setupLink.link }}"\n                   bpa-event-tracking\n                   tracking-label="set_up"\n                   tracking-data="{ target_upm: paymentType.type, target_currency: paymentType.currency.code }">Set Up</a>\n                    </div>\n    </div>\n    <div class="d-block d-md-none" data-ng-switch-when="ACH_US">\n        <div class="m-md-left-right d-table">\n            <div class="text-center d-table-cell vertical-align-middle payment-type-img-container">                            <img                 data-bpa-image-asset related-script="js/bpa-ui-combined.js" relative-src="images/wire-ach.png"  class="img-responsive d-inline-block payment-type-img"/>    </div>\n            <div class="flex-1 p-sm-left d-table-cell vertical-align-middle">            <p class="m-0-bottom"><strong>Direct Deposit/ACH</strong></p>\n            </div>\n        </div>\n        <div class="m-md-left-right">                            <ul data-ng-class="{ \'list-unstyled\': paymentType.isRecommended && $first }" class="m-sm-top">\n                    <li>\n                        <small class="text-muted">\n                            <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>Free</small>\n                    </li>\n                                            <li>\n                            <small class="text-muted">\n                                <span data-ng-if="paymentType.isRecommended && $first" class="glyphicon air-icon-check text-primary m-0-left" aria-hidden="true"></span>Deposit to a U.S. bank account in {{ paymentType.currency.code }}</small>\n                        </li>\n                                    </ul>\n                        </div>\n        <div class="m-md-left-right">                <a data-ng-if="paymentType.setupLink"\n                   target="_self"\n                   class="btn btn-block-sm btn-sm m-0"\n                   data-ng-class="{ \'btn-primary\': paymentType.isRecommended && $first, \'btn-default\': !(paymentType.isRecommended && $first) }"\n                   data-ng-href="{{ paymentType.setupLink.link }}"\n                   bpa-event-tracking\n                   tracking-label="set_up"\n                   tracking-data="{ target_upm: paymentType.type, target_currency: paymentType.currency.code }">Set Up</a>\n            </div>\n    </div>\n    </div>\n    <hr class="m-0-bottom m-0-top-md" data-ng-hide="$last" />\n</div>\n',"/ab/payments/resource/disburse-warning-tax-info.html":'<span slot="header-title">Complete tax information</span>\n<div slot="body">\n    <div data-ng-switch="$parent.vm.properties.taxInfoType">\n        <span data-ng-switch-when="w8">In order to withdraw earnings, please complete a <strong>W8BEN Foreign Status Certification</strong>. If you are a U.S. taxpayer living outside of the United States, please complete a W9 Form.\n</span>\n        <span data-ng-switch-when="w9">In order to withdraw earnings, please complete a <strong>W9 Form</strong>.</span>\n    </div>\n</div>\n<div slot="footer" ng-class="$parent.vm.isSmallScreen() ? \'bpa-mobile-stacked-buttons\' : \'text-right\'">\n    <a class="btn btn-link btn-block-sm mt-10 mt-md-0" data-ng-click="$parent.vm.cancel()">Cancel</a>\n    <button class="btn btn-primary btn-block-sm" data-ng-click="$parent.vm.ok()">Go to Tax Settings</button>\n</div>\n',"/ab/payments/resource/disburse-warning-account-suspended.html":'<span slot="header-title">Account suspended</span>\n<div slot="body">\n    Your financial account has been suspended. To proceed, please contact Customer Support.\n</div>\n<div slot="footer" ng-class="$parent.vm.isSmallScreen() ? \'bpa-mobile-stacked-buttons\' : \'text-right\'">\n    <a class="btn btn-link btn-block-sm mt-10 mt-md-0" data-ng-click="$parent.vm.cancel()">Cancel</a>\n    <button class="btn btn-primary btn-block-sm" data-ng-click="$parent.vm.ok()">Contact Customer Support</button>\n</div>\n',"/ab/payments/resource/disburse-warning-no-payment-methods.html":'<span slot="header-title">Add a payment method</span>\n<div slot="body">\n    In order to withdraw earnings, please set up a payment method. Note that it may take up to 3 days to activate your payment method.\n\n</div>\n<div slot="footer" ng-class="$parent.vm.isSmallScreen() ? \'bpa-mobile-stacked-buttons\' : \'text-right\'">\n    <a class="btn btn-link btn-block-sm mt-10 mt-md-0" data-ng-click="$parent.vm.cancel()">Cancel</a>\n    <button class="btn btn-primary btn-block-sm" data-ng-click="$parent.vm.ok()">Add Payment Method</button>\n</div>\n',"/ab/payments/resource/disburse-warning-method-not-valid.html":'<span slot="header-title">Payment method not active</span>\n<div slot="body">\n    For security reasons, after you add a new payment method, you must wait 3 days to use it.\n</div>\n<div slot="footer" class="text-right">\n    <button class="btn btn-primary btn-block-sm" data-ng-click="$parent.vm.ok()">Ok</button>\n</div>\n',"/ab/payments/resource/disburse-warning-no-active-methods.html":'<span slot="header-title">No active payment methods</span>\n<div slot="body">\n    You have no active payment methods.\n</div>\n<div slot="footer" class="text-right">\n    <button class="btn btn-primary btn-block-sm" data-ng-click="$parent.vm.ok()">Ok</button>\n</div>\n',"/ab/payments/resource/disbursement-methods-removal-confirmation.html":'<span slot="header-title">Remove method</span>\n<div slot="body">\n    Are you sure you want to remove this withdrawal method?\n</div>\n<div slot="footer" class="btn-row text-right">\n    <a class="btn btn-link mr-0" data-ng-click="$parent.vm.cancel()">Cancel</a>\n    <button class="btn btn-primary" data-ng-click="$parent.vm.ok()">Yes, Remove</button>\n</div>\n',"/ab/payments/resource/initiate-verification-modal.html":'<span slot="header-title">Initiate verification</span>\n<div slot="body">\n    We will send 2 small deposits to your bank account. You should receive it in 2-3 business days. Verify your bank by providing the deposits at Upwork.\n\n</div>\n<div slot="footer" ng-class="$parent.vm.isSmallScreen() ? \'bpa-mobile-stacked-buttons\' : \'text-right\'">\n    <a class="btn btn-link btn-block-sm mt-10 mt-md-0" data-ng-click="$parent.vm.cancel()">Cancel</a>\n    <button class="btn btn-primary btn-block-sm text-capitalize" data-ng-click="$parent.vm.ok()">Yes, initiate verification</button>\n</div>\n',"/ab/payments/resource/template-financial-account-selector.html":'<div class="ng-form" ng-show="aeCollection">\n    <div class="m-md-bottom">\n        <div class="p-0-top p-xs-right p-xs-bottom p-sm-right d-md-inline-block">Financial Account: </div>\n        <div class="d-md-inline-block width-md"\n             bpa-select\n             choices="aeCollection"\n             id-map="item.id"\n             value-map="item"\n             label-map="item.label"\n             data-placeholder="Please select..."\n             ng-model="selectedAe"\n             ng-change="change()"\n             bpa-custom-element\n             ng-on-closed="dropdownDidClose()"\n        ></div>\n    </div>\n</div>\n',"/ab/payments/resources/html/form-controls.partial.html":'<div class="bpa-controls">\n    <footer data-ng-if="commObject.isPagedMode()" class="p-0-top-bottom">\n        <div class="btn-row">\n            <button type="button"\n                    name="nextButton"\n                    id="nextButton"\n                    class="btn btn-primary m-0-top-bottom m-0-left no-hide-animation"\n                    data-ng-click="commObject.nextPage()"\n                    data-ng-show="!commObject.isLastPage()"\n                    data-ng-class="{ \'m-0-right\': commObject.isFirstPage() }">Continue</button>\n\n            <button type="button"\n                    name="submitButton"\n                    id="submitButton"\n                    class="btn btn-primary m-0-top-bottom m-0-left no-hide-animation"\n                    data-ng-show="commObject.isLastPage()"\n                    data-ng-click="commObject.submit()"\n                    data-ng-disabled="!commObject.isSubmitAllowed()">{{ submitLabel }}</button>\n\n            <a class="btn btn-link m-0-top-bottom m-0-right no-hide-animation"\n               data-ng-click="commObject.previousPage()"\n               data-ng-show="!commObject.isFirstPage()">Back</a>\n        </div>\n    </footer>\n    <footer data-ng-if="!commObject.isPagedMode()" class="p-lg-top-bottom">\n        <button type="button" name="submitButton" id="submitButton" class="btn btn-primary m-0-top-bottom m-0-left"\n                data-ng-click="commObject.submit()"\n                data-ng-disabled="!commObject.isSubmitAllowed()">{{ submitLabel }}</button>\n\n        <button type="button" name="removeButton" id="removeButton" class="btn btn-default m-0-top-bottom"\n                data-ng-if="showRemoveButton"\n                data-ng-click="commObject.remove()">Remove</button>\n\n        <a class="btn btn-link m-0-top-bottom"\n           data-ng-click="commObject.formIsCancelled()"\n           data-ng-href="{{cancelUrl}}">\n            Cancel        </a>\n    </footer>\n</div>\n',"/ab/payments/resource/alert-messages.html":'<div ng-class="{ \'m-lg-left\': !resetMargins && !isSmallScreen(), \'m-md-left-right\': !resetMargins && isSmallScreen(), \'m-0-left-right-xs\': isSmallScreen() }">\n    <eo-alert ng-repeat="alertMessage in getAlertMessages() track by $index"\n              ng-if="!alertMessage.accountingEntityRid || !currentAe || alertMessage.accountingEntityRid == currentAe"\n              type="{{alertMessage.type}}" close="closeAlert($index)">\n        <strong data-ng-if="alertMessage.title">{{alertMessage.title}}</strong>\n        <span bpa-bind-compile="alertMessage.message"></span>\n    </eo-alert>\n</div>\n',"/ab/payments/resource/bpa-select.html":'<up-c-dropdown bpa-custom-element ng-prop-page-title="getSelectionLabelText()" auto-close="always" class="bpa-select {{ dropdownClass }}">\n    <span slot="label" class="ellipsis" ng-bind-html="getSelectionLabel()"></span>\n    <ul class="dropdown-menu" slot="menu">\n        <li ng-repeat="option in options track by option.id">\n            <a href="javascript:"\n               ng-class="{ \'active\': isSelected(option.id) }"\n               ng-bind-html="option.label"\n               ng-click="selectionChanged(option.id)"></a>\n        </li>\n    </ul>\n</up-c-dropdown>\n',"/ab/payments/resource/payment-method-selector.html":'<div id="{{ name }}" data-name="{{ name }}" class="ng-form">\n    <div bpa-select\n         choices="paymentsCollection"\n         id-map="item.id || item.rid"\n         value-map="item"\n         label-map="item.formattedName"\n         class="{{ bpaSelectClass }}"\n         dropdown-class="payment-method-selector"\n         data-placeholder="Please select..."\n         ng-model="ngModel"\n         ng-change="change()"\n         name="paymentSelector"\n    ></div>\n</div>\n',"/ab/payments/resource/flash-messages.html":'<eo-alert ng-repeat="message in getMessages() track by $index"\n          type="{{message.type}}" class="m-md-bottom {{getSpecificClass()}}">\n    <strong data-ng-if="message.title">{{message.title}}</strong>\n    <span bpa-bind-compile="message.message"></span>\n</eo-alert>\n',"/ab/payments/resource/template-loading-error-modal.html":'<span slot="header-title">Component loading error</span>\n<div slot="body">Sorry, a critical component of this page failed to load. Please reload the page.</div>\n<div slot="footer" class="text-right">\n    <button class="btn btn-primary btn-block-sm" data-ng-click="$parent.vm.ok()">Reload</button>\n</div>\n',"/ab/payments/tax-info/partials/tax-show.html":'<div class="m-md-top">\n    <p ng-show="isW8()">Before withdrawing funds, all non-U.S. persons must provide their W-8BEN tax information.</p>\n    <p ng-show="isW9()">Before withdrawing funds, all <bpa-help-popover contents="template-us-popover">U.S. persons</bpa-help-popover> must provide their W-9 tax information.</p>\n\n    <div class="form-group">\n        <label class="control-label">Legal Name of Business</label>\n        <p class="form-control-static">{{ taxInfo.legalName ? taxInfo.legalName : "-" }}</p>\n    </div>\n\n    <div class="form-group">\n        <label class="control-label">Address</label>\n        <p class="form-control-static"><bpa-location location="taxInfo.location"></bpa-location></p>\n    </div>\n\n    <div class="form-group m-0-bottom">\n        <label class="control-label">Federal Tax Classification</label>\n        <p class="form-control-static" ng-show="isW8()">\n            N/A - Non-US\n        </p>\n\n        <div ng-switch="taxInfo.classification" ng-show="isW9()"><p class="form-control-static" ng-switch-when="0">Individual/sole proprietor or single-member LLC</p><p class="form-control-static" ng-switch-when="1">C Corporation</p><p class="form-control-static" ng-switch-when="2">S Corporation</p><p class="form-control-static" ng-switch-when="3">Partnership</p><p class="form-control-static" ng-switch-when="4">Trust/estate</p><p class="form-control-static" ng-switch-when="5">Limited liability company</p><p class="form-control-static" ng-switch-when="6">Exempt payee</p><p class="form-control-static" ng-switch-when="7">Other</p></div>\n    </div>\n</div>\n',"/ab/payments/tax-info/partials/tax-form.html":'<eo-alert ng-if="isErrorNotification()" type="danger">\n    Please fix the errors below.</eo-alert>\n\n<div class="ng-form m-md-top" data-name="tax_info">\n    <div class="form-group">\n        <p class="m-sm-bottom">To collect the right information, indicate if you are a <bpa-help-popover contents="template-us-popover">U.S. person</bpa-help-popover>:</p>\n        <div class="radio">\n            <label>\n                <input type="radio"\n                       name="type"\n                       required\n                       value="w8"\n                       ng-model="form.type" />\n                <span class="checkbox-replacement-helper"></span>I am not a U.S. person</label>\n        </div>\n        <div class="radio bpa-bottom-border-sm">\n            <label>\n                <input type="radio"\n                       name="type"\n                       required\n                       value="w9"\n                       ng-model="form.type" />\n                <span class="checkbox-replacement-helper"></span>I am a U.S. person</label>\n        </div>\n        <div ng-messages="tax_info.type.$error" data-ng-show="tax_info.type.$invalid && tax_info.type.$dirty">\n            <label ng-message="required" class="form-message form-error">\n                <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>This field is required</label>\n        </div>\n    </div>\n\n    <p class="no-hide-animation" data-ng-hide="isW9()">Before withdrawing funds, all non-U.S. persons must provide their W-8BEN tax information.</p>\n    <p class="no-hide-animation" data-ng-show="isW9()">Before withdrawing funds, all <bpa-help-popover contents="template-us-popover">U.S. persons</bpa-help-popover> must provide their W-9 tax information.</p>\n\n    <div class="form-group">\n        <label for="tax_info_legalName" class="control-label required">Legal Name of Business</label>\n        <input id="tax_info_legalName"\n               type="text"\n               name="legalName"\n               required\n               maxlength="250"\n               class="form-control"\n               autocomplete="name"\n               ng-model="form.legalName" />\n        <small class="d-inline-block text-muted m-sm-top">\n            Provide the same name as shown on your tax return.\n        </small>\n        <div ng-messages="tax_info.legalName.$error" data-ng-show="tax_info.legalName.$invalid && tax_info.legalName.$dirty">\n            <label ng-message="required" class="form-message form-error">\n                <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>This field is required</label>\n        </div>\n    </div>\n\n    <div class="form-group">\n        <label class="control-label">Address\n            <a href="/companies/profile" ng-show="taxInfo.location.companyLocation" target="_self">Change</a>\n            <a href="/UserSettings/profile" ng-hide="taxInfo.location.companyLocation" target="_self">Change</a>\n        </label>\n        <p class="form-control-static"><bpa-location location="taxInfo.location"></bpa-location></p>\n    </div>\n\n    <div class="form-group" ng-show="isW9()">\n        <label class="control-label required" for="tax_info_classification">Federal Tax Classification</label>\n        <div bpa-select\n             choices="taxInfo.classifications"\n             id-map="resolveClassification(item)"\n             value-map="item.id"\n             label-map="item.label"\n             data-placeholder="Please select..."\n             ng-required="isW9()"\n             ng-model="form.classification"\n             name="classification">\n        </div>\n        <div data-ng-messages="tax_info.classification.$error" data-ng-show="tax_info.classification.$dirty">\n            <label ng-message="required" class="form-message form-error">\n                <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>This field is required</label>\n        </div>\n\n        <input type="text"\n               required\n               name="classificationOther"\n               ng-model="form.classificationOther"\n               ng-required="isW9() && form.classification ==7"\n               ng-show="form.classification ==7"\n               maxlength="50"\n               class="m-sm-top form-control"\n               autocomplete="off" />\n        <div data-ng-messages="tax_info.classificationOther.$error" data-ng-show="tax_info.classificationOther.$dirty">\n            <label data-ng-message="required" class="form-message form-error">\n                <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>This field is required</label>\n        </div>\n    </div>\n\n    <div class="form-group" ng-if="isW9()">\n        <label class="control-label required">Taxpayer Identification Number Type</label>\n        <div class="radio">\n            <label>\n                <input type="radio"\n                       name="tinType"\n                       required\n                       ng-model="form.tinType"\n                       value="SSN" />\n                <span class="checkbox-replacement-helper"></span>Social Security Number (SSN)</label>\n        </div>\n        <div class="radio bpa-bottom-border-sm">\n            <label>\n                <input type="radio"\n                       name="tinType"\n                       required\n                       ng-model="form.tinType"\n                       value="EIN" />\n                <span class="checkbox-replacement-helper"></span>Employer Identification Number (EIN)&nbsp;<bpa-help-popover contents="template-ein-popover">\n                    <span aria-hidden="true" class="glyphicon vertical-align-middle air-icon-question-circle m-0-left-right"></span>\n                </bpa-help-popover>\n            </label>\n        </div>\n        <div data-ng-messages="tax_info.tinType.$error" data-ng-show="tax_info.tinType.$dirty">\n            <label data-ng-message="required" class="form-message form-error">\n                <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>This field is required</label>\n        </div>\n    </div>\n\n    <div class="form-group" ng-if="isW9()">\n        <label class="control-label required" for="tax_info_tin">SSN/EIN #</label>\n        <input type="password"\n               id="tax_info_tin"\n               name="tin"\n               required\n               ng-model="form.tin"\n               bpa-validate-tin\n               data-watch-model="form.tinType"\n               ng-if="isW9()"\n               class="form-control"\n               autocomplete="off" />\n        <div data-ng-messages="tax_info.tin.$error" data-ng-show="tax_info.tin.$dirty">\n            <label data-ng-message="required" class="form-message form-error">\n                <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>This field is required</label>\n            <label data-ng-message="invalidSSN" class="form-message form-error">\n                <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>SSN should be in xxx-xx-xxxx format</label>\n            <label data-ng-message="invalidEIN" class="form-message form-error">\n                <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>EIN should be in xx-xxxxxxx format</label>\n        </div>\n    </div>\n\n    <div class="form-group">\n        <div class="checkbox p-0-bottom m-sm-bottom bpa-bottom-border-sm">\n            <label>\n                <input type="checkbox"\n                       ng-model="form.certification"\n                       name="certification"\n                       class="form-control"\n                       required>\n                <span class="checkbox-replacement-helper">\n                    <span aria-hidden="true" class="glyphicon air-icon-check"></span>\n                </span>I certify, under penalties of perjury, that the representations in this <bpa-help-popover contents="{{ taxCertificateContents() }}">Tax Certificate</bpa-help-popover> are true and correct.\n</label>\n        </div>\n        <div ng-messages="tax_info.certification.$error" data-ng-show="tax_info.certification.$invalid && tax_info.certification.$dirty">\n            <label ng-message="required" class="form-message form-error">\n                <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>This field is required</label>\n        </div>\n    </div>\n</div>\n',"/ab/payments/tax-info/partials/vat-show.html":'<div class="m-md-top">\n    <div ng-switch="vatInfo.format.transKey">\n        <p ng-switch-when="gst" class="m-0-bottom">{{ vatInfo.format.taxName }} registration and {{ vatInfo.format.identifierFullName }} ({{ vatInfo.format.identifierName }}) are requested from all persons located in {{ vatInfo.country.name }}.</p>\n        <p ng-switch-default class="m-0-bottom">A {{ vatInfo.format.identifierName }} is requested from all persons located in a country where Upwork supports {{ vatInfo.format.taxName }}.</p>\n    </div>\n\n    <div ng-show="vatInfo.isPresent" class="no-hide-animation m-lg-top">\n        <div class="form-group m-0-bottom">\n            <label class="control-label text-capitalize" ng-bind-html="vatInfo.format.identifierName"></label>\n            <p class="form-control-static" ng-show="vatInfo.isExempted">EXEMPTED</p>\n            <p class="form-control-static" ng-hide="vatInfo.isExempted">{{ vatInfo.vatId }}</p>\n        </div>\n\n        <div class="form-group m-0-bottom m-md-top" ng-hide="vatInfo.isExempted">\n            <label class="control-label">Status</label>\n            <p class="form-control-static" ng-switch="vatInfo.verificationStatus">\n            <span ng-switch-when="1">Approved</span>\n                <span ng-switch-when="3">Not Approved</span>\n                <span ng-switch-default>Pending Approval</span>\n            </p>\n        </div>\n    </div>\n</div>\n',"/ab/payments/tax-info/partials/vat-form.html":'\n\n<eo-alert ng-if="isErrorNotification()" type="danger">\n    Please fix the errors below.</eo-alert>\n\n<div class="ng-form m-md-top" data-name="vat_info">\n    <div ng-switch="vatInfo.format.transKey">\n        <p ng-switch-when="gst">Provide your {{ vatInfo.format.taxName }} registration acknowledgement and {{ vatInfo.format.identifierFullName }} ({{ vatInfo.format.identifierName }}) below.</p>\n        <p ng-switch-default>A {{ vatInfo.format.identifierName }} is requested from all persons located in a country where Upwork supports {{ vatInfo.format.taxName }}.</p>\n    </div>\n    <div class="form-group">\n        <div class="radio">\n            <label>\n                <input type="radio"\n                       required\n                       name="skipVat"\n                       ng-model="form.skipVat"\n                       value="1" />\n                <span class="checkbox-replacement-helper"></span>\n                <span ng-if="vatInfo.format.confirmationRequired">I am not registered for {{ vatInfo.format.taxName }}</span>\n                <span ng-if="!vatInfo.format.confirmationRequired">\n                    <span ng-if="vatInfo.format.iDontHaveVat">\n                        {{ vatInfo.format.iDontHaveVat }}\n                    </span>\n                    <span ng-if="!vatInfo.format.iDontHaveVat">I don&#039;t have {{ vatInfo.format.identifierNameWithArticle}}</span>\n                </span>\n            </label>\n        </div>\n        <div class="radio bpa-bottom-border-sm">\n            <label>\n                <input type="radio"\n                       required\n                       name="skipVat"\n                       ng-model="form.skipVat"\n                       value="0" />\n                <span class="checkbox-replacement-helper"></span>\n                <span ng-if="vatInfo.format.confirmationRequired">I am registered for {{ vatInfo.format.taxName }}\n                </span>\n                <span ng-if="!vatInfo.format.confirmationRequired">\n                    <span ng-if="vatInfo.format.iHaveVat">\n                        {{ vatInfo.format.iHaveVat }}\n                    </span>\n                    <span ng-if="!vatInfo.format.iHaveVat">I have {{ vatInfo.format.identifierNameWithArticle}}</span>\n                </span>\n            </label>\n        </div>\n        <div ng-messages="vat_info.skipVat.$error" data-ng-show="vat_info.skipVat.$invalid && vat_info.skipVat.$dirty">\n            <label ng-message="required" class="form-message form-error">\n                <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>This field is required</label>\n        </div>\n    </div>\n    <div data-ng-show="isVatSkipped()" class="no-hide-animation" ng-switch="vatInfo.format.transKey">\n        <p ng-switch-when="gst">If youre <span class="text-underline">not</span> registered for {{ vatInfo.format.taxName }} (even if you have a valid {{ vatInfo.format.identifierName }}), a {{ vatInfo.format.taxName }} at a rate of {{ vatInfo.rate|number }}% will be charged on applicable Upwork fees (e.g. service fees, membership fees, and purchases of additional Connects).</p>\n    </div>\n    <div data-ng-hide="isVatSkipped()" class="no-hide-animation">\n        <div ng-switch="vatInfo.format.transKey">\n            <p ng-switch-when="gst">If you provide a valid {{ vatInfo.format.identifierName }} and acknowledge youre registered for {{ vatInfo.format.taxName }} below, you will not be charged {{ vatInfo.format.taxName }} by Upwork.\n</p>\n            <p ng-switch-default>{{ vatInfo.format.chargeWontBeAdded }}     <a tabindex="-1" target="_blank" href="https://support.upwork.com/hc/en-us/articles/211061278" title="Learn more">Learn more</a></p>\n        </div>\n\n        <div class="form-group">\n            <div bpa-vat-group\n                 data-format-correctness-flag="flag.formatIsCorrect">\n                <label for="vat_info_vatId" class="control-label">\n                    {{ vatInfo.format.identifierNameLabel }}\n                </label>\n                <input id="vat_info_vatId"\n                       name="vatId"\n                       type="text"\n                       class="form-control"\n                       ng-model="form.vatId"\n                       data-min-digits-count="5"\n                       bpa-check-vat-format\n                       data-vat-pattern="{{ vatInfo.format.rule }}"\n                       ng-required="!isVatSkipped()"\n                       placeholder="{{ vatInfo.format.placeholder }}" />\n                <div class="m-sm-top text-muted">Format: {{ vatInfo.format.hint }}</div>\n                <div class="ng-cloak" ng-messages="inputController.$error" ng-show="inputController.$dirty">\n                    <label ng-message="vatFormat" class="form-message form-error">\n                        <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>{{ vatInfo.format.identifierName }} format is invalid.</label>\n                    <label ng-message="vatDigits" class="form-message form-error">\n                        <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>{{ vatInfo.format.identifierName }} format is invalid.</label>\n                    <label ng-message="required" class="form-message form-error">\n                        <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>{{ vatInfo.format.identifierName }} field is required.</label>\n                </div>\n            </div>\n        </div>\n\n        <div class="form-group" ng-show="vatInfo.format.confirmationRequired">\n            <div class="checkbox bpa-bottom-border-sm">\n                <label>\n                    <input type="checkbox"\n                           ng-required="vatInfo.format.confirmationRequired && !isVatSkipped()"\n                           name="certification"\n                           ng-model="form.certification"\n                           value="1" />\n                    <span class="checkbox-replacement-helper">\n                        <span aria-hidden="true" class="glyphicon air-icon-check"></span>\n                    </span>By checking this box, I declare that I am registered for {{ vatInfo.format.taxName }} in {{ vatInfo.country.name }}</label>\n            </div>\n            <div data-ng-messages="vat_info.certification.$error" data-ng-show="vat_info.certification.$dirty">\n                <label data-ng-message="required" class="form-message form-error">\n                    <span class="glyphicon air-icon-exclamation-circle" aria-hidden="true"></span>This field is required</label>\n            </div>\n        </div>\n    </div>\n</div>\n',"/ab/payments/tax-info/partials/vat-format-warning.html":'<up-c-modal bpa-custom-element\n            auto-open\n            ng-on-close="vm.onClose(vm.result)"\n            ng-method-close="vm.close"\n            modal-footer-inverse\n            size="sm"\n            page-title="Unrecognized {{\n                    vm.vatFormat.transKey == &quot;gst&quot;\n                        ? vm.vatFormat.identifierName\n                        : vm.vatFormat.taxName\n                }} format"\n>\n    <div slot="body">\n        <div ng-switch="vm.vatFormat.transKey">\n            <span ng-switch-when="gst">\n                The {{ vm.vatFormat.identifierName }} you entered is not in a recognized {{ vm.vatFormat.identifierName }} format. If you do not update your {{ vm.vatFormat.identifierName }}, please note it may not be approved.\n\n            </span>\n            <span ng-switch-default>\n                The {{ vm.vatFormat.identifierName }} you entered is not in a recognized format for your country. If you do not edit it, it may not be approved.\n\n            </span>\n        </div>\n        <p class="m-md-top m-0-bottom"><strong>Do you want to save it anyway?</strong></p>\n    </div>\n    <div slot="footer" ng-class="vm.isSmallScreen() ? \'bpa-mobile-stacked-buttons\' : \'text-right\'">\n        <button class="btn btn-link btn-block-sm mt-10 mt-md-0 text-capitalize" data-ng-click="vm.cancel()">Edit {{ vm.vatFormat.identifierName }}</button>\n        <button class="btn btn-primary btn-block-sm text-capitalize" data-ng-click="vm.ok()">Save {{ vm.vatFormat.identifierName }}</button>\n    </div>\n</up-c-modal>\n',"/ab/payments/tax-info/partials/vat-removal-warning.html":'<up-c-modal bpa-custom-element\n            auto-open\n            ng-on-close="vm.onClose(vm.result)"\n            ng-method-close="vm.close"\n            modal-footer-inverse\n            size="sm"\n            page-title="Removing {{ vm.vatInfo &amp;&amp; vm.vatInfo.format.identifierName }}"\n>\n    <div slot="body">\n        <p class="form-control-static mb-20 mb-lg-30">\n            <span ng-show="vm.vatInfo && vm.vatInfo.isExempted">Removing {{ vm.vatInfo.format.taxName }} exemption cannot be undone. Are you sure you want to continue?\n</span>\n            <span ng-hide="vm.vatInfo && vm.vatInfo.isExempted">Removing your {{ vm.vatInfo.format.identifierName }} cannot be undone. Are you sure you want to continue?\n</span>\n        </p>\n        <div class="form-group mb-0">\n            <label class="control-label text-capitalize"\n                   ng-bind-html="vm.vatInfo && vm.vatInfo.format.identifierName"></label>\n            <p class="form-control-static" ng-show="vm.vatInfo && vm.vatInfo.isExempted">EXEMPTED</p>\n            <p class="form-control-static" ng-hide="vm.vatInfo && vm.vatInfo.isExempted">{{ vm.vatInfo.vatId }}</p>\n        </div>\n    </div>\n    <div slot="footer" ng-class="vm.isSmallScreen() ? \'bpa-mobile-stacked-buttons\' : \'text-right\'">\n        <button class="btn btn-link btn-block-sm mt-10 mt-md-0" ng-click="vm.cancel()">Cancel</button>\n        <button class="btn btn-primary btn-block-sm text-capitalize" ng-click="vm.ok()">Remove {{ vm.vatInfo &amp;&amp; vm.vatInfo.format.identifierName }}</button>\n    </div>\n</up-c-modal>\n',"/ab/payments/tax-info/partials/us-popover.html":"<div>\n    <strong>You are considered a U.S. person if you are:</strong>\n    <hr />\n    <ul>\n        <li>An individual who is a U.S. citizen or U.S. resident alien,</li>\n        <li>A partnership, corporation, company, or association created or organized in the United States or under the laws of the United States,</li>\n        <li>An estate (other than a foreign estate); or</li>\n        <li>A domestic trust (as defined in U.S. tax regulations).</li>\n    </ul>\n</div>\n","/ab/payments/tax-info/partials/ein-popover.html":'<div>An employer identification number (EIN) is a U.S. tax identification number (TIN) issued to businesses. For additional information, or to apply for an EIN, you may visit <a href="http://www.irs.gov/Businesses/Small-Businesses-&-Self-Employed/Employer-ID-Numbers-EINs">this website</a>.\n</div>\n',"/ab/payments/tax-info/partials/tax-certificate-w8.html":'<div>\n    <strong>Only check the certification if these items are true; otherwise contact <a href="https://support.upwork.com/home/" target="_blank">Upwork Support</a>\n</strong>\n    <hr />\n    <ol class="m-0-bottom m-0-left p-md-left">\n        <li>I will update the information if it changes,</li>\n        <li>I am the beneficial owner (or am authorized to sign for the beneficial owner) of all the income to be received under this Upwork account,\n</li>\n        <li>I am not (or the beneficial owner is not) a U.S. person,</li>\n        <li>the services performed under this Upwork account will not be performed in the U.S. and</li>\n        <li class="m-0-bottom">the income related to this Upwork account will not be effectively connected with the conduct of a U.S. trade or business.</li>\n    </ol>\n</div>\n',"/ab/payments/tax-info/partials/tax-certificate-w9.html":'<div>\n    <strong>Only check the certification if these items are true; otherwise contact <a href="https://support.upwork.com/home/" target="_blank">Upwork Support</a>\n</strong>\n    <hr />\n    <ol class="m-0-bottom m-0-left p-md-left">\n        <li>The number shown on this form is my correct taxpayer identification number (or I am waiting for a number to be issued to me); and</li>\n        <li>I am not subject to backup withholding because: (a) I am exempt from backup withholding, or (b) I have not been notified by the Internal Revenue Service (IRS) that i am subject to backup withholdings as a result of a failure to report all interest or dividends, or (c) the IRS has notified me that I am no longer subject to backup withholdings; and\n</li>\n        <li class="m-0-bottom">I am a U.S. citizen or other U.S. person</li>\n    </ol>\n</div>\n'},httpData:[]}},function(e,t,n){"use strict";var a=n(23),r=function(e){return e&&e.__esModule?e:{default:e}}(n(255));angular.module((0,a.getModuleName)()).run(["bpaRouting",function(e){e.addRoutes(r.default)}])},function(e,t){e.exports={"template-verify-mop-modal":"/ab/payments/verify-payment/partial/modal.html","page-disbursement-methods":"/ab/payments/disbursement-methods","template-disbursement-schedule-form":"/ab/payments/resource/disbursement-schedule-form.html","template-disbursement-schedule-form-modal":"/ab/payments/resource/disbursement-schedule-form-modal.html","template-disbursement-methods-popup":"/ab/payments/resource/disbursement-methods-popup.html","template-disbursement-method-types-list":"/ab/payments/resource/disbursement-method-types-list.html","template-disburse-warning-tax-info":"/ab/payments/resource/disburse-warning-tax-info.html","template-disburse-warning-account-suspended":"/ab/payments/resource/disburse-warning-account-suspended.html","template-disburse-warning-no-payment-methods":"/ab/payments/resource/disburse-warning-no-payment-methods.html","template-disburse-warning-method-not-valid":"/ab/payments/resource/disburse-warning-method-not-valid.html","template-disburse-warning-no-active-methods":"/ab/payments/resource/disburse-warning-no-active-methods.html","template-disbursement-methods-removal-confirmation":"/ab/payments/resource/disbursement-methods-removal-confirmation.html","template-initiate-verification-modal":"/ab/payments/resource/initiate-verification-modal.html","financial-account-selector-fetch":"/ab/payments/financial-account-selector/fetch","template-financial-account-selector":"/ab/payments/resource/template-financial-account-selector.html","template-bpa-select":"/ab/payments/resource/bpa-select.html","template-payment-method-selector":"/ab/payments/resource/payment-method-selector.html","template-loading-error-modal":"/ab/payments/resource/template-loading-error-modal.html","tax-info-status":"/ab/payments/tax-info/status","submit-tax-info":"/ab/payments/tax-info/submit","submit-vat":"/ab/payments/tax-info/submit-vat","remove-vat":"/ab/payments/tax-info/remove-vat","template-tax-show":"/ab/payments/tax-info/partials/tax-show.html","template-tax-form":"/ab/payments/tax-info/partials/tax-form.html","template-vat-show":"/ab/payments/tax-info/partials/vat-show.html","template-vat-form":"/ab/payments/tax-info/partials/vat-form.html","template-vat-format-warning":"/ab/payments/tax-info/partials/vat-format-warning.html","template-vat-removal-warning":"/ab/payments/tax-info/partials/vat-removal-warning.html","template-us-popover":"/ab/payments/tax-info/partials/us-popover.html","template-ein-popover":"/ab/payments/tax-info/partials/ein-popover.html","template-tax-certificate-w8":"/ab/payments/tax-info/partials/tax-certificate-w8.html","template-tax-certificate-w9":"/ab/payments/tax-info/partials/tax-certificate-w9.html"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(n(257));t.default={submitIovationForm:a.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.querySelector("form"),t=document.getElementById("iovation_pseudoform_iovationBlackBox"),n=document.getElementById("iovation_pseudoform_token"),a=e.getAttribute("action"),r=5,i=3;window.dataLayer&&a&&-1!=a.indexOf("billing-agreement")&&window.dataLayer.push({event:"billingEvents",eventCategory:"Billing",eventAction:"Add PayPal",eventLabel:"Success"});function o(e){var r=new XMLHttpRequest,s=t.name+"="+encodeURIComponent(t.value||e)+(n?"&"+n.name+"="+encodeURIComponent(n.value):"");r.open("POST",a),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){if(4==r.readyState){if(401!=r.status&&403!=r.status){if(200==r.status)try{var t=JSON.parse(r.responseText);if(t.url)return void(document.location=t.url)}catch(e){}if(--i)return void function(e){setTimeout(function(){o(e)},1e3)}(e)}document.location="/"}},r.send(s)}!function e(){if(!r--)return void function(){var e="";try{var t=ioGetBlackbox();e=t.blackbox}catch(e){}o(e)}();t.value?o(t.value):setTimeout(e,2e3)}()}}]);